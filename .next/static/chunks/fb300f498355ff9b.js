(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87316,e=>{"use strict";let t=(0,e.i(475254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},263488,e=>{"use strict";let t=(0,e.i(475254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],263488)},531278,e=>{"use strict";let t=(0,e.i(475254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],531278)},730699,e=>{"use strict";let t=(0,e.i(475254).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["Gift",()=>t],730699)},98919,e=>{"use strict";let t=(0,e.i(475254).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],98919)},842727,e=>{"use strict";var t=e.i(271645),a=e.i(981140),r=e.i(75830),s=e.i(820783),i=e.i(30030),n=e.i(610772),o=e.i(248425),l=e.i(30207),d=e.i(369340),c=e.i(586318),u=e.i(843476),m="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},f="RovingFocusGroup",[h,x,g]=(0,r.createCollection)(f),[v,j]=(0,i.createContextScope)(f,[g]),[b,y]=v(f),C=t.forwardRef((e,t)=>(0,u.jsx)(h.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,u.jsx)(h.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,u.jsx)(N,{...e,ref:t})})}));C.displayName=f;var N=t.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:i,orientation:n,loop:f=!1,dir:h,currentTabStopId:g,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:j,onEntryFocus:y,preventScrollOnEntryFocus:C=!1,...N}=e,w=t.useRef(null),T=(0,s.useComposedRefs)(r,w),k=(0,c.useDirection)(h),[R=null,S]=(0,d.useControllableState)({prop:g,defaultProp:v,onChange:j}),[F,I]=t.useState(!1),E=(0,l.useCallbackRef)(y),P=x(i),A=t.useRef(!1),[M,L]=t.useState(0);return t.useEffect(()=>{let e=w.current;if(e)return e.addEventListener(m,E),()=>e.removeEventListener(m,E)},[E]),(0,u.jsx)(b,{scope:i,orientation:n,dir:k,loop:f,currentTabStopId:R,onItemFocus:t.useCallback(e=>S(e),[S]),onItemShiftTab:t.useCallback(()=>I(!0),[]),onFocusableItemAdd:t.useCallback(()=>L(e=>e+1),[]),onFocusableItemRemove:t.useCallback(()=>L(e=>e-1),[]),children:(0,u.jsx)(o.Primitive.div,{tabIndex:F||0===M?-1:0,"data-orientation":n,...N,ref:T,style:{outline:"none",...e.style},onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,()=>{A.current=!0}),onFocus:(0,a.composeEventHandlers)(e.onFocus,e=>{let t=!A.current;if(e.target===e.currentTarget&&t&&!F){let t=new CustomEvent(m,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=P().filter(e=>e.focusable);D([e.find(e=>e.active),e.find(e=>e.id===R),...e].filter(Boolean).map(e=>e.ref.current),C)}}A.current=!1}),onBlur:(0,a.composeEventHandlers)(e.onBlur,()=>I(!1))})})}),w="RovingFocusGroupItem",T=t.forwardRef((e,r)=>{let{__scopeRovingFocusGroup:s,focusable:i=!0,active:l=!1,tabStopId:d,...c}=e,m=(0,n.useId)(),p=d||m,f=y(w,s),g=f.currentTabStopId===p,v=x(s),{onFocusableItemAdd:j,onFocusableItemRemove:b}=f;return t.useEffect(()=>{if(i)return j(),()=>b()},[i,j,b]),(0,u.jsx)(h.ItemSlot,{scope:s,id:p,focusable:i,active:l,children:(0,u.jsx)(o.Primitive.span,{tabIndex:g?0:-1,"data-orientation":f.orientation,...c,ref:r,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{i?f.onItemFocus(p):e.preventDefault()}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>f.onItemFocus(p)),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,a){var r;let s=(r=e.key,"rtl"!==a?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(s))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)))return k[s]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=v().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){var a,r;"prev"===t&&s.reverse();let i=s.indexOf(e.currentTarget);s=f.loop?(a=s,r=i+1,a.map((e,t)=>a[(r+t)%a.length])):s.slice(i+1)}setTimeout(()=>D(s))}})})})});T.displayName=w;var k={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function D(e,t=!1){let a=document.activeElement;for(let r of e)if(r===a||(r.focus({preventScroll:t}),document.activeElement!==a))return}e.s(["Item",()=>T,"Root",()=>C,"createRovingFocusGroupScope",()=>j])},677572,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(981140),s=e.i(30030),i=e.i(842727),n=e.i(296626),o=e.i(248425),l=e.i(586318),d=e.i(369340),c=e.i(610772),u="Tabs",[m,p]=(0,s.createContextScope)(u,[i.createRovingFocusGroupScope]),f=(0,i.createRovingFocusGroupScope)(),[h,x]=m(u),g=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:s,onValueChange:i,defaultValue:n,orientation:u="horizontal",dir:m,activationMode:p="automatic",...f}=e,x=(0,l.useDirection)(m),[g,v]=(0,d.useControllableState)({prop:s,onChange:i,defaultProp:n});return(0,t.jsx)(h,{scope:r,baseId:(0,c.useId)(),value:g,onValueChange:v,orientation:u,dir:x,activationMode:p,children:(0,t.jsx)(o.Primitive.div,{dir:x,"data-orientation":u,...f,ref:a})})});g.displayName=u;var v="TabsList",j=a.forwardRef((e,a)=>{let{__scopeTabs:r,loop:s=!0,...n}=e,l=x(v,r),d=f(r);return(0,t.jsx)(i.Root,{asChild:!0,...d,orientation:l.orientation,dir:l.dir,loop:s,children:(0,t.jsx)(o.Primitive.div,{role:"tablist","aria-orientation":l.orientation,...n,ref:a})})});j.displayName=v;var b="TabsTrigger",y=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:n,disabled:l=!1,...d}=e,c=x(b,s),u=f(s),m=w(c.baseId,n),p=T(c.baseId,n),h=n===c.value;return(0,t.jsx)(i.Item,{asChild:!0,...u,focusable:!l,active:h,children:(0,t.jsx)(o.Primitive.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":p,"data-state":h?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:m,...d,ref:a,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;h||l||!e||c.onValueChange(n)})})})});y.displayName=b;var C="TabsContent",N=a.forwardRef((e,r)=>{let{__scopeTabs:s,value:i,forceMount:l,children:d,...c}=e,u=x(C,s),m=w(u.baseId,i),p=T(u.baseId,i),f=i===u.value,h=a.useRef(f);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(n.Presence,{present:l||f,children:({present:a})=>(0,t.jsx)(o.Primitive.div,{"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!a,id:p,tabIndex:0,...c,ref:r,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&d})})});function w(e,t){return`${e}-trigger-${t}`}function T(e,t){return`${e}-content-${t}`}N.displayName=C;var k=e.i(975157);let D=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(j,{ref:r,className:(0,k.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));D.displayName=j.displayName;let R=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(y,{ref:r,className:(0,k.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));R.displayName=y.displayName;let S=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(N,{ref:r,className:(0,k.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));S.displayName=N.displayName,e.s(["Tabs",()=>g,"TabsContent",()=>S,"TabsList",()=>D,"TabsTrigger",()=>R],677572)},178583,e=>{"use strict";let t=(0,e.i(475254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],178583)},326999,e=>{"use strict";var t=e.i(271645),a=e.i(981140),r=e.i(820783),s=e.i(30030),i=e.i(610772),n=e.i(369340),o=e.i(726330),l=e.i(765491),d=e.i(774606),c=e.i(296626),u=e.i(248425),m=e.i(303536),p=e.i(985369),f=e.i(186312),h=e.i(991918),x=e.i(843476),g="Dialog",[v,j]=(0,s.createContextScope)(g),[b,y]=v(g),C=e=>{let{__scopeDialog:a,children:r,open:s,defaultOpen:o,onOpenChange:l,modal:d=!0}=e,c=t.useRef(null),u=t.useRef(null),[m=!1,p]=(0,n.useControllableState)({prop:s,defaultProp:o,onChange:l});return(0,x.jsx)(b,{scope:a,triggerRef:c,contentRef:u,contentId:(0,i.useId)(),titleId:(0,i.useId)(),descriptionId:(0,i.useId)(),open:m,onOpenChange:p,onOpenToggle:t.useCallback(()=>p(e=>!e),[p]),modal:d,children:r})};C.displayName=g;var N="DialogTrigger",w=t.forwardRef((e,t)=>{let{__scopeDialog:s,...i}=e,n=y(N,s),o=(0,r.useComposedRefs)(t,n.triggerRef);return(0,x.jsx)(u.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":G(n.open),...i,ref:o,onClick:(0,a.composeEventHandlers)(e.onClick,n.onOpenToggle)})});w.displayName=N;var T="DialogPortal",[k,D]=v(T,{forceMount:void 0}),R=e=>{let{__scopeDialog:a,forceMount:r,children:s,container:i}=e,n=y(T,a);return(0,x.jsx)(k,{scope:a,forceMount:r,children:t.Children.map(s,e=>(0,x.jsx)(c.Presence,{present:r||n.open,children:(0,x.jsx)(d.Portal,{asChild:!0,container:i,children:e})}))})};R.displayName=T;var S="DialogOverlay",F=t.forwardRef((e,t)=>{let a=D(S,e.__scopeDialog),{forceMount:r=a.forceMount,...s}=e,i=y(S,e.__scopeDialog);return i.modal?(0,x.jsx)(c.Presence,{present:r||i.open,children:(0,x.jsx)(E,{...s,ref:t})}):null});F.displayName=S;var I=(0,h.createSlot)("DialogOverlay.RemoveScroll"),E=t.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,s=y(S,a);return(0,x.jsx)(p.RemoveScroll,{as:I,allowPinchZoom:!0,shards:[s.contentRef],children:(0,x.jsx)(u.Primitive.div,{"data-state":G(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),P="DialogContent",A=t.forwardRef((e,t)=>{let a=D(P,e.__scopeDialog),{forceMount:r=a.forceMount,...s}=e,i=y(P,e.__scopeDialog);return(0,x.jsx)(c.Presence,{present:r||i.open,children:i.modal?(0,x.jsx)(M,{...s,ref:t}):(0,x.jsx)(L,{...s,ref:t})})});A.displayName=P;var M=t.forwardRef((e,s)=>{let i=y(P,e.__scopeDialog),n=t.useRef(null),o=(0,r.useComposedRefs)(s,i.contentRef,n);return t.useEffect(()=>{let e=n.current;if(e)return(0,f.hideOthers)(e)},[]),(0,x.jsx)(O,{...e,ref:o,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),i.triggerRef.current?.focus()}),onPointerDownOutside:(0,a.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,a.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),L=t.forwardRef((e,a)=>{let r=y(P,e.__scopeDialog),s=t.useRef(!1),i=t.useRef(!1);return(0,x.jsx)(O,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||r.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));let a=t.target;r.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),O=t.forwardRef((e,a)=>{let{__scopeDialog:s,trapFocus:i,onOpenAutoFocus:n,onCloseAutoFocus:d,...c}=e,u=y(P,s),p=t.useRef(null),f=(0,r.useComposedRefs)(a,p);return(0,m.useFocusGuards)(),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(l.FocusScope,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:n,onUnmountAutoFocus:d,children:(0,x.jsx)(o.DismissableLayer,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":G(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Y,{titleId:u.titleId}),(0,x.jsx)(q,{contentRef:p,descriptionId:u.descriptionId})]})]})}),H="DialogTitle",V=t.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,s=y(H,a);return(0,x.jsx)(u.Primitive.h2,{id:s.titleId,...r,ref:t})});V.displayName=H;var $="DialogDescription",B=t.forwardRef((e,t)=>{let{__scopeDialog:a,...r}=e,s=y($,a);return(0,x.jsx)(u.Primitive.p,{id:s.descriptionId,...r,ref:t})});B.displayName=$;var K="DialogClose",_=t.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,i=y(K,r);return(0,x.jsx)(u.Primitive.button,{type:"button",...s,ref:t,onClick:(0,a.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})});function G(e){return e?"open":"closed"}_.displayName=K;var z="DialogTitleWarning",[U,W]=(0,s.createContext)(z,{contentName:P,titleName:H,docsSlug:"dialog"}),Y=({titleId:e})=>{let a=W(z),r=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return t.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},q=({contentRef:e,descriptionId:a})=>{let r=W("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return t.useEffect(()=>{let t=e.current?.getAttribute("aria-describedby");a&&t&&(document.getElementById(a)||console.warn(s))},[s,e,a]),null};e.s(["Close",()=>_,"Content",()=>A,"Description",()=>B,"Overlay",()=>F,"Portal",()=>R,"Root",()=>C,"Title",()=>V,"Trigger",()=>w])},306697,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(519455),s=e.i(515288),i=e.i(793479),n=e.i(110204),o=e.i(677572),l=e.i(487486),d=e.i(326999),c=e.i(37727),u=e.i(975157);let m=d.Root;d.Trigger;let p=d.Portal;d.Close;let f=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(d.Overlay,{ref:r,className:(0,u.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));f.displayName=d.Overlay.displayName;let h=a.forwardRef(({className:e,children:a,...r},s)=>(0,t.jsxs)(p,{children:[(0,t.jsx)(f,{}),(0,t.jsxs)(d.Content,{ref:s,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[a,(0,t.jsxs)(d.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(c.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));h.displayName=d.Content.displayName;let x=({className:e,...a})=>(0,t.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});x.displayName="DialogHeader";let g=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(d.Title,{ref:r,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));g.displayName=d.Title.displayName;let v=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(d.Description,{ref:r,className:(0,u.cn)("text-sm text-muted-foreground",e),...a}));v.displayName=d.Description.displayName;var j=e.i(263488),b=e.i(343432),y=e.i(269638),C=e.i(87316),N=e.i(178583),w=e.i(730699),T=e.i(98919),k=e.i(292270),D=e.i(531278),R=e.i(908406);function S(){let{toast:e}=(0,R.useToast)(),[d,c]=(0,a.useState)("lookup"),[u,p]=(0,a.useState)("email"),[f,S]=(0,a.useState)(""),[F,I]=(0,a.useState)(""),[E,P]=(0,a.useState)(!1),[A,M]=(0,a.useState)(null),[L,O]=(0,a.useState)(""),[H,V]=(0,a.useState)(null),[$,B]=(0,a.useState)(!1),[K,_]=(0,a.useState)(!1),[G,z]=(0,a.useState)(""),[U,W]=(0,a.useState)(""),[Y,q]=(0,a.useState)(""),[J,Z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{X()},[]),(0,a.useEffect)(()=>{"authenticated"===d&&A&&et()},[d,A]);let X=async()=>{try{let e=await fetch("/api/portal/session");if(e.ok){let t=await e.json();t.customerId&&(M(t.customerId.toString()),c("authenticated"))}}catch(e){console.log("[Portal] No active session found")}},Q=async()=>{P(!0);try{let t=await fetch("/api/portal/auth/lookup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lookupType:u,lookupValue:f.trim()})}),a=await t.json();if(!t.ok)throw Error(a.error||"Lookup failed");O(a.token),c("verify-code"),e({title:"Verification Code Sent",description:"email"===u?"Check your email for the verification code.":"Check your phone for the verification code."})}catch(t){e({title:"Error",description:t.message||"Failed to send verification code",variant:"destructive"})}finally{P(!1)}},ee=async()=>{P(!0);try{let t=await fetch("/api/portal/auth/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contactValue:f.trim(),code:F.trim(),token:L,lookupType:u})}),a=await t.json();if(!t.ok)throw Error(a.error||"Verification failed");if(a.customers&&a.customers.length>0)M(a.customers[0].id.toString()),c("authenticated"),e({title:"Welcome!",description:"Successfully logged in to your portal."});else throw Error("No customer account found")}catch(t){e({title:"Verification Failed",description:t.message||"Invalid verification code",variant:"destructive"})}finally{P(!1)}},et=async()=>{if(A){B(!0);try{let e=await fetch(`/api/portal/customer/${A}`);if(!e.ok)throw Error("Failed to load customer data");let t=await e.json();V(t)}catch(t){e({title:"Error",description:"Failed to load your account data",variant:"destructive"})}finally{B(!1)}}},ea=async()=>{try{await fetch("/api/portal/auth/logout",{method:"POST"}),M(null),V(null),c("lookup"),S(""),I(""),O(""),e({title:"Logged Out",description:"You have been successfully logged out."})}catch(e){console.error("[Portal] Logout error:",e)}},er=async()=>{if(!G.trim()||!U.trim())return void e({title:"Missing Information",description:"Please provide at least a name and phone number.",variant:"destructive"});Z(!0);try{let t=await fetch("/api/referrals/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referrerName:H?.name||"Customer",referrerEmail:H?.email||"",referrerPhone:H?.phone||"",refereeName:G.trim(),refereePhone:U.trim(),refereeEmail:Y.trim()||""})}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to submit referral");e({title:"Referral Submitted!",description:"Thank you for referring a friend. We'll contact them soon!"}),z(""),W(""),q(""),_(!1),et()}catch(t){e({title:"Submission Failed",description:t.message||"Failed to submit referral. Please try again.",variant:"destructive"})}finally{Z(!1)}};return"lookup"===d?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-accent/5 p-4",children:(0,t.jsxs)(s.Card,{className:"w-full max-w-md","data-testid":"card-portal-login",children:[(0,t.jsxs)(s.CardHeader,{className:"text-center",children:[(0,t.jsx)(s.CardTitle,{className:"text-2xl","data-testid":"text-portal-title",children:"Customer Portal"}),(0,t.jsx)(s.CardDescription,{"data-testid":"text-portal-subtitle",children:"Sign in to view your service history and account details"})]}),(0,t.jsxs)(s.CardContent,{className:"space-y-6",children:[(0,t.jsxs)(o.Tabs,{value:u,onValueChange:e=>p(e),children:[(0,t.jsxs)(o.TabsList,{className:"grid w-full grid-cols-2","data-testid":"tabs-login-method",children:[(0,t.jsxs)(o.TabsTrigger,{value:"email","data-testid":"tab-email-login",children:[(0,t.jsx)(j.Mail,{className:"w-4 h-4 mr-2"}),"Email"]}),(0,t.jsxs)(o.TabsTrigger,{value:"phone","data-testid":"tab-phone-login",children:[(0,t.jsx)(b.Phone,{className:"w-4 h-4 mr-2"}),"Phone"]})]}),(0,t.jsxs)(o.TabsContent,{value:"email",className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"email","data-testid":"label-email",children:"Email Address"}),(0,t.jsx)(i.Input,{id:"email",type:"email",placeholder:"your@email.com",value:f,onChange:e=>S(e.target.value),onKeyDown:e=>"Enter"===e.key&&Q(),"data-testid":"input-email"})]}),(0,t.jsx)(r.Button,{onClick:Q,disabled:E||!f.trim(),className:"w-full","data-testid":"button-send-email-code",children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Mail,{className:"w-4 h-4 mr-2"}),"Send Verification Email"]})})]}),(0,t.jsxs)(o.TabsContent,{value:"phone",className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"phone","data-testid":"label-phone",children:"Phone Number"}),(0,t.jsx)(i.Input,{id:"phone",type:"tel",placeholder:"(512) 555-0123",value:f,onChange:e=>S(e.target.value),onKeyDown:e=>"Enter"===e.key&&Q(),"data-testid":"input-phone"})]}),(0,t.jsx)(r.Button,{onClick:Q,disabled:E||!f.trim(),className:"w-full","data-testid":"button-send-phone-code",children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Phone,{className:"w-4 h-4 mr-2"}),"Send Verification Code"]})})]})]}),(0,t.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:(0,t.jsx)("p",{children:"We'll send you a secure code to verify your identity"})})]})]})}):"verify-code"===d?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-accent/5 p-4",children:(0,t.jsxs)(s.Card,{className:"w-full max-w-md","data-testid":"card-verify-code",children:[(0,t.jsxs)(s.CardHeader,{className:"text-center",children:[(0,t.jsx)(s.CardTitle,{className:"text-2xl","data-testid":"text-verify-title",children:"Verify Your Code"}),(0,t.jsxs)(s.CardDescription,{"data-testid":"text-verify-subtitle",children:["Enter the code we sent to ",f]})]}),(0,t.jsxs)(s.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"code","data-testid":"label-code",children:"Verification Code"}),(0,t.jsx)(i.Input,{id:"code",type:"text",placeholder:"123456",value:F,onChange:e=>I(e.target.value),onKeyDown:e=>"Enter"===e.key&&ee(),"data-testid":"input-code"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>{c("lookup"),I("")},className:"flex-1","data-testid":"button-back",children:"Back"}),(0,t.jsx)(r.Button,{onClick:ee,disabled:E||!F.trim(),className:"flex-1","data-testid":"button-verify",children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.CheckCircle,{className:"w-4 h-4 mr-2"}),"Verify"]})})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(r.Button,{variant:"ghost",onClick:Q,disabled:E,"data-testid":"button-resend",children:"Resend Code"})})]})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5",children:[(0,t.jsx)("div",{className:"bg-card border-b",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold","data-testid":"text-welcome",children:["Welcome",H?.name?`, ${H.name}`:""]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground","data-testid":"text-account-id",children:["Account #",A]})]}),(0,t.jsxs)(r.Button,{variant:"outline",onClick:ea,"data-testid":"button-logout",children:[(0,t.jsx)(k.LogOut,{className:"w-4 h-4 mr-2"}),"Logout"]})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:$?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(D.Loader2,{className:"w-8 h-8 animate-spin text-primary","data-testid":"loader-data"})}):H?(0,t.jsxs)("div",{className:"grid gap-6",children:[(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)(s.Card,{"data-testid":"card-stat-appointments",children:[(0,t.jsxs)(s.CardHeader,{className:"pb-3",children:[(0,t.jsx)(s.CardDescription,{children:"Upcoming Appointments"}),(0,t.jsx)(s.CardTitle,{className:"text-3xl",children:H.appointments?.length||0})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)(C.Calendar,{className:"w-4 h-4 text-muted-foreground"})})]}),(0,t.jsxs)(s.Card,{"data-testid":"card-stat-invoices",children:[(0,t.jsxs)(s.CardHeader,{className:"pb-3",children:[(0,t.jsx)(s.CardDescription,{children:"Recent Invoices"}),(0,t.jsx)(s.CardTitle,{className:"text-3xl",children:H.invoices?.length||0})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)(N.FileText,{className:"w-4 h-4 text-muted-foreground"})})]}),(0,t.jsxs)(s.Card,{"data-testid":"card-stat-memberships",children:[(0,t.jsxs)(s.CardHeader,{className:"pb-3",children:[(0,t.jsx)(s.CardDescription,{children:"Memberships"}),(0,t.jsx)(s.CardTitle,{className:"text-3xl",children:H.memberships?.length||0})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)(T.Shield,{className:"w-4 h-4 text-muted-foreground"})})]}),(0,t.jsxs)(s.Card,{"data-testid":"card-stat-credits",children:[(0,t.jsxs)(s.CardHeader,{className:"pb-3",children:[(0,t.jsx)(s.CardDescription,{children:"Referral Credits"}),(0,t.jsxs)(s.CardTitle,{className:"text-3xl",children:["$",H.credits||0]})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)(w.Gift,{className:"w-4 h-4 text-muted-foreground"})})]})]}),(0,t.jsxs)(o.Tabs,{defaultValue:"appointments",className:"w-full",children:[(0,t.jsxs)(o.TabsList,{className:"grid w-full grid-cols-4","data-testid":"tabs-sections",children:[(0,t.jsx)(o.TabsTrigger,{value:"appointments","data-testid":"tab-appointments",children:"Appointments"}),(0,t.jsx)(o.TabsTrigger,{value:"invoices","data-testid":"tab-invoices",children:"Invoices"}),(0,t.jsx)(o.TabsTrigger,{value:"memberships","data-testid":"tab-memberships",children:"Memberships"}),(0,t.jsx)(o.TabsTrigger,{value:"referrals","data-testid":"tab-referrals",children:"Referrals"})]}),(0,t.jsx)(o.TabsContent,{value:"appointments",className:"space-y-4",children:(0,t.jsxs)(s.Card,{"data-testid":"card-appointments-list",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:"Your Appointments"}),(0,t.jsx)(s.CardDescription,{children:"View and manage your scheduled services"})]}),(0,t.jsx)(s.CardContent,{children:H.appointments?.length>0?(0,t.jsx)("div",{className:"space-y-4",children:H.appointments.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg","data-testid":`appointment-${a}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.serviceName||"Service"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.start?new Date(e.start).toLocaleDateString():"Date TBD"})]}),(0,t.jsx)(l.Badge,{"data-testid":`badge-appointment-status-${a}`,children:e.status||"Scheduled"})]},a))}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8","data-testid":"text-no-appointments",children:"No appointments scheduled"})})]})}),(0,t.jsx)(o.TabsContent,{value:"invoices",className:"space-y-4",children:(0,t.jsxs)(s.Card,{"data-testid":"card-invoices-list",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:"Your Invoices"}),(0,t.jsx)(s.CardDescription,{children:"View your service history and payments"})]}),(0,t.jsx)(s.CardContent,{children:H.invoices?.length>0?(0,t.jsx)("div",{className:"space-y-4",children:H.invoices.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg","data-testid":`invoice-${a}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:["Invoice #",e.number||a+1]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.date?new Date(e.date).toLocaleDateString():"Date unknown"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-medium",children:["$",e.total||"0.00"]}),(0,t.jsx)(l.Badge,{variant:e.paid?"default":"secondary","data-testid":`badge-invoice-status-${a}`,children:e.paid?"Paid":"Pending"})]})]},a))}):(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8","data-testid":"text-no-invoices",children:"No invoices available"})})]})}),(0,t.jsx)(o.TabsContent,{value:"memberships",className:"space-y-4",children:(0,t.jsxs)(s.Card,{"data-testid":"card-memberships-list",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:"Your Memberships"}),(0,t.jsx)(s.CardDescription,{children:"Active membership plans and benefits"})]}),(0,t.jsx)(s.CardContent,{children:H.memberships?.length>0?(0,t.jsx)("div",{className:"space-y-4",children:H.memberships.map((e,a)=>(0,t.jsxs)("div",{className:"p-4 border rounded-lg","data-testid":`membership-${a}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("p",{className:"font-medium",children:e.name||"VIP Membership"}),(0,t.jsx)(l.Badge,{"data-testid":`badge-membership-status-${a}`,children:e.status||"Active"})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Expires: ",e.expiresAt?new Date(e.expiresAt).toLocaleDateString():"N/A"]})]},a))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4","data-testid":"text-no-memberships",children:"No active memberships"}),(0,t.jsx)(r.Button,{variant:"outline","data-testid":"button-learn-membership",children:"Learn About VIP Membership"})]})})]})}),(0,t.jsx)(o.TabsContent,{value:"referrals",className:"space-y-4",children:(0,t.jsxs)(s.Card,{"data-testid":"card-referrals-list",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:"Your Referrals"}),(0,t.jsxs)(s.CardDescription,{children:["Track your referrals and earn $",H.credits||0," in credits"]})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-accent/10 rounded-lg text-center",children:[(0,t.jsx)(w.Gift,{className:"w-12 h-12 text-primary mx-auto mb-2"}),(0,t.jsx)("p",{className:"font-medium mb-1",children:"Refer friends and earn rewards!"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Get $25 off your next service for every referral"}),(0,t.jsx)(r.Button,{onClick:()=>_(!0),"data-testid":"button-submit-referral",children:"Submit a Referral"})]}),H.referrals?.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"font-medium text-sm",children:"Your Referrals"}),H.referrals.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`referral-${a}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.status})]}),(0,t.jsx)(l.Badge,{variant:"secondary","data-testid":`badge-referral-status-${a}`,children:e.credited?"Credited":"Pending"})]},a))]})]})})]})})]})]}):(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"py-12 text-center",children:(0,t.jsx)("p",{className:"text-muted-foreground","data-testid":"text-no-data",children:"Unable to load account data"})})})})]}),(0,t.jsx)(m,{open:K,onOpenChange:_,children:(0,t.jsxs)(h,{"data-testid":"dialog-referral-submission",children:[(0,t.jsxs)(x,{children:[(0,t.jsx)(g,{"data-testid":"text-referral-modal-title",children:"Submit a Referral"}),(0,t.jsx)(v,{"data-testid":"text-referral-modal-description",children:"Refer a friend and earn $25 off your next service!"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"referral-name","data-testid":"label-referral-name",children:"Friend's Name *"}),(0,t.jsx)(i.Input,{id:"referral-name",placeholder:"John Doe",value:G,onChange:e=>z(e.target.value),"data-testid":"input-referral-name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"referral-phone","data-testid":"label-referral-phone",children:"Friend's Phone *"}),(0,t.jsx)(i.Input,{id:"referral-phone",type:"tel",placeholder:"(512) 555-0123",value:U,onChange:e=>W(e.target.value),"data-testid":"input-referral-phone"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"referral-email","data-testid":"label-referral-email",children:"Friend's Email (Optional)"}),(0,t.jsx)(i.Input,{id:"referral-email",type:"email",placeholder:"friend@example.com",value:Y,onChange:e=>q(e.target.value),"data-testid":"input-referral-email"})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>_(!1),disabled:J,className:"flex-1","data-testid":"button-cancel-referral",children:"Cancel"}),(0,t.jsx)(r.Button,{onClick:er,disabled:J||!G.trim()||!U.trim(),className:"flex-1","data-testid":"button-submit-referral-form",children:J?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Referral"})]})]})]})})]})}e.s(["default",()=>S],306697)}]);