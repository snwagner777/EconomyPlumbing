(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,114272,e=>{"use strict";var t=e.i(540143),r=e.i(88587),s=e.i(936553),a=class extends r.Removable{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||i(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){this.#r=(0,s.createRetryer)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#s({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let t="pending"===this.state.status,r=!this.#r.canStart();try{if(!t){this.#s({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#s({type:"pending",context:t,variables:e,isPaused:r})}let s=await this.#r.start();return await this.#t.config.onSuccess?.(s,e,this.state.context,this),await this.options.onSuccess?.(s,e,this.state.context),await this.#t.config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,e,this.state.context),this.#s({type:"success",data:s}),s}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#s({type:"error",error:t})}}finally{this.#t.runNext(this)}}#s(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),t.notifyManager.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function i(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}e.s(["Mutation",()=>a,"getDefaultState",()=>i])},793479,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(975157);let a=r.forwardRef(({className:e,type:r,...a},i)=>(0,t.jsx)("input",{type:r,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...a}));a.displayName="Input",e.s(["Input",()=>a])},908406,e=>{"use strict";var t=e.i(271645);let r=0,s=new Map,a=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=[],n={toasts:[]};function l(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?a(r):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),i.forEach(e=>{e(n)})}function o({...e}){let t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function d(){let[e,r]=t.useState(n);return t.useEffect(()=>(i.push(r),()=>{let e=i.indexOf(r);e>-1&&i.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>d])},110204,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(248425),a=r.forwardRef((e,r)=>(0,t.jsx)(s.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var i=e.i(225913),n=e.i(975157);let l=(0,i.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(a,{ref:s,className:(0,n.cn)(l(),e),...r}));o.displayName=a.displayName,e.s(["Label",()=>o],110204)},954616,e=>{"use strict";var t=e.i(271645),r=e.i(114272),s=e.i(540143),a=e.i(915823),i=e.i(619273),n=class extends a.Subscribable{#a;#i=void 0;#n;#l;constructor(e,t){super(),this.#a=e,this.setOptions(t),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#a.defaultMutationOptions(e),(0,i.shallowEqualObjects)(this.options,t)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.hashKey)(t.mutationKey)!==(0,i.hashKey)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#o(),this.#d(e)}getCurrentResult(){return this.#i}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#o(),this.#d()}mutate(e,t){return this.#l=t,this.#n?.removeObserver(this),this.#n=this.#a.getMutationCache().build(this.#a,this.options),this.#n.addObserver(this),this.#n.execute(e)}#o(){let e=this.#n?.state??(0,r.getDefaultState)();this.#i={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#d(e){s.notifyManager.batch(()=>{if(this.#l&&this.hasListeners()){let t=this.#i.variables,r=this.#i.context;e?.type==="success"?(this.#l.onSuccess?.(e.data,t,r),this.#l.onSettled?.(e.data,null,t,r)):e?.type==="error"&&(this.#l.onError?.(e.error,t,r),this.#l.onSettled?.(void 0,e.error,t,r))}this.listeners.forEach(e=>{e(this.#i)})})}},l=e.i(912598),o=e.i(811076);function d(e,r){let a=(0,l.useQueryClient)(r),[i]=t.useState(()=>new n(a,e));t.useEffect(()=>{i.setOptions(e)},[i,e]);let d=t.useSyncExternalStore(t.useCallback(e=>i.subscribe(s.notifyManager.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),c=t.useCallback((e,t)=>{i.mutate(e,t).catch(o.noop)},[i]);if(d.error&&(0,o.shouldThrowError)(i.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:c,mutateAsync:d.mutate}}e.s(["useMutation",()=>d],954616)},487486,e=>{"use strict";var t=e.i(843476),r=e.i(225913),s=e.i(975157);let a=(0,r.cva)("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,...i}){return(0,t.jsx)("div",{className:(0,s.cn)(a({variant:r}),e),...i})}e.s(["Badge",()=>i])},953588,e=>{e.v("/_next/static/media/Economy_Plumbing_Services_logo_1759801055079.a0eebb3d.webp")},664659,e=>{"use strict";let t=(0,e.i(475254).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],664659)},343432,e=>{"use strict";let t=(0,e.i(475254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],343432)},37727,e=>{"use strict";let t=(0,e.i(475254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},292270,e=>{"use strict";let t=(0,e.i(475254).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",()=>t],292270)},573690,829682,e=>{"use strict";e.i(843476);var t=e.i(271645);e.i(142023),e.i(266027);let r={display:"(830) 460-3565",tel:"tel:+18304603565"},s=(0,t.createContext)({display:"(512) 368-9159",tel:"tel:+15123689159"});function a(){return(0,t.useContext)(s)}function i(){return r}e.s(["useMarbleFallsPhone",()=>i,"usePhoneConfig",()=>a],829682),e.s([],573690)},870273,e=>{"use strict";let t=(0,e.i(475254).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);e.s(["Star",()=>t],870273)},929592,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(225913),a=e.i(975157);let i=(0,s.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=r.forwardRef(({className:e,variant:r,...s},n)=>(0,t.jsx)("div",{ref:n,role:"alert",className:(0,a.cn)(i({variant:r}),e),...s}));n.displayName="Alert",r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("h5",{ref:s,className:(0,a.cn)("mb-1 font-medium leading-none tracking-tight",e),...r})).displayName="AlertTitle";let l=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("text-sm [&_p]:leading-relaxed",e),...r}));l.displayName="AlertDescription",e.s(["Alert",()=>n,"AlertDescription",()=>l])},730699,e=>{"use strict";let t=(0,e.i(475254).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["Gift",()=>t],730699)},664030,e=>{"use strict";let t=(0,e.i(475254).default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);e.s(["Trophy",()=>t],664030)},375679,e=>{"use strict";e.s(["trackEvent",0,(e,t,r,s)=>{window.gtag&&window.gtag("event",e,{event_category:t,event_label:r,value:s})}])},761911,e=>{"use strict";let t=(0,e.i(475254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],761911)},595468,e=>{"use strict";let t=(0,e.i(475254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],595468)},63209,e=>{"use strict";let t=(0,e.i(475254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},212426,e=>{"use strict";let t=(0,e.i(475254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],212426)},25652,e=>{"use strict";let t=(0,e.i(475254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},122178,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(266027),a=e.i(380759),i=e.i(402971),n=e.i(13642),l=e.i(515288),o=e.i(519455),d=e.i(487486),c=e.i(730699),u=e.i(664030),m=e.i(25652),h=e.i(761911),x=e.i(212426),p=e.i(870273),f=e.i(475254);let y=(0,f.default)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),g=(0,f.default)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);var b=e.i(375679),j=e.i(954616),v=e.i(912598),N=e.i(653145),w=e.i(994814),C=e.i(50270),k=e.i(793479),S=e.i(110204),M=e.i(903133),F=e.i(929592),R=e.i(63209),T=e.i(595468);let E=(0,f.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),P=(0,f.default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var O=e.i(908406);let A=C.z.object({referrerName:C.z.string().min(2,"Your name must be at least 2 characters"),referrerEmail:C.z.string().email("Please enter a valid email").optional().or(C.z.literal("")),referrerPhone:C.z.string().min(10,"Please enter a valid phone number").optional().or(C.z.literal("")),refereeName:C.z.string().min(2,"Friend's name must be at least 2 characters"),refereeEmail:C.z.string().email("Please enter a valid email").optional().or(C.z.literal("")),refereePhone:C.z.string().min(10,"Please enter a valid phone number").optional().or(C.z.literal(""))}).refine(e=>e.referrerEmail||e.referrerPhone,{message:"Please provide either your email or phone number",path:["referrerEmail"]}).refine(e=>e.refereeEmail||e.refereePhone,{message:"Please provide either your friend's email or phone number",path:["refereeEmail"]});function L(){let[e,s]=(0,r.useState)(null),{toast:a}=(0,O.useToast)(),i=(0,v.useQueryClient)(),n=(0,N.useForm)({resolver:(0,w.zodResolver)(A),defaultValues:{referrerName:"",referrerEmail:"",referrerPhone:"",refereeName:"",refereeEmail:"",refereePhone:""}}),d=(0,j.useMutation)({mutationFn:async e=>{let t=await fetch("/api/referrals/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).message||"Failed to submit referral");return t.json()},onSuccess:e=>{s(e),i.invalidateQueries({queryKey:["/api/referrals/leaderboard"]}),n.reset(),a({title:"Referral Submitted!",description:e.message})},onError:e=>{a({title:"Submission Failed",description:e.message,variant:"destructive"})}});return e?.referralLink?(0,t.jsxs)(l.Card,{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,t.jsx)(T.CheckCircle2,{className:"w-6 h-6"}),(0,t.jsx)(l.CardTitle,{children:"Referral Submitted Successfully!"})]}),(0,t.jsx)(l.CardDescription,{children:"Share this link with your friend to track the referral"})]}),(0,t.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,t.jsx)(S.Label,{className:"text-sm text-muted-foreground mb-2 block",children:"Your Personalized Referral Link"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(k.Input,{readOnly:!0,value:e.referralLink,className:"font-mono text-sm","data-testid":"input-referral-link"}),(0,t.jsx)(o.Button,{variant:"outline",size:"icon",onClick:()=>{e?.referralLink&&(navigator.clipboard.writeText(e.referralLink),a({title:"Link Copied!",description:"Referral link copied to clipboard"}))},"data-testid":"button-copy-link",children:(0,t.jsx)(E,{className:"w-4 h-4"})}),navigator.share&&(0,t.jsx)(o.Button,{variant:"outline",size:"icon",onClick:()=>{e?.referralLink&&navigator.share&&navigator.share({title:"Get $25 off your first plumbing service!",text:`${e.referrerName} referred you to Economy Plumbing. Get $25 off your first service!`,url:e.referralLink})},"data-testid":"button-share-link",children:(0,t.jsx)(P,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)(F.Alert,{children:[(0,t.jsx)(R.AlertCircle,{className:"w-4 h-4"}),(0,t.jsx)(F.AlertDescription,{children:"When your friend clicks this link and provides their contact info, we'll track the referral automatically. You'll earn $25 in service credit once they complete their first job!"})]}),(0,t.jsx)(o.Button,{variant:"outline",className:"w-full",onClick:()=>s(null),"data-testid":"button-submit-another",children:"Submit Another Referral"})]})]}):(0,t.jsxs)(l.Card,{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{children:"Submit a Referral"}),(0,t.jsx)(l.CardDescription,{children:"Refer a friend and we'll give you a personalized tracking link to share with them"})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)(M.Form,{...n,children:(0,t.jsxs)("form",{onSubmit:n.handleSubmit(e=>d.mutate(e)),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Your Information"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"We'll verify you're a customer and create your tracking link"})]}),(0,t.jsx)(M.FormField,{control:n.control,name:"referrerName",render:({field:e})=>(0,t.jsxs)(M.FormItem,{children:[(0,t.jsx)(M.FormLabel,{children:"Your Name"}),(0,t.jsx)(M.FormControl,{children:(0,t.jsx)(k.Input,{placeholder:"John Smith",...e,"data-testid":"input-referrer-name"})}),(0,t.jsx)(M.FormMessage,{})]})}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)(M.FormField,{control:n.control,name:"referrerEmail",render:({field:e})=>(0,t.jsxs)(M.FormItem,{children:[(0,t.jsx)(M.FormLabel,{children:"Your Email"}),(0,t.jsx)(M.FormControl,{children:(0,t.jsx)(k.Input,{type:"email",placeholder:"you@example.com",...e,"data-testid":"input-referrer-email"})}),(0,t.jsx)(M.FormMessage,{})]})}),(0,t.jsx)(M.FormField,{control:n.control,name:"referrerPhone",render:({field:e})=>(0,t.jsxs)(M.FormItem,{children:[(0,t.jsx)(M.FormLabel,{children:"Your Phone"}),(0,t.jsx)(M.FormControl,{children:(0,t.jsx)(k.Input,{type:"tel",placeholder:"(512) 555-1234",...e,"data-testid":"input-referrer-phone"})}),(0,t.jsx)(M.FormDescription,{className:"text-xs",children:"At least one contact method required"}),(0,t.jsx)(M.FormMessage,{})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-4 pt-6 border-t",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Friend's Information"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Who would you like to refer?"})]}),(0,t.jsx)(M.FormField,{control:n.control,name:"refereeName",render:({field:e})=>(0,t.jsxs)(M.FormItem,{children:[(0,t.jsx)(M.FormLabel,{children:"Friend's Name"}),(0,t.jsx)(M.FormControl,{children:(0,t.jsx)(k.Input,{placeholder:"Jane Doe",...e,"data-testid":"input-referee-name"})}),(0,t.jsx)(M.FormMessage,{})]})}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)(M.FormField,{control:n.control,name:"refereeEmail",render:({field:e})=>(0,t.jsxs)(M.FormItem,{children:[(0,t.jsx)(M.FormLabel,{children:"Friend's Email"}),(0,t.jsx)(M.FormControl,{children:(0,t.jsx)(k.Input,{type:"email",placeholder:"friend@example.com",...e,"data-testid":"input-referee-email"})}),(0,t.jsx)(M.FormMessage,{})]})}),(0,t.jsx)(M.FormField,{control:n.control,name:"refereePhone",render:({field:e})=>(0,t.jsxs)(M.FormItem,{children:[(0,t.jsx)(M.FormLabel,{children:"Friend's Phone"}),(0,t.jsx)(M.FormControl,{children:(0,t.jsx)(k.Input,{type:"tel",placeholder:"(512) 555-5678",...e,"data-testid":"input-referee-phone"})}),(0,t.jsx)(M.FormDescription,{className:"text-xs",children:"At least one contact method required"}),(0,t.jsx)(M.FormMessage,{})]})})]})]}),(0,t.jsx)(o.Button,{type:"submit",className:"w-full",disabled:d.isPending,"data-testid":"button-submit-referral",children:d.isPending?"Submitting...":"Submit Referral & Get Link"})]})})})]})}function D(){let{data:e}=(0,s.useQuery)({queryKey:["/api/referrals/leaderboard"]}),{data:f}=(0,s.useQuery)({queryKey:["/api/customers/leaderboard"]});(0,r.useEffect)(()=>{try{(0,b.trackEvent)("Page View","Referral Leaderboard","Loaded")}catch(e){console.warn("Analytics not loaded yet:",e)}},[]);let j=e=>0===e?(0,t.jsx)(y,{className:"w-6 h-6 text-yellow-500"}):1===e?(0,t.jsx)(g,{className:"w-6 h-6 text-gray-400"}):2===e?(0,t.jsx)(g,{className:"w-6 h-6 text-amber-600"}):(0,t.jsxs)("span",{className:"text-lg font-bold text-muted-foreground",children:["#",e+1]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.SEOHead,{title:"Referral Leaderboard - Win Rewards | Economy Plumbing Austin",description:"Join our referral leaderboard! Refer friends to Economy Plumbing and earn $25 per completed job. See who's leading and climb the ranks for exclusive rewards.",canonical:"/refer-a-friend"}),(0,t.jsx)(i.default,{}),(0,t.jsx)("section",{className:"bg-gradient-to-b from-primary/10 via-primary/5 to-background py-16 px-4",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto text-center",children:[(0,t.jsxs)(d.Badge,{variant:"secondary",className:"mb-4 px-4 py-1.5",children:[(0,t.jsx)(u.Trophy,{className:"w-4 h-4 mr-2"}),"Referral Leaderboard"]}),(0,t.jsx)("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-4",children:"Compete & Earn Rewards"}),(0,t.jsx)("p",{className:"text-xl md:text-2xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"Refer friends, climb the leaderboard, and earn $25 in service credits for every completed referral"}),(0,t.jsx)(o.Button,{asChild:!0,size:"lg",className:"text-lg h-14 px-8","data-testid":"button-get-referral-link",children:(0,t.jsxs)("a",{href:"/customer-portal",children:[(0,t.jsx)(c.Gift,{className:"w-5 h-5 mr-2"}),"Get Your Referral Link"]})}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-3",children:"Access the Customer Portal to get your unique referral link"})]})}),(0,t.jsx)("section",{className:"py-12 px-4",children:(0,t.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,t.jsx)(L,{})})}),(0,t.jsx)("section",{className:"py-12 px-4 bg-muted/30",children:(0,t.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[(0,t.jsx)(l.Card,{className:"text-center",children:(0,t.jsxs)(l.CardContent,{className:"pt-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(h.Users,{className:"w-6 h-6 text-primary"})}),(0,t.jsx)("h3",{className:"font-bold text-lg mb-2",children:"1. Get Your Link"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Visit the Customer Portal to get your unique referral link and tracking code"})]})}),(0,t.jsx)(l.Card,{className:"text-center",children:(0,t.jsxs)(l.CardContent,{className:"pt-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(c.Gift,{className:"w-6 h-6 text-primary"})}),(0,t.jsx)("h3",{className:"font-bold text-lg mb-2",children:"2. Share With Friends"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Send your link via SMS, email, or social media. They get $25 off their first service"})]})}),(0,t.jsx)(l.Card,{className:"text-center",children:(0,t.jsxs)(l.CardContent,{className:"pt-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(m.TrendingUp,{className:"w-6 h-6 text-primary"})}),(0,t.jsx)("h3",{className:"font-bold text-lg mb-2",children:"3. Earn & Climb"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get $25 service credit for each completed referral. Credits valid for 6 months."})]})})]})})}),(0,t.jsx)("section",{className:"py-12 px-4 bg-muted/30",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h2",{className:"text-3xl md:text-4xl font-bold mb-3",children:"Top Referrers"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"See who's leading the pack! Will you be next?"})]}),e&&e.leaderboard.length>0?(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.leaderboard.map((e,r)=>(0,t.jsx)(l.Card,{className:`${0===r?"border-yellow-500/50 bg-gradient-to-br from-yellow-500/10 to-background md:col-span-2 lg:col-span-1":1===r?"border-gray-400/50 bg-gradient-to-br from-gray-400/10 to-background":2===r?"border-amber-600/50 bg-gradient-to-br from-amber-600/10 to-background":""}`,"data-testid":`leaderboard-entry-${r}`,children:(0,t.jsx)(l.CardContent,{className:"py-6",children:(0,t.jsxs)("div",{className:"text-center space-y-3",children:[(0,t.jsx)("div",{className:"w-16 h-16 flex items-center justify-center mx-auto",children:j(r)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-xl mb-1","data-testid":`leaderboard-name-${r}`,children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.referralCount," successful ",1===e.referralCount?"referral":"referrals"]})]}),(0,t.jsxs)("div",{className:"pt-2 border-t",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 text-primary font-bold",children:[(0,t.jsx)(x.DollarSign,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-2xl","data-testid":`leaderboard-earnings-${r}`,children:25*e.referralCount})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"earned"})]})]})})},r))}):(0,t.jsx)(l.Card,{children:(0,t.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(u.Trophy,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Be the First!"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"The leaderboard is waiting for its first champion. Start referring today!"}),(0,t.jsx)(o.Button,{asChild:!0,"data-testid":"button-get-started",children:(0,t.jsxs)("a",{href:"/customer-portal",children:[(0,t.jsx)(c.Gift,{className:"w-4 h-4 mr-2"}),"Get Started"]})})]})})]})}),(0,t.jsx)("section",{className:"py-12 px-4",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h2",{className:"text-3xl md:text-4xl font-bold mb-3",children:"Most Loyal Customers"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"Our amazing customers who trust us most with their plumbing needs!"})]}),f&&f.leaderboard.length>0?(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.leaderboard.map((e,r)=>(0,t.jsx)(l.Card,{className:`${0===r?"border-yellow-500/50 bg-gradient-to-br from-yellow-500/10 to-background md:col-span-2 lg:col-span-1":1===r?"border-gray-400/50 bg-gradient-to-br from-gray-400/10 to-background":2===r?"border-amber-600/50 bg-gradient-to-br from-amber-600/10 to-background":""}`,"data-testid":`customer-leaderboard-entry-${r}`,children:(0,t.jsx)(l.CardContent,{className:"py-6",children:(0,t.jsxs)("div",{className:"text-center space-y-3",children:[(0,t.jsx)("div",{className:"w-16 h-16 flex items-center justify-center mx-auto",children:j(r)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-xl mb-1","data-testid":`customer-name-${r}`,children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.jobCount," service ",1===e.jobCount?"call":"calls"]})]}),(0,t.jsxs)("div",{className:"pt-2 border-t",children:[(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(p.Star,{className:"w-6 h-6 text-yellow-500 fill-yellow-500"})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"VIP Customer"})]})]})})},r))}):(0,t.jsx)(l.Card,{children:(0,t.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(h.Users,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Building Our Community"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Our loyal customers leaderboard is being built. Check back soon!"})]})})]})}),(0,t.jsx)("section",{className:"py-12 px-4 bg-muted/30",children:(0,t.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,t.jsxs)(l.Card,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-background",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Star,{className:"w-6 h-6 text-primary"}),(0,t.jsx)(l.CardTitle,{children:"Unlimited Earnings"})]}),(0,t.jsx)(l.CardDescription,{children:"No caps on how much you can earn"})]}),(0,t.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(x.DollarSign,{className:"w-5 h-5 text-primary mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"$25 per completed referral"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No limit on referrals. Service credit only, no cash value."})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(m.TrendingUp,{className:"w-5 h-5 text-primary mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Credits valid for 6 months"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use your rewards within 180 days of earning them"})]})]})]})]}),(0,t.jsxs)(l.Card,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-background",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Gift,{className:"w-6 h-6 text-primary"}),(0,t.jsx)(l.CardTitle,{children:"Your Friends Benefit Too"})]}),(0,t.jsx)(l.CardDescription,{children:"Everyone wins with our referral program"})]}),(0,t.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(x.DollarSign,{className:"w-5 h-5 text-primary mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"$25 off their first service"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Instant discount on jobs $200 or more"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(p.Star,{className:"w-5 h-5 text-primary mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Same 5-star service"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Licensed, insured plumbers you trust"})]})]})]})]})]})})}),(0,t.jsx)("section",{className:"py-16 px-4 bg-primary/5",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto text-center",children:[(0,t.jsx)("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to Start Earning?"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground mb-8",children:"Get your unique referral link from the Customer Portal and start sharing today"}),(0,t.jsx)(o.Button,{asChild:!0,size:"lg",className:"text-lg h-14 px-8","data-testid":"button-customer-portal-cta",children:(0,t.jsxs)("a",{href:"/customer-portal",children:[(0,t.jsx)(h.Users,{className:"w-5 h-5 mr-2"}),"Access Customer Portal"]})}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-4",children:"New customer? Call us first to set up your account, then access the portal to get your referral link"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-3 max-w-2xl mx-auto",children:"* Credits are valid for 6 months from issue date and have no cash value. Credits apply to service calls only and cannot be redeemed for cash or transferred."})]})}),(0,t.jsx)(n.default,{})]})}e.s(["default",()=>D],122178)}]);