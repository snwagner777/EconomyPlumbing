module.exports=[774357,(e,t,r)=>{"use strict";r.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");var r={},n=e.length;if(n<2)return r;var a=t&&t.decode||d,i=0,s=0,c=0;do{if(-1===(s=e.indexOf("=",i)))break;if(-1===(c=e.indexOf(";",i)))c=n;else if(s>c){i=e.lastIndexOf(";",s-1)+1;continue}var f=u(e,i,s),p=l(e,s,f),h=e.slice(f,p);if(!o.call(r,h)){var y=u(e,s+1,c),g=l(e,c,y);34===e.charCodeAt(y)&&34===e.charCodeAt(g-1)&&(y++,g--);var m=e.slice(y,g);r[h]=function(e,t){try{return t(e)}catch(t){return e}}(m,a)}i=c+1}while(i<n)return r},r.serialize=function(e,t,r){var o=r&&r.encode||encodeURIComponent;if("function"!=typeof o)throw TypeError("option encode is invalid");if(!a.test(e))throw TypeError("argument name is invalid");var u=o(t);if(!i.test(u))throw TypeError("argument val is invalid");var l=e+"="+u;if(!r)return l;if(null!=r.maxAge){var d=Math.floor(r.maxAge);if(!isFinite(d))throw TypeError("option maxAge is invalid");l+="; Max-Age="+d}if(r.domain){if(!s.test(r.domain))throw TypeError("option domain is invalid");l+="; Domain="+r.domain}if(r.path){if(!c.test(r.path))throw TypeError("option path is invalid");l+="; Path="+r.path}if(r.expires){var f,p=r.expires;if(f=p,"[object Date]"!==n.call(f)||isNaN(p.valueOf()))throw TypeError("option expires is invalid");l+="; Expires="+p.toUTCString()}if(r.httpOnly&&(l+="; HttpOnly"),r.secure&&(l+="; Secure"),r.partitioned&&(l+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():r.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var n=Object.prototype.toString,o=Object.prototype.hasOwnProperty,a=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,i=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,c=/^[\u0020-\u003A\u003D-\u007E]*$/;function u(e,t,r){do{var n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<r)return r}function l(e,t,r){for(;t>r;){var n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return r}function d(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}},830240,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={MutableRequestCookiesAdapter:function(){return p},ReadonlyRequestCookiesError:function(){return c},RequestCookiesAdapter:function(){return u},appendMutableCookies:function(){return f},areCookiesMutableInCurrentPhase:function(){return y},createCookiesWithMutableAccessCheck:function(){return h},getModifiedCookieValues:function(){return d},responseCookiesToRequestCookies:function(){return m}};for(var o in n)Object.defineProperty(r,o,{enumerable:!0,get:n[o]});let a=e.r(365716),i=e.r(130759),s=e.r(556704);class c extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new c}}class u{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return c.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let l=Symbol.for("next.mutated.cookies");function d(e){let t=e[l];return t&&Array.isArray(t)&&0!==t.length?t:[]}function f(e,t){let r=d(t);if(0===r.length)return!1;let n=new a.ResponseCookies(e),o=n.getAll();for(let e of r)n.set(e);for(let e of o)n.set(e);return!0}class p{static wrap(e,t){let r=new a.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let n=[],o=new Set,c=()=>{let e=s.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),n=r.getAll().filter(e=>o.has(e.name)),t){let e=[];for(let t of n){let r=new a.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},u=new Proxy(r,{get(e,t,r){switch(t){case l:return n;case"delete":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),u}finally{c()}};case"set":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),u}finally{c()}};default:return i.ReflectAdapter.get(e,t,r)}}});return u}}function h(e){let t=new Proxy(e.mutableCookies,{get(r,n,o){switch(n){case"delete":return function(...n){return g(e,"cookies().delete"),r.delete(...n),t};case"set":return function(...n){return g(e,"cookies().set"),r.set(...n),t};default:return i.ReflectAdapter.get(r,n,o)}}});return t}function y(e){return"action"===e.phase}function g(e,t){if(!y(e))throw new c}function m(e){let t=new a.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},213884,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return c}});let n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(void 0);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(e.r(347540));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}let a={current:null},i="function"==typeof n.cache?n.cache:e=>e,s=console.warn;function c(e){return function(...t){s(e(...t))}}i(e=>{try{s(a.current)}finally{a.current=null}})},307460,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"cookies",{enumerable:!0,get:function(){return p}});let n=e.r(830240),o=e.r(365716),a=e.r(556704),i=e.r(832319),s=e.r(868665),c=e.r(97573),u=e.r(204642),l=e.r(213884),d=e.r(543824),f=e.r(276414);function p(){let e="cookies",t=a.workAsyncStorage.getStore(),r=i.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(t.forceStatic)return y(n.RequestCookiesAdapter.seal(new o.RequestCookies(new Headers({}))));if(t.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(r)switch(r.type){case"cache":let a=Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,p),t.invalidDynamicUsageError??=a,a;case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var l=t,g=r;let i=h.get(g);if(i)return i;let m=(0,u.makeHangingPromise)(g.renderSignal,l.route,"`cookies()`");return h.set(g,m),m;case"prerender-client":let w="`cookies`";throw Object.defineProperty(new f.InvariantError(`${w} must not be used within a Client Component. Next.js should be preventing ${w} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,s.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,s.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,s.delayUntilRuntimeStage)(r,y(r.cookies));case"private-cache":return y(r.cookies);case"request":return(0,s.trackDynamicDataInDynamicRender)(r),y((0,n.areCookiesMutableInCurrentPhase)(r)?r.userspaceMutableCookies:r.cookies)}}(0,i.throwForMissingRequestStore)(e)}e.r(518185);let h=new WeakMap;function y(e){let t=h.get(e);if(t)return t;let r=Promise.resolve(e);return h.set(e,r),r}(0,l.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},536052,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={HeadersAdapter:function(){return s},ReadonlyHeadersError:function(){return i}};for(var o in n)Object.defineProperty(r,o,{enumerable:!0,get:n[o]});let a=e.r(130759);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class s extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return a.ReflectAdapter.get(t,r,n);let o=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===o);if(void 0!==i)return a.ReflectAdapter.get(t,i,n)},set(t,r,n,o){if("symbol"==typeof r)return a.ReflectAdapter.set(t,r,n,o);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return a.ReflectAdapter.set(t,s??r,n,o)},has(t,r){if("symbol"==typeof r)return a.ReflectAdapter.has(t,r);let n=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==o&&a.ReflectAdapter.has(t,o)},deleteProperty(t,r){if("symbol"==typeof r)return a.ReflectAdapter.deleteProperty(t,r);let n=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===o||a.ReflectAdapter.deleteProperty(t,o)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return a.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new s(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},719971,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"headers",{enumerable:!0,get:function(){return f}});let n=e.r(536052),o=e.r(556704),a=e.r(832319),i=e.r(868665),s=e.r(97573),c=e.r(204642),u=e.r(213884),l=e.r(543824),d=e.r(276414);function f(){let e="headers",t=o.workAsyncStorage.getStore(),r=a.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(t.forceStatic)return h(n.HeadersAdapter.seal(new Headers({})));if(r)switch(r.type){case"cache":{let e=Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(e,f),t.invalidDynamicUsageError??=e,e}case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(r)switch(r.type){case"prerender":var u=t,y=r;let o=p.get(y);if(o)return o;let a=(0,c.makeHangingPromise)(y.renderSignal,u.route,"`headers()`");return p.set(y,a),a;case"prerender-client":let g="`headers`";throw Object.defineProperty(new d.InvariantError(`${g} must not be used within a client component. Next.js should be preventing ${g} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,i.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,i.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,i.delayUntilRuntimeStage)(r,h(r.headers));case"private-cache":return h(r.headers);case"request":return(0,i.trackDynamicDataInDynamicRender)(r),h(r.headers)}}(0,a.throwForMissingRequestStore)(e)}e.r(518185);let p=new WeakMap;function h(e){let t=p.get(e);if(t)return t;let r=Promise.resolve(e);return p.set(e,r),r}(0,u.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},721423,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"draftMode",{enumerable:!0,get:function(){return l}});let n=e.r(832319),o=e.r(556704),a=e.r(868665),i=e.r(213884),s=e.r(97573),c=e.r(865252),u=e.r(276414);function l(){let e=o.workAsyncStorage.getStore(),t=n.workUnitAsyncStorage.getStore();switch((!e||!t)&&(0,n.throwForMissingRequestStore)("draftMode"),t.type){case"prerender-runtime":return(0,a.delayUntilRuntimeStage)(t,d(t.draftMode,e));case"request":return d(t.draftMode,e);case"cache":case"private-cache":case"unstable-cache":let r=(0,n.getDraftModeProviderForCacheScope)(e,t);if(r)return d(r,e);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return d(null,e);default:return t}}function d(e,t){let r=p.get(e??f);return r||Promise.resolve(new h(e))}e.r(130759);let f={},p=new WeakMap;class h{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){y("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){y("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function y(e,t){let r=o.workAsyncStorage.getStore(),i=n.workUnitAsyncStorage.getStore();if(r){if((null==i?void 0:i.phase)==="after")throw Object.defineProperty(Error(`Route ${r.route} used "${e}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(r.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${r.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(i)switch(i.type){case"cache":case"private-cache":{let n=Object.defineProperty(Error(`Route ${r.route} used "${e}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(n,t),r.invalidDynamicUsageError??=n,n}case"unstable-cache":throw Object.defineProperty(Error(`Route ${r.route} used "${e}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let t=Object.defineProperty(Error(`Route ${r.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r.route,e,t,i)}case"prerender-client":let n="`draftMode`";throw Object.defineProperty(new u.InvariantError(`${n} must not be used within a Client Component. Next.js should be preventing ${n} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,a.postponeWithTracking)(r.route,e,i.dynamicTracking);case"prerender-legacy":i.revalidate=0;let o=Object.defineProperty(new c.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.dynamicUsageDescription=e,r.dynamicUsageStack=o.stack,o;case"request":(0,a.trackDynamicDataInDynamicRender)(i)}}}(0,i.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},493458,(e,t,r)=>{t.exports.cookies=e.r(307460).cookies,t.exports.headers=e.r(719971).headers,t.exports.draftMode=e.r(721423).draftMode},75601,e=>{"use strict";var t=e.i(774357),r={},n=Array.from({length:64});for(let e=0;e+65<=90;e++){let t=String.fromCharCode(e+65);r[t]=e,n[e]=t}for(let e=0;e+97<=122;e++){let t=String.fromCharCode(e+97),o=e+26;r[t]=o,n[o]=t}for(let e=0;e<10;e++){r[e.toString(10)]=e+52;let t=e.toString(10),o=e+52;r[t]=o,n[o]=t}r["-"]=62,n[62]="-",r._=63,n[63]="_";var o=e=>new TextEncoder().encode(e),a=e=>{let t=e+"=".repeat((4-e.length%4)%4),n=t.length/4*3;t.endsWith("==")?n-=2:t.endsWith("=")&&n--;let o=new ArrayBuffer(n),a=new DataView(o);for(let e=0;e<t.length;e+=4){let n=0,o=0;for(let a=e,i=e+3;a<=i;a++)if("="===t[a])n>>=6;else{if(!(t[a]in r))throw TypeError(`Invalid character ${t[a]} in base64 string.`);n|=r[t[a]]<<(i-a)*6,o+=6}let i=e/4*3;n>>=o%8;let s=Math.floor(o/8);for(let e=0;e<s;e++){let t=(s-e-1)*8;a.setUint8(i+e,(n&255<<t)>>t)}}return new Uint8Array(o)},i=e=>{let t="string"==typeof e?o(e):e,r="";for(let e=0;e<t.length;e+=3){let o=0,a=0;for(let r=e,n=Math.min(e+3,t.length);r<n;r++)o|=t[r]<<(n-r-1)*8,a+=8;let i=Math.ceil(a/6);o<<=6*i-a;for(let e=1;e<=i;e++){let t=(i-e)*6;r+=n[(o&63<<t)>>t]}}return r},s={encryption:{saltBits:256,algorithm:"aes-256-cbc",iterations:1,minPasswordlength:32},integrity:{saltBits:256,algorithm:"sha256",iterations:1,minPasswordlength:32},ttl:0,timestampSkewSec:60,localtimeOffsetMsec:0},c=e=>({...e,encryption:{...e.encryption},integrity:{...e.integrity}}),u={"aes-128-ctr":{keyBits:128,ivBits:128,name:"AES-CTR"},"aes-256-cbc":{keyBits:256,ivBits:128,name:"AES-CBC"},sha256:{keyBits:256,name:"SHA-256"}},l="Fe26.2",d=(e,t)=>{let r;if(t<1)throw Error("Invalid random bits count");return r=new Uint8Array(Math.ceil(t/8)),e.getRandomValues(r),r},f=async(e,t,r,n,a,i)=>{let s=o(t),c=await e.subtle.importKey("raw",s,{name:"PBKDF2"},!1,["deriveBits"]),u=o(r);return await e.subtle.deriveBits({name:"PBKDF2",hash:i,salt:u,iterations:n},c,8*a)},p=async(e,t,r)=>{var n;if(!(null==t?void 0:t.length))throw Error("Empty password");if(null==r||"object"!=typeof r)throw Error("Bad options");if(!(r.algorithm in u))throw Error(`Unknown algorithm: ${r.algorithm}`);let o=u[r.algorithm],a={},i=null!=(n=r.hmac)&&n,s=i?{name:"HMAC",hash:o.name}:{name:o.name},c=i?["sign","verify"]:["encrypt","decrypt"];if("string"==typeof t){if(t.length<r.minPasswordlength)throw Error(`Password string too short (min ${r.minPasswordlength} characters required)`);let{salt:n=""}=r;if(!n){let{saltBits:t=0}=r;if(!t)throw Error("Missing salt and saltBits options");n=[...new Uint8Array(d(e,t))].map(e=>e.toString(16).padStart(2,"0")).join("")}let i=await f(e,t,n,r.iterations,o.keyBits/8,"SHA-1");a.key=await e.subtle.importKey("raw",i,s,!1,c),a.salt=n}else{if(t.length<o.keyBits/8)throw Error("Key buffer (password) too small");a.key=await e.subtle.importKey("raw",t,s,!1,c),a.salt=""}return r.iv?a.iv=r.iv:"ivBits"in o&&(a.iv=d(e,o.ivBits)),a},h=(e,t,r)=>["aes-128-ctr"===e?{name:"AES-CTR",counter:t.iv,length:128}:{name:"AES-CBC",iv:t.iv},t.key,"string"==typeof r?o(r):r],y=async(e,t,r,n)=>{let o=await p(e,t,r);return{encrypted:new Uint8Array(await e.subtle.encrypt(...h(r.algorithm,o,n))),key:o}},g=async(e,t,r,n)=>{let o,a=await p(e,t,r);return o=new Uint8Array(await e.subtle.decrypt(...h(r.algorithm,a,n))),new TextDecoder().decode(o)},m=async(e,t,r,n)=>{let a=await p(e,t,{...r,hmac:!0}),s=o(n);return{digest:i(new Uint8Array(await e.subtle.sign({name:"HMAC"},a.key,s))),salt:a.salt}},w=e=>"string"==typeof e||e instanceof Uint8Array?{encryption:e,integrity:e}:"secret"in e?{id:e.id,encryption:e.secret,integrity:e.secret}:{id:e.id,encryption:e.encryption,integrity:e.integrity},b=async(e,t,r,n)=>{if(!r)throw Error("Empty password");let o=c(n),a=Date.now()+(o.localtimeOffsetMsec||0),s=JSON.stringify(t),{id:u="",encryption:d,integrity:f}=w(r);if(u&&!/^\w+$/.test(u))throw Error("Invalid password id");let{encrypted:p,key:h}=await y(e,d,o.encryption,s),g=i(new Uint8Array(p)),b=i(h.iv),E=o.ttl?a+o.ttl:"",v=`${l}*${u}*${h.salt}*${b}*${g}*${E}`,k=await m(e,f,o.integrity,v);return`${v}*${k.salt}*${k.digest}`},E=async(e,t,r,n)=>{if(!r)throw Error("Empty password");let o=c(n),i=Date.now()+(o.localtimeOffsetMsec||0),s=t.split("*");if(8!==s.length)throw Error("Incorrect number of sealed components");let u=s[0],d=s[1],f=s[2],p=s[3],h=s[4],y=s[5],b=s[6],E=s[7],v=`${u}*${d}*${f}*${p}*${h}*${y}`;if(l!==u)throw Error("Wrong mac prefix");if(y){if(!/^\d+$/.test(y))throw Error("Invalid expiration");if(Number.parseInt(y,10)<=i-1e3*o.timestampSkewSec)throw Error("Expired seal")}let k="";if(d=d||"default","string"==typeof r||r instanceof Uint8Array)k=r;else if(d in r)k=r[d];else throw Error(`Cannot find password: ${d}`);k=w(k);let O=o.integrity;if(O.salt=b,!((e,t)=>{let r=+(e.length!==t.length);r&&(t=e);for(let n=0;n<e.length;n+=1)r|=e.charCodeAt(n)^t.charCodeAt(n);return 0===r})((await m(e,k.integrity,O,v)).digest,E))throw Error("Bad hmac value");let R=a(h),S=o.encryption;S.salt=f,S.iv=a(p);let _=await g(e,k.encryption,S,R);return _?JSON.parse(_):null},v=e.i(666680);let k=v.default.webcrypto?.subtle||{},O=()=>v.default.randomUUID(),R=e=>v.default.webcrypto.getRandomValues(e),S={randomUUID:O,getRandomValues:R,subtle:k};e.s(["default",()=>S,"getRandomValues",()=>R,"randomUUID",()=>O,"subtle",()=>k],262604);var _=e.i(262604),C={ttl:1209600,cookieOptions:{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}};function A(e){return"string"==typeof e?{1:e}:e}function j(e,t){if("headers"in e&&"function"==typeof e.headers.append)return void e.headers.append("set-cookie",t);let r=e.getHeader("set-cookie")??[];Array.isArray(r)||(r=[r.toString()]),e.setHeader("set-cookie",[...r,t])}function P(e){let t={...C,...e,cookieOptions:{...C.cookieOptions,...e.cookieOptions||{}}};if(e.cookieOptions&&"maxAge"in e.cookieOptions)void 0===e.cookieOptions.maxAge&&(t.ttl=0);else{var r;t.cookieOptions.maxAge=0===(r=t.ttl)?0x7fffffff:r-60}return t}var x="iron-session: Bad usage: use getIronSession(req, res, options) or getIronSession(cookieStore, options).";async function D(e,t,r,n){var o;let a,i;if(!t.cookieName)throw Error("iron-session: Bad usage. Missing cookie name.");if(!t.password)throw Error("iron-session: Bad usage. Missing password.");let s=A(t.password);if(Object.values(s).some(e=>e.length<32))throw Error("iron-session: Bad usage. Password must be at least 32 characters long.");let c=P(t),u=(o=c.cookieName,a=e.get(o),"string"==typeof(i=a?.value)?i:""),l=u?await n(u,{password:s,ttl:c.ttl}):{};return Object.defineProperties(l,{updateConfig:{value:function(e){c=P(e)}},save:{value:async function(){let t=await r(l,{password:s,ttl:c.ttl}),n=c.cookieName.length+t.length+JSON.stringify(c.cookieOptions).length;if(n>4096)throw Error(`iron-session: Cookie length is too big (${n} bytes), browsers will refuse it. Try to remove some data.`);e.set(c.cookieName,t,c.cookieOptions)}},destroy:{value:function(){Object.keys(l).forEach(e=>{delete l[e]});let t={...c.cookieOptions,maxAge:0};e.set(c.cookieName,"",t)}}}),l}var $=function(e,r){return n;async function n(n,o,a){var i;if(!n||!o)throw Error(x);if(!a)return D(n,o,e,r);if(!a)throw Error(x);if(!a.cookieName)throw Error("iron-session: Bad usage. Missing cookie name.");if(!a.password)throw Error("iron-session: Bad usage. Missing password.");let s=A(a.password);if(Object.values(s).some(e=>e.length<32))throw Error("iron-session: Bad usage. Password must be at least 32 characters long.");let c=P(a),u=(i=c.cookieName,(0,t.parse)(("headers"in n&&"function"==typeof n.headers.get?n.headers.get("cookie"):n.headers.cookie)??"")[i]??""),l=u?await r(u,{password:s,ttl:c.ttl}):{};return Object.defineProperties(l,{updateConfig:{value:function(e){c=P(e)}},save:{value:async function(){if("headersSent"in o&&o.headersSent)throw Error("iron-session: Cannot set session cookie: session.save() was called after headers were sent. Make sure to call it before any res.send() or res.end()");let r=await e(l,{password:s,ttl:c.ttl}),n=(0,t.serialize)(c.cookieName,r,c.cookieOptions);if(n.length>4096)throw Error(`iron-session: Cookie length is too big (${n.length} bytes), browsers will refuse it. Try to remove some data.`);j(o,n)}},destroy:{value:function(){Object.keys(l).forEach(e=>{delete l[e]}),j(o,(0,t.serialize)(c.cookieName,"",{...c.cookieOptions,maxAge:0}))}}}),l}}(async function(e,{password:t,ttl:r=1209600}){let n=A(t),o=Math.max(...Object.keys(n).map(Number)),a={id:o.toString(),secret:n[o]},i=await b(_,e,a,{...s,ttl:1e3*r});return`${i}~2`},async function(e,{password:t,ttl:r=1209600}){let n=A(t),{sealWithoutVersion:o,tokenVersion:a}=function(e){let[t,r]=e.split("~");return{sealWithoutVersion:t,tokenVersion:null==r?null:parseInt(r,10)}}(e);try{let e=await E(_,o,n,{...s,ttl:1e3*r})??{};if(2===a)return e;return{...e.persistent}}catch(e){if(e instanceof Error&&/^(Expired seal|Bad hmac value|Cannot find password|Incorrect number of sealed components)/.test(e.message))return{};throw e}}),T=e.i(493458);if(!process.env.SESSION_SECRET)throw Error("SESSION_SECRET environment variable is required");let M={password:process.env.SESSION_SECRET,cookieName:"plumbing_session",ttl:604800,cookieOptions:{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:604800,path:"/"}};async function N(){return $(await (0,T.cookies)(),M)}async function B(){let e=await N();return!!e.user&&!!e.user.expires_at&&e.user.expires_at>Math.floor(Date.now()/1e3)}async function I(){return!!(await N()).isAdmin&&await B()}async function U(){(await N()).destroy()}e.s(["destroySession",()=>U,"getSession",()=>N,"isAdmin",()=>I],75601)}];

//# sourceMappingURL=_87a5a5f0._.js.map