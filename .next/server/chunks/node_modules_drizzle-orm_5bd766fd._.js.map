{"version":3,"sources":["turbopack:///[project]/node_modules/src/sql/functions/aggregate.ts","turbopack:///[project]/node_modules/drizzle-orm/sql/functions/vector.js"],"sourcesContent":["import { type AnyColumn, Column } from '~/column.ts';\nimport { is } from '~/entity.ts';\nimport { type SQL, sql, type SQLWrapper } from '../sql.ts';\n\n/**\n * Returns the number of values in `expression`.\n *\n * ## Examples\n *\n * ```ts\n * // Number employees with null values\n * db.select({ value: count() }).from(employees)\n * // Number of employees where `name` is not null\n * db.select({ value: count(employees.name) }).from(employees)\n * ```\n *\n * @see countDistinct to get the number of non-duplicate values in `expression`\n */\nexport function count(expression?: SQLWrapper): SQL<number> {\n\treturn sql`count(${expression || sql.raw('*')})`.mapWith(Number);\n}\n\n/**\n * Returns the number of non-duplicate values in `expression`.\n *\n * ## Examples\n *\n * ```ts\n * // Number of employees where `name` is distinct\n * db.select({ value: countDistinct(employees.name) }).from(employees)\n * ```\n *\n * @see count to get the number of values in `expression`, including duplicates\n */\nexport function countDistinct(expression: SQLWrapper): SQL<number> {\n\treturn sql`count(distinct ${expression})`.mapWith(Number);\n}\n\n/**\n * Returns the average (arithmetic mean) of all non-null values in `expression`.\n *\n * ## Examples\n *\n * ```ts\n * // Average salary of an employee\n * db.select({ value: avg(employees.salary) }).from(employees)\n * ```\n *\n * @see avgDistinct to get the average of all non-null and non-duplicate values in `expression`\n */\nexport function avg(expression: SQLWrapper): SQL<string | null> {\n\treturn sql`avg(${expression})`.mapWith(String);\n}\n\n/**\n * Returns the average (arithmetic mean) of all non-null and non-duplicate values in `expression`.\n *\n * ## Examples\n *\n * ```ts\n * // Average salary of an employee where `salary` is distinct\n * db.select({ value: avgDistinct(employees.salary) }).from(employees)\n * ```\n *\n * @see avg to get the average of all non-null values in `expression`, including duplicates\n */\nexport function avgDistinct(expression: SQLWrapper): SQL<string | null> {\n\treturn sql`avg(distinct ${expression})`.mapWith(String);\n}\n\n/**\n * Returns the sum of all non-null values in `expression`.\n *\n * ## Examples\n *\n * ```ts\n * // Sum of every employee's salary\n * db.select({ value: sum(employees.salary) }).from(employees)\n * ```\n *\n * @see sumDistinct to get the sum of all non-null and non-duplicate values in `expression`\n */\nexport function sum(expression: SQLWrapper): SQL<string | null> {\n\treturn sql`sum(${expression})`.mapWith(String);\n}\n\n/**\n * Returns the sum of all non-null and non-duplicate values in `expression`.\n *\n * ## Examples\n *\n * ```ts\n * // Sum of every employee's salary where `salary` is distinct (no duplicates)\n * db.select({ value: sumDistinct(employees.salary) }).from(employees)\n * ```\n *\n * @see sum to get the sum of all non-null values in `expression`, including duplicates\n */\nexport function sumDistinct(expression: SQLWrapper): SQL<string | null> {\n\treturn sql`sum(distinct ${expression})`.mapWith(String);\n}\n\n/**\n * Returns the maximum value in `expression`.\n *\n * ## Examples\n *\n * ```ts\n * // The employee with the highest salary\n * db.select({ value: max(employees.salary) }).from(employees)\n * ```\n */\nexport function max<T extends SQLWrapper>(expression: T): SQL<(T extends AnyColumn ? T['_']['data'] : string) | null> {\n\treturn sql`max(${expression})`.mapWith(is(expression, Column) ? expression : String) as any;\n}\n\n/**\n * Returns the minimum value in `expression`.\n *\n * ## Examples\n *\n * ```ts\n * // The employee with the lowest salary\n * db.select({ value: min(employees.salary) }).from(employees)\n * ```\n */\nexport function min<T extends SQLWrapper>(expression: T): SQL<(T extends AnyColumn ? T['_']['data'] : string) | null> {\n\treturn sql`min(${expression})`.mapWith(is(expression, Column) ? expression : String) as any;\n}\n","import { sql } from \"../sql.js\";\nfunction toSql(value) {\n  return JSON.stringify(value);\n}\nfunction l2Distance(column, value) {\n  if (Array.isArray(value)) {\n    return sql`${column} <-> ${toSql(value)}`;\n  }\n  return sql`${column} <-> ${value}`;\n}\nfunction l1Distance(column, value) {\n  if (Array.isArray(value)) {\n    return sql`${column} <+> ${toSql(value)}`;\n  }\n  return sql`${column} <+> ${value}`;\n}\nfunction innerProduct(column, value) {\n  if (Array.isArray(value)) {\n    return sql`${column} <#> ${toSql(value)}`;\n  }\n  return sql`${column} <#> ${value}`;\n}\nfunction cosineDistance(column, value) {\n  if (Array.isArray(value)) {\n    return sql`${column} <=> ${toSql(value)}`;\n  }\n  return sql`${column} <=> ${value}`;\n}\nfunction hammingDistance(column, value) {\n  if (Array.isArray(value)) {\n    return sql`${column} <~> ${toSql(value)}`;\n  }\n  return sql`${column} <~> ${value}`;\n}\nfunction jaccardDistance(column, value) {\n  if (Array.isArray(value)) {\n    return sql`${column} <%> ${toSql(value)}`;\n  }\n  return sql`${column} <%> ${value}`;\n}\nexport {\n  cosineDistance,\n  hammingDistance,\n  innerProduct,\n  jaccardDistance,\n  l1Distance,\n  l2Distance\n};\n//# sourceMappingURL=vector.js.map"],"names":[],"mappings":"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","ignoreList":[1]}