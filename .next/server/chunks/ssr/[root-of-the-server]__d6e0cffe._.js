module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},72667,a=>{"use strict";var b=a.i(7997);a.i(70396);var c=a.i(73727),d=a.i(82241);async function e(){if(!(await (0,d.getSession)()).customerPortalAuth)return null;let[a,b,c]=await Promise.all([fetch(`${process.env.NEXT_PUBLIC_API_URL||""}/api/customer-portal/account`,{cache:"no-store"}),fetch(`${process.env.NEXT_PUBLIC_API_URL||""}/api/customer-portal/jobs`,{cache:"no-store"}),fetch(`${process.env.NEXT_PUBLIC_API_URL||""}/api/customer-portal/memberships`,{cache:"no-store"})]),e=await a.json().catch(()=>null);return{account:e,jobs:await b.json().catch(()=>({jobs:[]})),memberships:await c.json().catch(()=>({memberships:[]}))}}async function f(){(await (0,d.getSession)()).customerPortalAuth||(0,c.redirect)("/customer-portal");let a=await e();a||(0,c.redirect)("/customer-portal");let{account:f,jobs:g,memberships:h}=a,i=f?.customer;return(0,b.jsx)("div",{className:"min-h-screen py-16",children:(0,b.jsx)("div",{className:"container mx-auto px-4",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["Welcome, ",i?.name]}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Customer ID: #",i?.id]})]}),(0,b.jsx)("a",{href:"/api/auth/logout",className:"text-sm text-muted-foreground hover:text-foreground",children:"Logout"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"bg-card p-6 rounded-lg",children:[(0,b.jsx)("h3",{className:"text-sm text-muted-foreground mb-2",children:"Account Balance"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:["$",(i?.balance||0).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"bg-card p-6 rounded-lg",children:[(0,b.jsx)("h3",{className:"text-sm text-muted-foreground mb-2",children:"Total Jobs"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:i?.jobCount||0})]}),(0,b.jsxs)("div",{className:"bg-card p-6 rounded-lg",children:[(0,b.jsx)("h3",{className:"text-sm text-muted-foreground mb-2",children:"Lifetime Value"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:["$",(i?.lifetimeValue||0).toFixed(2)]})]})]}),h.hasActiveMembership&&(0,b.jsx)("div",{className:"bg-primary/10 border border-primary p-6 rounded-lg mb-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg mb-1",children:"VIP Member"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your membership is active"})]}),(0,b.jsx)("span",{className:"bg-primary text-primary-foreground px-4 py-2 rounded-full text-sm font-semibold",children:"Active"})]})}),(0,b.jsxs)("div",{className:"bg-card rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Recent Service History"}),g.jobs&&g.jobs.length>0?(0,b.jsx)("div",{className:"space-y-4",children:g.jobs.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"border-b pb-4 last:border-0",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.description||"Service Call"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.completedDate).toLocaleDateString()})]}),(0,b.jsxs)("span",{className:"text-sm font-semibold",children:["$",(a.totalAmount||0).toFixed(2)]})]}),a.serviceType&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.serviceType})]},a.id))}):(0,b.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No service history yet"})]}),(0,b.jsxs)("div",{className:"mt-8 bg-muted/30 p-6 rounded-lg",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Need Service?"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Contact us for scheduling, questions, or emergency service"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsx)("a",{href:"tel:555-555-5555",className:"bg-primary text-primary-foreground px-6 py-2 rounded-lg hover:opacity-90 transition",children:"Call: (555) 555-5555"}),(0,b.jsx)("a",{href:"/contact",className:"bg-accent text-accent-foreground px-6 py-2 rounded-lg hover:opacity-90 transition",children:"Contact Form"})]})]})]})})})}a.s(["default",()=>f,"metadata",0,{title:"Dashboard | Customer Portal"}])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d6e0cffe._.js.map