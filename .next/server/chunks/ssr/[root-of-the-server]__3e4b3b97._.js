module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},55483,a=>{"use strict";var b=a.i(7997);async function c(a){let b=await fetch(`${process.env.NEXT_PUBLIC_API_URL||""}/api/email-preferences?token=${a}`,{cache:"no-store"});return b.ok?b.json():null}async function d({searchParams:a}){let d=(await a).token;if(!d)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center py-16 px-4",children:(0,b.jsxs)("div",{className:"max-w-md text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Invalid Link"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"This email preference link is invalid or expired. Please use the link from your email."})]})});let e=await c(d);if(!e)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center py-16 px-4",children:(0,b.jsxs)("div",{className:"max-w-md text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Not Found"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"We couldn't find your email preferences. The link may be expired."})]})});let f=e.preferences;return(0,b.jsx)("div",{className:"min-h-screen py-16 px-4",children:(0,b.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,b.jsxs)("div",{className:"bg-card p-8 rounded-lg shadow-lg",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Email Preferences"}),(0,b.jsxs)("p",{className:"text-muted-foreground mb-8",children:["Manage your email subscriptions for ",f.email]}),(0,b.jsxs)("form",{action:"/api/email-preferences",method:"POST",className:"space-y-6",children:[(0,b.jsx)("input",{type:"hidden",name:"token",value:d}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("label",{className:"flex items-start gap-3 p-4 border rounded-lg cursor-pointer hover:bg-accent/50",children:[(0,b.jsx)("input",{type:"checkbox",name:"reviewRequests",defaultChecked:f.reviewRequests,className:"mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:"Review Requests"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Occasional requests to review our service"})]})]}),(0,b.jsxs)("label",{className:"flex items-start gap-3 p-4 border rounded-lg cursor-pointer hover:bg-accent/50",children:[(0,b.jsx)("input",{type:"checkbox",name:"referralNurture",defaultChecked:f.referralNurture,className:"mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:"Referral Program"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Information about our referral rewards program"})]})]}),(0,b.jsxs)("label",{className:"flex items-start gap-3 p-4 border rounded-lg cursor-pointer hover:bg-accent/50",children:[(0,b.jsx)("input",{type:"checkbox",name:"quoteFollowup",defaultChecked:f.quoteFollowup,className:"mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:"Quote Follow-ups"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Follow-up on estimates and quotes"})]})]}),(0,b.jsxs)("label",{className:"flex items-start gap-3 p-4 border rounded-lg cursor-pointer hover:bg-accent/50",children:[(0,b.jsx)("input",{type:"checkbox",name:"marketingEmails",defaultChecked:f.marketingEmails,className:"mt-1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:"Marketing & Promotions"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Special offers, tips, and company updates"})]})]})]}),(0,b.jsx)("div",{className:"pt-6 border-t",children:(0,b.jsx)("button",{type:"submit",className:"w-full bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition",children:"Save Preferences"})})]}),(0,b.jsxs)("div",{className:"mt-6 pt-6 border-t text-center",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Want to unsubscribe from all marketing emails?"}),(0,b.jsx)("a",{href:`/api/email-preferences/unsubscribe?token=${d}`,className:"text-sm text-destructive hover:underline",children:"Unsubscribe from All Marketing Emails"})]}),(0,b.jsx)("div",{className:"mt-6 text-center text-xs text-muted-foreground",children:(0,b.jsx)("p",{children:"You will continue to receive transactional emails related to your service appointments."})})]})})})}a.s(["default",()=>d,"metadata",0,{title:"Email Preferences | Economy Plumbing Services",description:"Manage your email subscription preferences",robots:"noindex"}])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3e4b3b97._.js.map