{"version":3,"sources":["turbopack:///[project]/app/portal/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { \n  Mail, Phone, CheckCircle, Calendar, FileText, Gift, \n  DollarSign, MapPin, User, Shield, LogOut, Loader2 \n} from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface CustomerData {\n  id: number;\n  name: string;\n  email: string;\n  phone: string;\n  address: string;\n  appointments: any[];\n  invoices: any[];\n  memberships: any[];\n  referrals: any[];\n  credits: number;\n}\n\ntype VerificationStep = 'lookup' | 'verify-code' | 'authenticated';\n\nexport default function CustomerPortal() {\n  const { toast } = useToast();\n  \n  // Authentication state\n  const [verificationStep, setVerificationStep] = useState<VerificationStep>('lookup');\n  const [lookupType, setLookupType] = useState<'phone' | 'email'>('email');\n  const [lookupValue, setLookupValue] = useState('');\n  const [verificationCode, setVerificationCode] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [customerId, setCustomerId] = useState<string | null>(null);\n  const [lookupToken, setLookupToken] = useState('');\n  \n  // Customer data\n  const [customerData, setCustomerData] = useState<CustomerData | null>(null);\n  const [isLoadingData, setIsLoadingData] = useState(false);\n  \n  // Referral submission state\n  const [showReferralModal, setShowReferralModal] = useState(false);\n  const [referralName, setReferralName] = useState('');\n  const [referralPhone, setReferralPhone] = useState('');\n  const [referralEmail, setReferralEmail] = useState('');\n  const [isSubmittingReferral, setIsSubmittingReferral] = useState(false);\n  \n  // Check for existing session on mount\n  useEffect(() => {\n    checkExistingSession();\n  }, []);\n  \n  // Load customer data when authenticated\n  useEffect(() => {\n    if (verificationStep === 'authenticated' && customerId) {\n      loadCustomerData();\n    }\n  }, [verificationStep, customerId]);\n  \n  const checkExistingSession = async () => {\n    try {\n      const response = await fetch('/api/portal/session');\n      if (response.ok) {\n        const data = await response.json();\n        if (data.customerId) {\n          setCustomerId(data.customerId.toString());\n          setVerificationStep('authenticated');\n        }\n      }\n    } catch (error) {\n      console.log('[Portal] No active session found');\n    }\n  };\n  \n  const handleLookup = async () => {\n    setIsLoading(true);\n    try {\n      const response = await fetch('/api/portal/auth/lookup', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          lookupType,\n          lookupValue: lookupValue.trim(),\n        }),\n      });\n      \n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.error || 'Lookup failed');\n      }\n      \n      // Store token for verification\n      setLookupToken(data.token);\n      setVerificationStep('verify-code');\n      \n      toast({\n        title: 'Verification Code Sent',\n        description: lookupType === 'email' \n          ? 'Check your email for the verification code.'\n          : 'Check your phone for the verification code.',\n      });\n    } catch (error: any) {\n      toast({\n        title: 'Error',\n        description: error.message || 'Failed to send verification code',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  const handleVerifyCode = async () => {\n    setIsLoading(true);\n    try {\n      const response = await fetch('/api/portal/auth/verify-code', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          contactValue: lookupValue.trim(),\n          code: verificationCode.trim(),\n          token: lookupToken,\n          lookupType,\n        }),\n      });\n      \n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.error || 'Verification failed');\n      }\n      \n      // Handle single or multiple accounts\n      if (data.customers && data.customers.length > 0) {\n        // For now, use first customer (TODO: add account selection UI)\n        setCustomerId(data.customers[0].id.toString());\n        setVerificationStep('authenticated');\n        \n        toast({\n          title: 'Welcome!',\n          description: 'Successfully logged in to your portal.',\n        });\n      } else {\n        throw new Error('No customer account found');\n      }\n    } catch (error: any) {\n      toast({\n        title: 'Verification Failed',\n        description: error.message || 'Invalid verification code',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  const loadCustomerData = async () => {\n    if (!customerId) return;\n    \n    setIsLoadingData(true);\n    try {\n      const response = await fetch(`/api/portal/customer/${customerId}`);\n      \n      if (!response.ok) {\n        throw new Error('Failed to load customer data');\n      }\n      \n      const data = await response.json();\n      setCustomerData(data);\n    } catch (error: any) {\n      toast({\n        title: 'Error',\n        description: 'Failed to load your account data',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsLoadingData(false);\n    }\n  };\n  \n  const handleLogout = async () => {\n    try {\n      await fetch('/api/portal/auth/logout', { method: 'POST' });\n      setCustomerId(null);\n      setCustomerData(null);\n      setVerificationStep('lookup');\n      setLookupValue('');\n      setVerificationCode('');\n      setLookupToken('');\n      \n      toast({\n        title: 'Logged Out',\n        description: 'You have been successfully logged out.',\n      });\n    } catch (error) {\n      console.error('[Portal] Logout error:', error);\n    }\n  };\n  \n  const handleSubmitReferral = async () => {\n    if (!referralName.trim() || !referralPhone.trim()) {\n      toast({\n        title: 'Missing Information',\n        description: 'Please provide at least a name and phone number.',\n        variant: 'destructive',\n      });\n      return;\n    }\n    \n    setIsSubmittingReferral(true);\n    try {\n      const response = await fetch('/api/referrals/submit', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          // Referrer info (logged-in customer)\n          referrerName: customerData?.name || 'Customer',\n          referrerEmail: customerData?.email || '',\n          referrerPhone: customerData?.phone || '',\n          // Referee info (friend being referred)\n          refereeName: referralName.trim(),\n          refereePhone: referralPhone.trim(),\n          refereeEmail: referralEmail.trim() || '',\n        }),\n      });\n      \n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to submit referral');\n      }\n      \n      toast({\n        title: 'Referral Submitted!',\n        description: 'Thank you for referring a friend. We\\'ll contact them soon!',\n      });\n      \n      // Reset form and close modal\n      setReferralName('');\n      setReferralPhone('');\n      setReferralEmail('');\n      setShowReferralModal(false);\n      \n      // Reload customer data to refresh referrals list\n      loadCustomerData();\n    } catch (error: any) {\n      toast({\n        title: 'Submission Failed',\n        description: error.message || 'Failed to submit referral. Please try again.',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsSubmittingReferral(false);\n    }\n  };\n  \n  // Login UI\n  if (verificationStep === 'lookup') {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-accent/5 p-4\">\n          <Card className=\"w-full max-w-md\" data-testid=\"card-portal-login\">\n            <CardHeader className=\"text-center\">\n              <CardTitle className=\"text-2xl\" data-testid=\"text-portal-title\">\n                Customer Portal\n              </CardTitle>\n              <CardDescription data-testid=\"text-portal-subtitle\">\n                Sign in to view your service history and account details\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <Tabs value={lookupType} onValueChange={(v) => setLookupType(v as 'phone' | 'email')}>\n                <TabsList className=\"grid w-full grid-cols-2\" data-testid=\"tabs-login-method\">\n                  <TabsTrigger value=\"email\" data-testid=\"tab-email-login\">\n                    <Mail className=\"w-4 h-4 mr-2\" />\n                    Email\n                  </TabsTrigger>\n                  <TabsTrigger value=\"phone\" data-testid=\"tab-phone-login\">\n                    <Phone className=\"w-4 h-4 mr-2\" />\n                    Phone\n                  </TabsTrigger>\n                </TabsList>\n                \n                <TabsContent value=\"email\" className=\"space-y-4 mt-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"email\" data-testid=\"label-email\">Email Address</Label>\n                    <Input\n                      id=\"email\"\n                      type=\"email\"\n                      placeholder=\"your@email.com\"\n                      value={lookupValue}\n                      onChange={(e) => setLookupValue(e.target.value)}\n                      onKeyDown={(e) => e.key === 'Enter' && handleLookup()}\n                      data-testid=\"input-email\"\n                    />\n                  </div>\n                  <Button\n                    onClick={handleLookup}\n                    disabled={isLoading || !lookupValue.trim()}\n                    className=\"w-full\"\n                    data-testid=\"button-send-email-code\"\n                  >\n                    {isLoading ? (\n                      <>\n                        <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                        Sending...\n                      </>\n                    ) : (\n                      <>\n                        <Mail className=\"w-4 h-4 mr-2\" />\n                        Send Verification Email\n                      </>\n                    )}\n                  </Button>\n                </TabsContent>\n                \n                <TabsContent value=\"phone\" className=\"space-y-4 mt-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"phone\" data-testid=\"label-phone\">Phone Number</Label>\n                    <Input\n                      id=\"phone\"\n                      type=\"tel\"\n                      placeholder=\"(512) 555-0123\"\n                      value={lookupValue}\n                      onChange={(e) => setLookupValue(e.target.value)}\n                      onKeyDown={(e) => e.key === 'Enter' && handleLookup()}\n                      data-testid=\"input-phone\"\n                    />\n                  </div>\n                  <Button\n                    onClick={handleLookup}\n                    disabled={isLoading || !lookupValue.trim()}\n                    className=\"w-full\"\n                    data-testid=\"button-send-phone-code\"\n                  >\n                    {isLoading ? (\n                      <>\n                        <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                        Sending...\n                      </>\n                    ) : (\n                      <>\n                        <Phone className=\"w-4 h-4 mr-2\" />\n                        Send Verification Code\n                      </>\n                    )}\n                  </Button>\n                </TabsContent>\n              </Tabs>\n              \n              <div className=\"text-center text-sm text-muted-foreground\">\n                <p>We'll send you a secure code to verify your identity</p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n    );\n  }\n  \n  // Verification code UI\n  if (verificationStep === 'verify-code') {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-accent/5 p-4\">\n          <Card className=\"w-full max-w-md\" data-testid=\"card-verify-code\">\n            <CardHeader className=\"text-center\">\n              <CardTitle className=\"text-2xl\" data-testid=\"text-verify-title\">\n                Verify Your Code\n              </CardTitle>\n              <CardDescription data-testid=\"text-verify-subtitle\">\n                Enter the code we sent to {lookupValue}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"code\" data-testid=\"label-code\">Verification Code</Label>\n                <Input\n                  id=\"code\"\n                  type=\"text\"\n                  placeholder=\"123456\"\n                  value={verificationCode}\n                  onChange={(e) => setVerificationCode(e.target.value)}\n                  onKeyDown={(e) => e.key === 'Enter' && handleVerifyCode()}\n                  data-testid=\"input-code\"\n                />\n              </div>\n              \n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => {\n                    setVerificationStep('lookup');\n                    setVerificationCode('');\n                  }}\n                  className=\"flex-1\"\n                  data-testid=\"button-back\"\n                >\n                  Back\n                </Button>\n                <Button\n                  onClick={handleVerifyCode}\n                  disabled={isLoading || !verificationCode.trim()}\n                  className=\"flex-1\"\n                  data-testid=\"button-verify\"\n                >\n                  {isLoading ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                      Verifying...\n                    </>\n                  ) : (\n                    <>\n                      <CheckCircle className=\"w-4 h-4 mr-2\" />\n                      Verify\n                    </>\n                  )}\n                </Button>\n              </div>\n              \n              <div className=\"text-center\">\n                <Button\n                  variant=\"ghost\"\n                  onClick={handleLookup}\n                  disabled={isLoading}\n                  data-testid=\"button-resend\"\n                >\n                  Resend Code\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n    );\n  }\n  \n  // Dashboard UI (authenticated)\n  return (\n    <>\n      <div className=\"min-h-screen bg-gradient-to-br from-primary/5 via-background to-accent/5\">\n        {/* Header */}\n        <div className=\"bg-card border-b\">\n          <div className=\"container mx-auto px-4 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h1 className=\"text-2xl font-bold\" data-testid=\"text-welcome\">\n                  Welcome{customerData?.name ? `, ${customerData.name}` : ''}\n                </h1>\n                <p className=\"text-sm text-muted-foreground\" data-testid=\"text-account-id\">\n                  Account #{customerId}\n                </p>\n              </div>\n              <Button variant=\"outline\" onClick={handleLogout} data-testid=\"button-logout\">\n                <LogOut className=\"w-4 h-4 mr-2\" />\n                Logout\n              </Button>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"container mx-auto px-4 py-8\">\n          {isLoadingData ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <Loader2 className=\"w-8 h-8 animate-spin text-primary\" data-testid=\"loader-data\" />\n            </div>\n          ) : customerData ? (\n            <div className=\"grid gap-6\">\n              {/* Stats Cards */}\n              <div className=\"grid sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n                <Card data-testid=\"card-stat-appointments\">\n                  <CardHeader className=\"pb-3\">\n                    <CardDescription>Upcoming Appointments</CardDescription>\n                    <CardTitle className=\"text-3xl\">\n                      {customerData.appointments?.length || 0}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <Calendar className=\"w-4 h-4 text-muted-foreground\" />\n                  </CardContent>\n                </Card>\n                \n                <Card data-testid=\"card-stat-invoices\">\n                  <CardHeader className=\"pb-3\">\n                    <CardDescription>Recent Invoices</CardDescription>\n                    <CardTitle className=\"text-3xl\">\n                      {customerData.invoices?.length || 0}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <FileText className=\"w-4 h-4 text-muted-foreground\" />\n                  </CardContent>\n                </Card>\n                \n                <Card data-testid=\"card-stat-memberships\">\n                  <CardHeader className=\"pb-3\">\n                    <CardDescription>Memberships</CardDescription>\n                    <CardTitle className=\"text-3xl\">\n                      {customerData.memberships?.length || 0}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <Shield className=\"w-4 h-4 text-muted-foreground\" />\n                  </CardContent>\n                </Card>\n                \n                <Card data-testid=\"card-stat-credits\">\n                  <CardHeader className=\"pb-3\">\n                    <CardDescription>Referral Credits</CardDescription>\n                    <CardTitle className=\"text-3xl\">\n                      ${customerData.credits || 0}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <Gift className=\"w-4 h-4 text-muted-foreground\" />\n                  </CardContent>\n                </Card>\n              </div>\n              \n              {/* Tabs for different sections */}\n              <Tabs defaultValue=\"appointments\" className=\"w-full\">\n                <TabsList className=\"grid w-full grid-cols-4\" data-testid=\"tabs-sections\">\n                  <TabsTrigger value=\"appointments\" data-testid=\"tab-appointments\">\n                    Appointments\n                  </TabsTrigger>\n                  <TabsTrigger value=\"invoices\" data-testid=\"tab-invoices\">\n                    Invoices\n                  </TabsTrigger>\n                  <TabsTrigger value=\"memberships\" data-testid=\"tab-memberships\">\n                    Memberships\n                  </TabsTrigger>\n                  <TabsTrigger value=\"referrals\" data-testid=\"tab-referrals\">\n                    Referrals\n                  </TabsTrigger>\n                </TabsList>\n                \n                <TabsContent value=\"appointments\" className=\"space-y-4\">\n                  <Card data-testid=\"card-appointments-list\">\n                    <CardHeader>\n                      <CardTitle>Your Appointments</CardTitle>\n                      <CardDescription>View and manage your scheduled services</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      {customerData.appointments?.length > 0 ? (\n                        <div className=\"space-y-4\">\n                          {customerData.appointments.map((apt: any, idx: number) => (\n                            <div key={idx} className=\"flex items-center justify-between p-4 border rounded-lg\" data-testid={`appointment-${idx}`}>\n                              <div>\n                                <p className=\"font-medium\">{apt.serviceName || 'Service'}</p>\n                                <p className=\"text-sm text-muted-foreground\">\n                                  {apt.start ? new Date(apt.start).toLocaleDateString() : 'Date TBD'}\n                                </p>\n                              </div>\n                              <Badge data-testid={`badge-appointment-status-${idx}`}>\n                                {apt.status || 'Scheduled'}\n                              </Badge>\n                            </div>\n                          ))}\n                        </div>\n                      ) : (\n                        <p className=\"text-muted-foreground text-center py-8\" data-testid=\"text-no-appointments\">\n                          No appointments scheduled\n                        </p>\n                      )}\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n                \n                <TabsContent value=\"invoices\" className=\"space-y-4\">\n                  <Card data-testid=\"card-invoices-list\">\n                    <CardHeader>\n                      <CardTitle>Your Invoices</CardTitle>\n                      <CardDescription>View your service history and payments</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      {customerData.invoices?.length > 0 ? (\n                        <div className=\"space-y-4\">\n                          {customerData.invoices.map((inv: any, idx: number) => (\n                            <div key={idx} className=\"flex items-center justify-between p-4 border rounded-lg\" data-testid={`invoice-${idx}`}>\n                              <div>\n                                <p className=\"font-medium\">Invoice #{inv.number || idx + 1}</p>\n                                <p className=\"text-sm text-muted-foreground\">\n                                  {inv.date ? new Date(inv.date).toLocaleDateString() : 'Date unknown'}\n                                </p>\n                              </div>\n                              <div className=\"text-right\">\n                                <p className=\"font-medium\">${inv.total || '0.00'}</p>\n                                <Badge variant={inv.paid ? 'default' : 'secondary'} data-testid={`badge-invoice-status-${idx}`}>\n                                  {inv.paid ? 'Paid' : 'Pending'}\n                                </Badge>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      ) : (\n                        <p className=\"text-muted-foreground text-center py-8\" data-testid=\"text-no-invoices\">\n                          No invoices available\n                        </p>\n                      )}\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n                \n                <TabsContent value=\"memberships\" className=\"space-y-4\">\n                  <Card data-testid=\"card-memberships-list\">\n                    <CardHeader>\n                      <CardTitle>Your Memberships</CardTitle>\n                      <CardDescription>Active membership plans and benefits</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      {customerData.memberships?.length > 0 ? (\n                        <div className=\"space-y-4\">\n                          {customerData.memberships.map((mem: any, idx: number) => (\n                            <div key={idx} className=\"p-4 border rounded-lg\" data-testid={`membership-${idx}`}>\n                              <div className=\"flex items-center justify-between mb-2\">\n                                <p className=\"font-medium\">{mem.name || 'VIP Membership'}</p>\n                                <Badge data-testid={`badge-membership-status-${idx}`}>\n                                  {mem.status || 'Active'}\n                                </Badge>\n                              </div>\n                              <p className=\"text-sm text-muted-foreground\">\n                                Expires: {mem.expiresAt ? new Date(mem.expiresAt).toLocaleDateString() : 'N/A'}\n                              </p>\n                            </div>\n                          ))}\n                        </div>\n                      ) : (\n                        <div className=\"text-center py-8\">\n                          <p className=\"text-muted-foreground mb-4\" data-testid=\"text-no-memberships\">\n                            No active memberships\n                          </p>\n                          <Button variant=\"outline\" data-testid=\"button-learn-membership\">\n                            Learn About VIP Membership\n                          </Button>\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n                \n                <TabsContent value=\"referrals\" className=\"space-y-4\">\n                  <Card data-testid=\"card-referrals-list\">\n                    <CardHeader>\n                      <CardTitle>Your Referrals</CardTitle>\n                      <CardDescription>\n                        Track your referrals and earn ${customerData.credits || 0} in credits\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-4\">\n                        <div className=\"p-4 bg-accent/10 rounded-lg text-center\">\n                          <Gift className=\"w-12 h-12 text-primary mx-auto mb-2\" />\n                          <p className=\"font-medium mb-1\">Refer friends and earn rewards!</p>\n                          <p className=\"text-sm text-muted-foreground mb-4\">\n                            Get $25 off your next service for every referral\n                          </p>\n                          <Button \n                            onClick={() => setShowReferralModal(true)}\n                            data-testid=\"button-submit-referral\"\n                          >\n                            Submit a Referral\n                          </Button>\n                        </div>\n                        \n                        {customerData.referrals?.length > 0 && (\n                          <div className=\"space-y-2\">\n                            <h3 className=\"font-medium text-sm\">Your Referrals</h3>\n                            {customerData.referrals.map((ref: any, idx: number) => (\n                              <div key={idx} className=\"flex items-center justify-between p-3 border rounded-lg\" data-testid={`referral-${idx}`}>\n                                <div>\n                                  <p className=\"font-medium text-sm\">{ref.name}</p>\n                                  <p className=\"text-xs text-muted-foreground\">{ref.status}</p>\n                                </div>\n                                <Badge variant=\"secondary\" data-testid={`badge-referral-status-${idx}`}>\n                                  {ref.credited ? 'Credited' : 'Pending'}\n                                </Badge>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n              </Tabs>\n            </div>\n          ) : (\n            <Card>\n              <CardContent className=\"py-12 text-center\">\n                <p className=\"text-muted-foreground\" data-testid=\"text-no-data\">\n                  Unable to load account data\n                </p>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n      \n      {/* Referral Submission Modal */}\n      <Dialog open={showReferralModal} onOpenChange={setShowReferralModal}>\n        <DialogContent data-testid=\"dialog-referral-submission\">\n          <DialogHeader>\n            <DialogTitle data-testid=\"text-referral-modal-title\">Submit a Referral</DialogTitle>\n            <DialogDescription data-testid=\"text-referral-modal-description\">\n              Refer a friend and earn $25 off your next service!\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"referral-name\" data-testid=\"label-referral-name\">\n                Friend's Name *\n              </Label>\n              <Input\n                id=\"referral-name\"\n                placeholder=\"John Doe\"\n                value={referralName}\n                onChange={(e) => setReferralName(e.target.value)}\n                data-testid=\"input-referral-name\"\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"referral-phone\" data-testid=\"label-referral-phone\">\n                Friend's Phone *\n              </Label>\n              <Input\n                id=\"referral-phone\"\n                type=\"tel\"\n                placeholder=\"(512) 555-0123\"\n                value={referralPhone}\n                onChange={(e) => setReferralPhone(e.target.value)}\n                data-testid=\"input-referral-phone\"\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"referral-email\" data-testid=\"label-referral-email\">\n                Friend's Email (Optional)\n              </Label>\n              <Input\n                id=\"referral-email\"\n                type=\"email\"\n                placeholder=\"friend@example.com\"\n                value={referralEmail}\n                onChange={(e) => setReferralEmail(e.target.value)}\n                data-testid=\"input-referral-email\"\n              />\n            </div>\n            \n            <div className=\"flex gap-2 pt-4\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setShowReferralModal(false)}\n                disabled={isSubmittingReferral}\n                className=\"flex-1\"\n                data-testid=\"button-cancel-referral\"\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={handleSubmitReferral}\n                disabled={isSubmittingReferral || !referralName.trim() || !referralPhone.trim()}\n                className=\"flex-1\"\n                data-testid=\"button-submit-referral-form\"\n              >\n                {isSubmittingReferral ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    Submitting...\n                  </>\n                ) : (\n                  'Submit Referral'\n                )}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}