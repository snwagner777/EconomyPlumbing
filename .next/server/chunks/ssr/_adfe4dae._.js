module.exports=[870430,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(400187),g=a.i(368114);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],870430)},77994,a=>{"use strict";var b=a.i(572131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},814574,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(897942),e=a.i(633508),f=a.i(368114);let g=d.Root;d.Trigger;let h=d.Portal;d.Close;let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)(d.Overlay,{ref:e,className:(0,f.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c}));i.displayName=d.Overlay.displayName;let j=c.forwardRef(({className:a,children:c,...g},j)=>(0,b.jsxs)(h,{children:[(0,b.jsx)(i,{}),(0,b.jsxs)(d.Content,{ref:j,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...g,children:[c,(0,b.jsxs)(d.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,b.jsx)(e.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));j.displayName=d.Content.displayName;let k=({className:a,...c})=>(0,b.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...c});k.displayName="DialogHeader";let l=({className:a,...c})=>(0,b.jsx)("div",{className:(0,f.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...c});l.displayName="DialogFooter";let m=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)(d.Title,{ref:e,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight",a),...c}));m.displayName=d.Title.displayName;let n=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)(d.Description,{ref:e,className:(0,f.cn)("text-sm text-muted-foreground",a),...c}));n.displayName=d.Description.displayName,a.s(["Dialog",()=>g,"DialogContent",()=>j,"DialogDescription",()=>n,"DialogFooter",()=>l,"DialogHeader",()=>k,"DialogTitle",()=>m])},563658,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(507554),e=a.i(470121),f=a.i(750104),g=a.i(225152),h=a.i(77994),i=a.i(3688),j=a.i(30553),k="Switch",[l,m]=(0,f.createContextScope)(k),[n,o]=l(k),p=c.forwardRef((a,f)=>{let{__scopeSwitch:h,name:i,checked:k,defaultChecked:l,required:m,disabled:o,value:p="on",onCheckedChange:q,form:r,...u}=a,[v,w]=c.useState(null),x=(0,e.useComposedRefs)(f,a=>w(a)),y=c.useRef(!1),z=!v||r||!!v.closest("form"),[A=!1,B]=(0,g.useControllableState)({prop:k,defaultProp:l,onChange:q});return(0,b.jsxs)(n,{scope:h,checked:A,disabled:o,children:[(0,b.jsx)(j.Primitive.button,{type:"button",role:"switch","aria-checked":A,"aria-required":m,"data-state":t(A),"data-disabled":o?"":void 0,disabled:o,value:p,...u,ref:x,onClick:(0,d.composeEventHandlers)(a.onClick,a=>{B(a=>!a),z&&(y.current=a.isPropagationStopped(),y.current||a.stopPropagation())})}),z&&(0,b.jsx)(s,{control:v,bubbles:!y.current,name:i,value:p,checked:A,required:m,disabled:o,form:r,style:{transform:"translateX(-100%)"}})]})});p.displayName=k;var q="SwitchThumb",r=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=o(q,d);return(0,b.jsx)(j.Primitive.span,{"data-state":t(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});r.displayName=q;var s=a=>{let{control:d,checked:e,bubbles:f=!0,...g}=a,j=c.useRef(null),k=(0,h.usePrevious)(e),l=(0,i.useSize)(d);return c.useEffect(()=>{let a=j.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(k!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[k,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:j,style:{...a.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function t(a){return a?"checked":"unchecked"}var u=a.i(368114);let v=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(p,{className:(0,u.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...c,ref:d,children:(0,b.jsx)(r,{className:(0,u.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));v.displayName=p.displayName,a.s(["Switch",()=>v],563658)},781560,a=>{"use strict";let b=(0,a.i(170106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],781560)},824569,a=>{"use strict";let b=(0,a.i(170106).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>b],824569)},915618,a=>{"use strict";let b=(0,a.i(170106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],915618)},808406,a=>{"use strict";let b=(0,a.i(170106).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);a.s(["Sparkles",()=>b],808406)},259498,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(433217),f=a.i(370025),g=a.i(699570),h=a.i(591119),i=a.i(866718),j=a.i(870430),k=a.i(563658),l=a.i(814574),m=a.i(668929),n=a.i(220005),o=a.i(915618),p=a.i(824569),q=a.i(781560),r=a.i(808406),s=a.i(478793);function t(){let a=(0,d.useRouter)(),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),{toast:F}=(0,s.useToast)(),[G,H]=(0,c.useState)({name:"",logoUrl:"",websiteUrl:"",location:"",industry:"",customerSince:new Date().getFullYear(),displayOrder:0,active:!0}),{data:I}=(0,e.useQuery)({queryKey:["/api/admin/check"]});(0,c.useEffect)(()=>{I&&!I.isAdmin&&a.push("/admin/login")},[I,a]);let{data:J,isLoading:K}=(0,e.useQuery)({queryKey:["/api/admin/commercial-customers"]}),L=(0,f.useMutation)({mutationFn:async a=>await (0,m.apiRequest)("POST","/api/admin/commercial-customers",a),onSuccess:()=>{F({title:"Customer Added",description:"Commercial customer has been added successfully."}),m.queryClient.invalidateQueries({queryKey:["/api/admin/commercial-customers"]}),m.queryClient.invalidateQueries({queryKey:["/api/commercial-customers"]}),P()},onError:a=>{F({title:"Creation Failed",description:a.message||"An error occurred",variant:"destructive"})}}),M=(0,f.useMutation)({mutationFn:async({id:a,updates:b})=>await (0,m.apiRequest)("PUT",`/api/admin/commercial-customers/${a}`,b),onSuccess:()=>{F({title:"Customer Updated",description:"Commercial customer has been updated successfully."}),m.queryClient.invalidateQueries({queryKey:["/api/admin/commercial-customers"]}),m.queryClient.invalidateQueries({queryKey:["/api/commercial-customers"]}),P()},onError:a=>{F({title:"Update Failed",description:a.message||"An error occurred",variant:"destructive"})}}),N=(0,f.useMutation)({mutationFn:async a=>await (0,m.apiRequest)("DELETE",`/api/admin/commercial-customers/${a}`),onSuccess:()=>{F({title:"Customer Deleted",description:"Commercial customer has been deleted successfully."}),m.queryClient.invalidateQueries({queryKey:["/api/admin/commercial-customers"]}),m.queryClient.invalidateQueries({queryKey:["/api/commercial-customers"]})},onError:a=>{F({title:"Delete Failed",description:a.message||"An error occurred",variant:"destructive"})}}),O=async()=>{await (0,m.apiRequest)("POST","/api/admin/logout"),a.push("/admin/login")},P=()=>{w(!1),u(null),y(!1),A(null),C(""),H({name:"",logoUrl:"",websiteUrl:"",location:"",industry:"",customerSince:new Date().getFullYear(),displayOrder:0,active:!0})},Q=async()=>{if(!z)return void F({title:"No Logo Selected",description:"Please select a logo file first.",variant:"destructive"});E(!0);try{let a=new FormData;a.append("file",z);let b=await fetch("/api/admin/upload-logo",{method:"POST",body:a});if(!b.ok)throw Error("Failed to upload logo");let{logoUrl:c}=await b.json(),{processedLogoUrl:d}=await (0,m.apiRequest)("POST","/api/admin/process-logo",{logoUrl:c,customerName:G.name||"Logo"});H(a=>({...a,logoUrl:d})),C(d),F({title:"Logo Processed Successfully",description:"Your logo has been optimized and background removed."})}catch(a){F({title:"Processing Failed",description:a.message||"Failed to process logo",variant:"destructive"})}finally{E(!1)}};return K?(0,b.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}):(0,b.jsx)("div",{className:"min-h-screen bg-background p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Commercial Customers"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage customer logos displayed on commercial services page"})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)(g.Button,{onClick:()=>{y(!0),u(null),H({name:"",logoUrl:"",websiteUrl:"",location:"",industry:"",customerSince:new Date().getFullYear(),displayOrder:(J?.customers.length||0)+1,active:!0}),A(null),C(""),w(!0)},"data-testid":"button-add-customer",children:[(0,b.jsx)(o.Plus,{className:"w-4 h-4 mr-2"}),"Add Customer"]}),(0,b.jsxs)(g.Button,{variant:"outline",onClick:O,"data-testid":"button-logout",children:[(0,b.jsx)(n.LogOut,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]}),(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:J?.customers.map(a=>(0,b.jsxs)(h.Card,{"data-testid":`customer-card-${a.id}`,children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.logoUrl&&(0,b.jsx)("img",{src:a.logoUrl,alt:`${a.name} logo`,className:"h-12 w-auto object-contain","data-testid":`logo-preview-${a.id}`}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.CardTitle,{className:"text-lg",children:a.name}),a.location&&(0,b.jsx)(h.CardDescription,{children:a.location})]})]}),(0,b.jsx)(k.Switch,{checked:a.active,onCheckedChange:()=>{M.mutate({id:a.id,updates:{active:!a.active}})},"data-testid":`switch-active-${a.id}`})]})}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsxs)("div",{className:"space-y-2 text-sm mb-4",children:[a.industry&&(0,b.jsxs)("p",{className:"text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-medium",children:"Industry:"})," ",a.industry]}),a.customerSince&&(0,b.jsxs)("p",{className:"text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-medium",children:"Customer Since:"})," ",a.customerSince]}),a.websiteUrl&&(0,b.jsxs)("p",{className:"text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-medium",children:"Website:"})," ",(0,b.jsx)("a",{href:a.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Link"})]}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-medium",children:"Display Order:"})," ",a.displayOrder]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:()=>{y(!1),u(a),H({name:a.name,logoUrl:a.logoUrl,websiteUrl:a.websiteUrl||"",location:a.location||"",industry:a.industry||"",customerSince:a.customerSince||new Date().getFullYear(),displayOrder:a.displayOrder,active:a.active}),C(a.logoUrl),A(null),w(!0)},"data-testid":`button-edit-${a.id}`,children:[(0,b.jsx)(p.Edit,{className:"w-4 h-4 mr-1"}),"Edit"]}),(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:()=>{var b;return b=a.id,void(confirm("Are you sure you want to delete this commercial customer?")&&N.mutate(b))},"data-testid":`button-delete-${a.id}`,children:[(0,b.jsx)(q.Trash2,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})]},a.id))}),(0,b.jsx)(l.Dialog,{open:v,onOpenChange:w,children:(0,b.jsxs)(l.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsx)(l.DialogTitle,{children:x?"Add Commercial Customer":"Edit Commercial Customer"}),(0,b.jsx)(l.DialogDescription,{children:x?"Add a new commercial customer to display on the commercial services page.":"Update the commercial customer information."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Logo *"}),(0,b.jsxs)("div",{className:"flex gap-4 items-start",children:[B&&(0,b.jsx)("div",{className:"border rounded-lg p-4 bg-muted/30",children:(0,b.jsx)("img",{src:B,alt:"Logo preview",className:"h-24 w-auto object-contain","data-testid":"logo-preview"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(i.Input,{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){A(b);let a=new FileReader;a.onloadend=()=>{C(a.result)},a.readAsDataURL(b)}},"data-testid":"input-logo-file"}),(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:Q,disabled:!z||D,"data-testid":"button-process-logo",children:D?(0,b.jsx)(b.Fragment,{children:"Processing..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.Sparkles,{className:"w-4 h-4 mr-2"}),"Process with AI"]})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:'Upload a logo and click "Process with AI" to automatically remove background and optimize'})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"name",children:"Customer Name *"}),(0,b.jsx)(i.Input,{id:"name",value:G.name,onChange:a=>H(b=>({...b,name:a.target.value})),placeholder:"O'Reilly Auto Parts","data-testid":"input-name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"websiteUrl",children:"Website URL"}),(0,b.jsx)(i.Input,{id:"websiteUrl",type:"url",value:G.websiteUrl,onChange:a=>H(b=>({...b,websiteUrl:a.target.value})),placeholder:"https://www.example.com","data-testid":"input-website"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"location",children:"Location"}),(0,b.jsx)(i.Input,{id:"location",value:G.location,onChange:a=>H(b=>({...b,location:a.target.value})),placeholder:"Austin, TX","data-testid":"input-location"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"industry",children:"Industry"}),(0,b.jsx)(i.Input,{id:"industry",value:G.industry,onChange:a=>H(b=>({...b,industry:a.target.value})),placeholder:"Restaurant, Auto Services, etc.","data-testid":"input-industry"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"customerSince",children:"Customer Since (Year)"}),(0,b.jsx)(i.Input,{id:"customerSince",type:"number",value:G.customerSince,onChange:a=>H(b=>({...b,customerSince:parseInt(a.target.value)})),placeholder:"2020","data-testid":"input-customer-since"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"displayOrder",children:"Display Order"}),(0,b.jsx)(i.Input,{id:"displayOrder",type:"number",value:G.displayOrder,onChange:a=>H(b=>({...b,displayOrder:parseInt(a.target.value)})),placeholder:"1","data-testid":"input-display-order"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(k.Switch,{id:"active",checked:G.active,onCheckedChange:a=>H(b=>({...b,active:a})),"data-testid":"switch-active-form"}),(0,b.jsx)(j.Label,{htmlFor:"active",children:"Active (Show on website)"})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:P,"data-testid":"button-cancel",children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:()=>{G.name&&G.logoUrl?x?L.mutate(G):t&&M.mutate({id:t.id,updates:G}):F({title:"Missing Information",description:"Customer name and logo are required.",variant:"destructive"})},disabled:L.isPending||M.isPending,"data-testid":"button-save",children:L.isPending||M.isPending?"Saving...":"Save"})]})]})})]})})}a.s(["default",()=>t])}];

//# sourceMappingURL=_adfe4dae._.js.map