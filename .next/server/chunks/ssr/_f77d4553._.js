module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(60418);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},7827,a=>{"use strict";var b=a.i(72131);a.i(87924);var c=b.createContext(void 0);function d(a){let d=b.useContext(c);return a||d||"ltr"}a.s(["useDirection",()=>d])},24348,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(187),e=a.i(60418);let f=(0,d.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),g=c.forwardRef(({className:a,variant:c,...d},g)=>(0,b.jsx)("div",{ref:g,role:"alert",className:(0,e.cn)(f({variant:c}),a),...d}));g.displayName="Alert",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("h5",{ref:d,className:(0,e.cn)("mb-1 font-medium leading-none tracking-tight",a),...c})).displayName="AlertTitle";let h=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("div",{ref:d,className:(0,e.cn)("text-sm [&_p]:leading-relaxed",a),...c}));h.displayName="AlertDescription",a.s(["Alert",()=>g,"AlertDescription",()=>h])},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},69520,a=>{"use strict";let b=(0,a.i(70106).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},86304,47213,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(60418);let e=(0,c.cva)("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f],86304);let g=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>g],47213)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},81464,a=>{"use strict";let b=(0,a.i(70106).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);a.s(["Filter",()=>b],81464)},53575,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(91119),f=a.i(99570),g=a.i(66718),h=a.i(86304),i=a.i(33140),j=a.i(24348),k=a.i(80701),l=a.i(77430),m=a.i(60246),n=a.i(69520),o=a.i(87532),p=a.i(92258),q=a.i(63519),r=a.i(70106);let s=(0,r.default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var t=a.i(47213),u=a.i(81464),v=a.i(16201);let w=(0,r.default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),x=(0,r.default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),y=(0,r.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);function z(){let{toast:a}=(0,l.useToast)(),[r,z]=(0,c.useState)(""),[A,B]=(0,c.useState)("all"),[C,D]=(0,c.useState)("all"),{data:E,isLoading:F,isError:G}=(0,d.useQuery)({queryKey:["/api/admin/sync-status"]}),{data:H,isLoading:I,isError:J}=(0,d.useQuery)({queryKey:["/api/admin/customers"]}),K=H?.customers?.filter(a=>{let b=""===r||a.name.toLowerCase().includes(r.toLowerCase())||(a.email??"").toLowerCase().includes(r.toLowerCase())||(a.phone??"").includes(r),c="all"===A||a.type===A,d="all"===C||"active"===C&&a.active||"inactive"===C&&!a.active;return b&&c&&d});return(0,b.jsxs)("div",{className:"space-y-6 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight","data-testid":"heading-servicetitan",children:"ServiceTitan Sync"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Monitor XLSX-based customer data imports and sync status"})]}),(0,b.jsxs)(f.Button,{onClick:()=>{a({title:"Feature Coming Soon",description:"Manual sync refresh will be available in the next update"})},variant:"outline","data-testid":"button-refresh-sync",children:[(0,b.jsx)(n.RefreshCw,{className:"h-4 w-4 mr-2"}),"Refresh Sync"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)(e.Card,{className:"p-6","data-testid":"stat-total-customers",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 bg-primary/10 rounded-lg",children:(0,b.jsx)(m.Users,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Customers"}),F?(0,b.jsx)(i.Skeleton,{className:"h-8 w-20 mt-1","data-testid":"skeleton-total-customers"}):G?(0,b.jsx)("div",{className:"text-2xl font-bold text-destructive",children:"—"}):(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-total-customers",children:E?.totalCustomers??0})]})]})}),(0,b.jsx)(e.Card,{className:"p-6","data-testid":"stat-last-sync",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:(0,b.jsx)(t.Calendar,{className:"h-6 w-6 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last Sync"}),F?(0,b.jsx)(i.Skeleton,{className:"h-8 w-32 mt-1","data-testid":"skeleton-last-sync"}):G?(0,b.jsx)("div",{className:"text-2xl font-bold text-destructive",children:"—"}):(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-last-sync",children:E?.lastSyncTime?new Date(E.lastSyncTime).toLocaleDateString():"Never"})]})]})}),(0,b.jsx)(e.Card,{className:"p-6","data-testid":"stat-sync-status",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`p-3 rounded-lg ${E?.isRunning?"bg-green-500/10":"bg-gray-500/10"}`,children:(0,b.jsx)(n.RefreshCw,{className:`h-6 w-6 ${E?.isRunning?"text-green-600 animate-spin":"text-gray-600"}`})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sync Status"}),F?(0,b.jsx)(i.Skeleton,{className:"h-8 w-24 mt-1","data-testid":"skeleton-sync-status"}):G?(0,b.jsx)("div",{className:"text-2xl font-bold text-destructive",children:"—"}):(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-sync-status",children:E?.isRunning?"Running":"Idle"})]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsx)(e.Card,{className:"p-6","data-testid":"stat-residential",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 bg-purple-500/10 rounded-lg",children:(0,b.jsx)(y,{className:"h-6 w-6 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Residential"}),I?(0,b.jsx)(i.Skeleton,{className:"h-8 w-16 mt-1","data-testid":"skeleton-residential"}):J?(0,b.jsx)("div",{className:"text-2xl font-bold text-destructive",children:"—"}):(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-residential-count",children:H?.customers?.filter(a=>"Residential"===a.type)?.length??0})]})]})}),(0,b.jsx)(e.Card,{className:"p-6","data-testid":"stat-commercial",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 bg-orange-500/10 rounded-lg",children:(0,b.jsx)(x,{className:"h-6 w-6 text-orange-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Commercial"}),I?(0,b.jsx)(i.Skeleton,{className:"h-8 w-16 mt-1","data-testid":"skeleton-commercial"}):J?(0,b.jsx)("div",{className:"text-2xl font-bold text-destructive",children:"—"}):(0,b.jsx)("div",{className:"text-2xl font-bold","data-testid":"text-commercial-count",children:H?.customers?.filter(a=>"Commercial"===a.type)?.length??0})]})]})})]}),(0,b.jsx)(e.Card,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(o.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{type:"text",placeholder:"Search by name, email, or phone...",value:r,onChange:a=>z(a.target.value),className:"pl-10","data-testid":"input-search-customers"})]})}),(0,b.jsx)("div",{className:"w-full md:w-48",children:(0,b.jsxs)(k.Select,{value:A,onValueChange:B,children:[(0,b.jsxs)(k.SelectTrigger,{"data-testid":"select-type-filter",children:[(0,b.jsx)(u.Filter,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(k.SelectValue,{placeholder:"Type"})]}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"all","data-testid":"filter-type-all",children:"All Types"}),(0,b.jsx)(k.SelectItem,{value:"Residential","data-testid":"filter-type-residential",children:"Residential"}),(0,b.jsx)(k.SelectItem,{value:"Commercial","data-testid":"filter-type-commercial",children:"Commercial"})]})]})}),(0,b.jsx)("div",{className:"w-full md:w-48",children:(0,b.jsxs)(k.Select,{value:C,onValueChange:D,children:[(0,b.jsxs)(k.SelectTrigger,{"data-testid":"select-active-filter",children:[(0,b.jsx)(u.Filter,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(k.SelectValue,{placeholder:"Status"})]}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"all","data-testid":"filter-status-all",children:"All Status"}),(0,b.jsx)(k.SelectItem,{value:"active","data-testid":"filter-status-active",children:"Active"}),(0,b.jsx)(k.SelectItem,{value:"inactive","data-testid":"filter-status-inactive",children:"Inactive"})]})]})})]})}),(0,b.jsxs)(e.Card,{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4","data-testid":"heading-customers",children:"Customers"}),I?(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3].map(a=>(0,b.jsx)(i.Skeleton,{className:"h-32 w-full","data-testid":`skeleton-customer-${a}`},a))}):J?(0,b.jsx)(j.Alert,{variant:"destructive","data-testid":"alert-error-customers",children:(0,b.jsx)(j.AlertDescription,{children:"Failed to load customers. Please try again."})}):K&&0!==K.length?(0,b.jsx)("div",{className:"space-y-3",children:K.map(a=>(0,b.jsx)("div",{className:"p-4 border rounded-lg hover:border-primary/50 transition","data-testid":`customer-${a.id}`,children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold","data-testid":`customer-name-${a.id}`,children:a.name}),(0,b.jsx)(h.Badge,{variant:"Residential"===a.type?"default":"secondary","data-testid":`customer-type-${a.id}`,children:a.type}),(0,b.jsx)(h.Badge,{variant:a.active?"default":"outline","data-testid":`customer-status-${a.id}`,children:a.active?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.CheckCircle,{className:"h-3 w-3 mr-1"}),"Active"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{className:"h-3 w-3 mr-1"}),"Inactive"]})})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-2 text-sm text-muted-foreground",children:[a.email&&(0,b.jsxs)("div",{className:"flex items-center gap-2","data-testid":`customer-email-${a.id}`,children:[(0,b.jsx)(p.Mail,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.email})]}),a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2","data-testid":`customer-phone-${a.id}`,children:[(0,b.jsx)(q.Phone,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.phone})]}),(a.city||a.state)&&(0,b.jsxs)("div",{className:"flex items-center gap-2","data-testid":`customer-location-${a.id}`,children:[(0,b.jsx)(s,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:[a.city,a.city&&a.state&&", ",a.state]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2","data-testid":`customer-sync-${a.id}`,children:[(0,b.jsx)(t.Calendar,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:["Last sync: ",new Date(a.lastSyncedAt).toLocaleDateString()]})]})]})]})})},a.id))}):(0,b.jsxs)("div",{className:"text-center py-12","data-testid":"empty-customers",children:[(0,b.jsx)(m.Users,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium mb-2",children:r||"all"!==A||"all"!==C?"No customers found":"No customers synced yet"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:r||"all"!==A||"all"!==C?"Try adjusting your search or filters":"Customer data will appear here after the first XLSX import"})]})]})]})}a.s(["ServiceTitanDashboard",()=>z],53575)}];

//# sourceMappingURL=_f77d4553._.js.map