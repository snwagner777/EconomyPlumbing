module.exports=[941675,a=>{"use strict";let b=(0,a.i(170106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],941675)},578138,a=>{"use strict";let b=(0,a.i(170106).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);a.s(["Gift",()=>b],578138)},972641,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(293554),e=a.i(695245),f=a.i(159501),g=a.i(88780),h=a.i(370025),i=a.i(668929),j=a.i(478793),k=a.i(929423),l=a.i(699570),m=a.i(441921),n=a.i(866718),o=a.i(591119),p=a.i(578138),q=a.i(963519),r=a.i(941675),s=a.i(816201);let t=g.z.object({name:g.z.string().min(2,"Name must be at least 2 characters"),phone:g.z.string().regex(/^\d{10}$/,"Phone must be 10 digits (no spaces or dashes)"),email:g.z.string().email("Invalid email").optional().or(g.z.literal(""))});function u(){let[,a]=(0,d.useRoute)("/referral-offer"),[,g]=(0,d.useLocation)(),{toast:u}=(0,j.useToast)(),[v,w]=(0,c.useState)(!1),x=a?.code||new URLSearchParams(window.location.search).get("code")||"",y=x.split("-").map(a=>a.charAt(0)+a.slice(1).toLowerCase()).join(" "),z=(0,e.useForm)({resolver:(0,f.zodResolver)(t),defaultValues:{name:"",phone:"",email:""}}),A=(0,h.useMutation)({mutationFn:async a=>(0,i.apiRequest)("POST","/api/referrals/capture-referee",{referralCode:x,refereeName:a.name,refereePhone:a.phone,refereeEmail:a.email||null}),onSuccess:()=>{w(!0),u({title:"Information Received!",description:"Choose how you'd like to schedule your service below.",duration:3e3})},onError:a=>{u({title:"Error",description:a.message||"Failed to save information. Please try again.",variant:"destructive",duration:5e3})}});return x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.SEOHead,{title:"Special Referral Offer - $25 Off Your Service | Economy Plumbing",description:"You've been referred to Economy Plumbing! Get $25 off your first service. Professional plumbing services in Austin and Marble Falls, TX.",canonical:"/referral-offer"}),(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-background to-accent/5 py-12 px-4",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"text-center space-y-3",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:(0,b.jsx)(p.Gift,{className:"w-8 h-8 text-primary"})}),(0,b.jsx)("h1",{className:"text-4xl font-bold tracking-tight",children:"You've Been Referred!"}),(0,b.jsx)("p",{className:"text-xl text-muted-foreground",children:y?`${y} recommended our service`:"A friend recommended our service"})]}),(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{className:"text-center pb-4",children:[(0,b.jsx)(o.CardTitle,{className:"text-2xl",children:"Special Referral Offer"}),(0,b.jsx)(o.CardDescription,{className:"text-base",children:"You and your friend each get $25 off!"})]}),(0,b.jsx)(o.CardContent,{className:"space-y-4",children:(0,b.jsx)("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(s.CheckCircle,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-semibold",children:"How It Works:"}),(0,b.jsxs)("ol",{className:"text-sm text-muted-foreground space-y-1 list-decimal list-inside",children:[(0,b.jsx)("li",{children:"Provide your contact information below"}),(0,b.jsx)("li",{children:"Schedule your plumbing service"}),(0,b.jsx)("li",{children:"After your service is complete, you both get $25 credit"})]})]})]})})})]}),v?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{className:"text-center",children:[(0,b.jsx)(o.CardTitle,{className:"text-2xl",children:"Ready to Schedule?"}),(0,b.jsx)(o.CardDescription,{children:"Choose how you'd like to book your service"})]}),(0,b.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,b.jsxs)(l.Button,{size:"lg",className:"w-full h-auto py-4",onClick:()=>window.open("https://go.servicetitan.com/","_blank"),"data-testid":"button-schedule-online",children:[(0,b.jsx)(r.Calendar,{className:"w-5 h-5 mr-2"}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("div",{className:"font-semibold",children:"Schedule Online"}),(0,b.jsx)("div",{className:"text-xs opacity-90",children:"Pick your time instantly"})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,b.jsx)("span",{className:"w-full border-t"})}),(0,b.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,b.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),(0,b.jsxs)(l.Button,{size:"lg",variant:"outline",className:"w-full h-auto py-4",onClick:()=>window.location.href="tel:+15126492811","data-testid":"button-call-us",children:[(0,b.jsx)(q.Phone,{className:"w-5 h-5 mr-2"}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsxs)("div",{className:"font-semibold",children:["Call Us: ","(512) 649-2811"]}),(0,b.jsx)("div",{className:"text-xs opacity-90",children:"Speak with our team directly"})]})]})]})]}),(0,b.jsx)("p",{className:"text-center text-sm text-muted-foreground",children:"Your $25 discount will be automatically applied after your service is complete"})]}):(0,b.jsxs)(o.Card,{children:[(0,b.jsxs)(o.CardHeader,{children:[(0,b.jsx)(o.CardTitle,{children:"Get Started - Claim Your Discount"}),(0,b.jsx)(o.CardDescription,{children:"Tell us who you are so we can apply your $25 discount"})]}),(0,b.jsx)(o.CardContent,{children:(0,b.jsx)(m.Form,{...z,children:(0,b.jsxs)("form",{onSubmit:z.handleSubmit(a=>{A.mutate(a)}),className:"space-y-4",children:[(0,b.jsx)(m.FormField,{control:z.control,name:"name",render:({field:a})=>(0,b.jsxs)(m.FormItem,{children:[(0,b.jsx)(m.FormLabel,{children:"Your Name"}),(0,b.jsx)(m.FormControl,{children:(0,b.jsx)(n.Input,{...a,placeholder:"John Doe","data-testid":"input-referee-name"})}),(0,b.jsx)(m.FormMessage,{})]})}),(0,b.jsx)(m.FormField,{control:z.control,name:"phone",render:({field:a})=>(0,b.jsxs)(m.FormItem,{children:[(0,b.jsx)(m.FormLabel,{children:"Your Phone Number"}),(0,b.jsx)(m.FormControl,{children:(0,b.jsx)(n.Input,{...a,type:"tel",placeholder:"5125551234","data-testid":"input-referee-phone"})}),(0,b.jsx)(m.FormMessage,{})]})}),(0,b.jsx)(m.FormField,{control:z.control,name:"email",render:({field:a})=>(0,b.jsxs)(m.FormItem,{children:[(0,b.jsx)(m.FormLabel,{children:"Your Email (Optional)"}),(0,b.jsx)(m.FormControl,{children:(0,b.jsx)(n.Input,{...a,type:"email",placeholder:"you@example.com","data-testid":"input-referee-email"})}),(0,b.jsx)(m.FormMessage,{})]})}),(0,b.jsx)(l.Button,{type:"submit",className:"w-full",disabled:A.isPending,"data-testid":"button-submit-referee-info",children:A.isPending?"Saving...":"Continue to Schedule Service"})]})})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-6 border-t",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-primary",children:"500+"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Referrals"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-primary",children:"4.9/5"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Rating"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-primary",children:"$25"}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Your Discount"})]})]})]})})]}):(g("/"),null)}a.s(["default",()=>u])}];

//# sourceMappingURL=_04d6451a._.js.map