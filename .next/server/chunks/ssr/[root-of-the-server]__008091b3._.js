module.exports=[736313,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.HooksClientContext},818341,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.ServerInsertedHtml},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},909270,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.AppRouterContext},346058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},739118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},588644,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"InvariantError",{enumerable:!0,get:function(){return d}});class d extends Error{constructor(a,b){super(`Invariant: ${a.endsWith(".")?a:a+"."} This is a bug in Next.js.`,b),this.name="InvariantError"}}},554427,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},929423,a=>{"use strict";var b=a.i(187924),c=a.i(433217),d=a.i(50944),e=a.i(572131);function f({title:a,description:f,canonical:g,ogType:h="website",ogImage:i,ogImageAlt:j="Economy Plumbing Services - Professional Plumbers in Austin and Marble Falls, TX",ogImageWidth:k="1200",ogImageHeight:l="630",twitterCard:m="summary_large_image",schema:n,articlePublishedTime:o,articleAuthor:p}){let q,r,s=(0,d.usePathname)()||"/",{data:t}=(0,c.useQuery)({queryKey:["/api/page-metadata",s],queryFn:async()=>{try{let a=await fetch(`/api/page-metadata?path=${encodeURIComponent(s)}`);if(!a.ok)return null;return await a.json()}catch{return null}},staleTime:3e5}),u=t?.title||a,v=t?.description||f,w=g||t?.canonical||(r=(q=("/"===s?s:s.replace(/\/$/,"")).split("?")[0].split("#")[0]).startsWith("/")?q:`/${q}`,`https://www.plumbersthatcare.com${r}`),x="https://www.plumbersthatcare.com",y=i?i.startsWith("http")?i:`${x}${i}`:`${x}/attached_assets/logo.jpg`;return(0,e.useEffect)(()=>{},[u,v,w,h,y,j,k,l,"Economy Plumbing Services",m,o,p]),(0,b.jsx)(b.Fragment,{children:n&&(0,b.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(Array.isArray(n)?n.filter(Boolean):[n])}})})}a.s(["SEOHead",()=>f],929423)},866718,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(368114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},870430,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(400187),g=a.i(368114);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],870430)},370025,a=>{"use strict";var b=a.i(572131),c=a.i(612794),d=a.i(118544),e=a.i(533791),f=a.i(442871),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context;a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c),this.#d.onSettled?.(a.data,null,b,c)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c),this.#d.onSettled?.(void 0,a.error,b,c))}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(937927),i=a.i(916592);function j(a,c){let e=(0,h.useQueryClient)(c),[f]=b.useState(()=>new g(e,a));b.useEffect(()=>{f.setOptions(a)},[f,a]);let j=b.useSyncExternalStore(b.useCallback(a=>f.subscribe(d.notifyManager.batchCalls(a)),[f]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),k=b.useCallback((a,b)=>{f.mutate(a,b).catch(i.noop)},[f]);if(j.error&&(0,i.shouldThrowError)(f.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>j],370025)},124348,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(400187),e=a.i(368114);let f=(0,d.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),g=c.forwardRef(({className:a,variant:c,...d},g)=>(0,b.jsx)("div",{ref:g,role:"alert",className:(0,e.cn)(f({variant:c}),a),...d}));g.displayName="Alert",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("h5",{ref:d,className:(0,e.cn)("mb-1 font-medium leading-none tracking-tight",a),...c})).displayName="AlertTitle";let h=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("div",{ref:d,className:(0,e.cn)("text-sm [&_p]:leading-relaxed",a),...c}));h.displayName="AlertDescription",a.s(["Alert",()=>g,"AlertDescription",()=>h])},596221,a=>{"use strict";let b=(0,a.i(170106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],596221)},578138,a=>{"use strict";let b=(0,a.i(170106).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);a.s(["Gift",()=>b],578138)},421412,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(433217),f=a.i(370025),g=a.i(695245),h=a.i(159501),i=a.i(88780),j=a.i(929423),k=a.i(591119),l=a.i(699570),m=a.i(866718),n=a.i(441921),o=a.i(124348),p=a.i(578138),q=a.i(596221);let r=(0,a.i(170106).default)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);var s=a.i(478793);let t=i.z.object({name:i.z.string().min(2,"Please enter your full name"),email:i.z.string().email("Please enter a valid email").optional().or(i.z.literal("")),phone:i.z.string().min(10,"Please enter a valid phone number").optional().or(i.z.literal(""))}).refine(a=>a.email||a.phone,{message:"Please provide either your email or phone number",path:["email"]});function u(){let a=(0,d.useParams)(),i=a?.referrerCustomerId,u=(0,d.useRouter)(),[v,w]=(0,c.useState)(!1),{toast:x}=(0,s.useToast)();(0,c.useEffect)(()=>{localStorage.getItem(`referral_submitted_${i}`)&&(w(!0),setTimeout(()=>{u.push("/")},3e3))},[i,u]);let{data:y,isLoading:z}=(0,e.useQuery)({queryKey:["/api/referrals/referrer",i],enabled:!!i&&!v}),A=(0,g.useForm)({resolver:(0,h.zodResolver)(t),defaultValues:{name:"",email:"",phone:""}}),B=(0,f.useMutation)({mutationFn:async a=>{let b=await fetch("/api/referrals/capture-landing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referrerCustomerId:parseInt(i),refereeName:a.name,refereeEmail:a.email||null,refereePhone:a.phone||null})});if(!b.ok)throw Error((await b.json()).message||"Failed to submit contact info");return b.json()},onSuccess:()=>{localStorage.setItem(`referral_submitted_${i}`,"true"),w(!0),x({title:"Thank you!",description:"You're all set. Redirecting to our homepage..."}),setTimeout(()=>{u.push("/")},3e3)},onError:a=>{x({title:"Submission Failed",description:a.message,variant:"destructive"})}});return z?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-primary/10 via-primary/5 to-background",children:(0,b.jsx)(k.Card,{className:"w-full max-w-md",children:(0,b.jsx)(k.CardContent,{className:"flex items-center justify-center py-12",children:(0,b.jsx)(q.Loader2,{className:"w-8 h-8 animate-spin text-primary"})})})}):y?v?(0,b.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-primary/10 via-primary/5 to-background p-4",children:[(0,b.jsx)(j.SEOHead,{title:"Welcome! | Economy Plumbing Austin",description:"Thanks for visiting Economy Plumbing through a referral",canonical:"/referred-by"}),(0,b.jsx)(k.Card,{className:"w-full max-w-md",children:(0,b.jsxs)(k.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)(r,{className:"w-16 h-16 text-primary"})}),(0,b.jsx)(k.CardTitle,{className:"text-2xl",children:"You're All Set!"}),(0,b.jsx)(k.CardDescription,{children:"Redirecting you to our homepage..."})]})})]}):(0,b.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-primary/10 via-primary/5 to-background p-4",children:[(0,b.jsx)(j.SEOHead,{title:`${y.name} Referred You | Economy Plumbing Austin`,description:"A friend referred you to Economy Plumbing! Get $25 off your first service.",canonical:"/referred-by"}),(0,b.jsxs)(k.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(k.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)(p.Gift,{className:"w-16 h-16 text-primary"})}),(0,b.jsxs)(k.CardTitle,{className:"text-2xl","data-testid":"text-referrer-name",children:["Your friend ",(0,b.jsx)("span",{className:"text-primary",children:y.name})," referred you!"]}),(0,b.jsxs)(k.CardDescription,{className:"text-base mt-2",children:["To help us track this referral and ensure ",y.name," gets credit, please provide your contact information before browsing our site."]})]}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsxs)(o.Alert,{className:"mb-6",children:[(0,b.jsx)(p.Gift,{className:"w-4 h-4"}),(0,b.jsxs)(o.AlertDescription,{children:[(0,b.jsx)("strong",{children:"You'll get $25 off your first service!"}),(0,b.jsx)("br",{}),"Valid on jobs $200 or more. We'll apply the discount automatically."]})]}),(0,b.jsx)(n.Form,{...A,children:(0,b.jsxs)("form",{onSubmit:A.handleSubmit(a=>B.mutate(a)),className:"space-y-4",children:[(0,b.jsx)(n.FormField,{control:A.control,name:"name",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Your Name"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(m.Input,{placeholder:"John Smith",...a,"data-testid":"input-name"})}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:A.control,name:"email",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Email Address"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(m.Input,{type:"email",placeholder:"you@example.com",...a,"data-testid":"input-email"})}),(0,b.jsx)(n.FormDescription,{className:"text-xs",children:"We'll only use this to track the referral"}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(n.FormField,{control:A.control,name:"phone",render:({field:a})=>(0,b.jsxs)(n.FormItem,{children:[(0,b.jsx)(n.FormLabel,{children:"Phone Number"}),(0,b.jsx)(n.FormControl,{children:(0,b.jsx)(m.Input,{type:"tel",placeholder:"(512) 555-1234",...a,"data-testid":"input-phone"})}),(0,b.jsx)(n.FormDescription,{className:"text-xs",children:"At least one contact method required"}),(0,b.jsx)(n.FormMessage,{})]})}),(0,b.jsx)(l.Button,{type:"submit",className:"w-full",disabled:B.isPending,"data-testid":"button-submit",children:B.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):"Continue to Website"})]})}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground text-center mt-4",children:["By continuing, you allow us to track this referral so ",y.name," can receive their $25 credit."]})]})]})]}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-primary/10 via-primary/5 to-background p-4",children:(0,b.jsxs)(k.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsx)(k.CardTitle,{children:"Invalid Referral Link"}),(0,b.jsx)(k.CardDescription,{children:"This referral link appears to be invalid or expired"})]}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)(l.Button,{onClick:()=>u.push("/"),className:"w-full","data-testid":"button-go-home",children:"Go to Homepage"})})]})})}a.s(["default",()=>u],421412)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__008091b3._.js.map