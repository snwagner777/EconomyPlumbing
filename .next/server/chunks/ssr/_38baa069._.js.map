{"version":3,"sources":["turbopack:///[project]/node_modules/lucide-react/src/icons/loader-circle.ts","turbopack:///[project]/app/ref/[code]/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('LoaderCircle', [\n  ['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }],\n]);\n\nexport default LoaderCircle;\n","'use client';\nimport { useEffect, useState } from \"react\";\nimport { useRoute, useLocation } from \"wouter\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Loader2 } from \"lucide-react\";\n\nexport default function ReferralLanding() {\n  const [, params] = useRoute(\"/ref/:code\");\n  const [, setLocation] = useLocation();\n  const [isTracking, setIsTracking] = useState(true);\n  \n  const trackClickMutation = useMutation({\n    mutationFn: async (code: string) => {\n      return apiRequest(\"POST\", \"/api/referrals/track-click\", { code });\n    },\n  });\n\n  useEffect(() => {\n    const code = params?.code;\n    \n    if (!code) {\n      // No code, redirect to home\n      setLocation(\"/\");\n      return;\n    }\n\n    // Store referral code in cookie (30 days)\n    const expires = new Date();\n    expires.setDate(expires.getDate() + 30);\n    document.cookie = `referralCode=${code}; path=/; expires=${expires.toUTCString()}`;\n    \n    // Track the click\n    trackClickMutation.mutate(code, {\n      onSuccess: () => {\n        console.log('[Referral Link] Click tracked for code:', code);\n      },\n      onError: (error) => {\n        console.error('[Referral Link] Error tracking click:', error);\n      },\n      onSettled: () => {\n        // Redirect to referral offer page after tracking\n        setTimeout(() => {\n          setIsTracking(false);\n          setLocation(`/referral-offer?code=${code}`);\n        }, 500);\n      }\n    });\n  }, [params?.code]);\n\n  if (isTracking) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-background\">\n        <div className=\"text-center space-y-4\">\n          <Loader2 className=\"h-12 w-12 animate-spin mx-auto text-primary\" />\n          <p className=\"text-muted-foreground\">Loading referral...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n}\n"],"names":[],"mappings":"wCAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAe,CAAf,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAAe,OAAA,EAAiB,cAAgB,CAAA,CAAA,AACpD,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA,CAAA,AAAE,EAAG,CAA+B,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAC7D,CAAA,CAAA,yECdD,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEe,SAAS,IACtB,GAAM,EAAG,EAAO,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,cACtB,EAAG,EAAY,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IAC7B,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEvC,EAAqB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CACrC,WAAY,MAAO,GACV,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,OAAQ,6BAA8B,MAAE,CAAK,EAEnE,SAkCA,CAhCA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAO,GAAQ,KAErB,GAAI,CAAC,EAAM,YAET,EAAY,KAKd,IAAM,EAAU,IAAI,KACpB,EAAQ,OAAO,CAAC,EAAQ,OAAO,GAAK,IACpC,SAAS,MAAM,CAAG,CAAC,aAAa,EAAE,EAAK,kBAAkB,EAAE,EAAQ,WAAW,GAAA,CAAI,CAGlF,EAAmB,MAAM,CAAC,EAAM,CAC9B,UAAW,KACT,QAAQ,GAAG,CAAC,0CAA2C,EACzD,EACA,QAAS,AAAC,IACR,QAAQ,KAAK,CAAC,wCAAyC,EACzD,EACA,UAAW,KAET,WAAW,KACT,GAAc,GACd,EAAY,CAAC,qBAAqB,EAAE,EAAA,CAAM,CAC5C,EAAG,IACL,CACF,EACF,EAAG,CAAC,GAAQ,KAAK,EAEb,GAEA,CAAA,EAAA,EAAA,GAAA,CAFY,CAEX,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,gDACnB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,6BAMtC,IACT","ignoreList":[0]}