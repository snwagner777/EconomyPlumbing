module.exports=[586960,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(433217),f=a.i(370025),g=a.i(699570),h=a.i(591119),i=a.i(866718),j=a.i(870430),k=a.i(429246),l=a.i(563658),m=a.i(786304),n=a.i(814574),o=a.i(580701),p=a.i(668929),q=a.i(220005),r=a.i(963519),s=a.i(824569),t=a.i(781560),u=a.i(478793);let v=[{category:"None/Custom",options:[{value:"",label:"None (Custom Channel)"}]},{category:"Default",options:[{value:"default",label:"Default/Organic Traffic"}]},{category:"Paid Advertising",options:[{value:"googlebot",label:"Google Ads (+ Googlebot)"},{value:"bingbot",label:"Bing Ads (+ Bingbot)"},{value:"facebookbot",label:"Facebook/Instagram Ads (+ FB Crawler)"},{value:"youtube",label:"YouTube Ads"},{value:"tiktok",label:"TikTok Ads"},{value:"linkedin",label:"LinkedIn Ads"},{value:"pinterest",label:"Pinterest Ads"},{value:"twitter",label:"Twitter/X Ads"}]},{category:"Local Directories & Review Sites",options:[{value:"yelp",label:"Yelp"},{value:"nextdoor",label:"Nextdoor"},{value:"thumbtack",label:"Thumbtack"},{value:"angi",label:"Angi (Angie's List)"},{value:"homeadvisor",label:"HomeAdvisor"},{value:"porch",label:"Porch"}]},{category:"Search Engine Crawlers (SSR)",options:[{value:"googlebot",label:"ðŸ¤– Googlebot (Google Crawler)"},{value:"bingbot",label:"ðŸ¤– Bingbot (Bing Crawler)"},{value:"yahoo",label:"ðŸ¤– Yahoo Slurp (Yahoo Crawler)"},{value:"duckduckgo",label:"ðŸ¤– DuckDuckBot"},{value:"baidu",label:"ðŸ¤– Baiduspider (China)"},{value:"yandex",label:"ðŸ¤– Yandexbot (Russia)"}]},{category:"Social Media Crawlers (SSR)",options:[{value:"facebookbot",label:"ðŸ¤– Facebook Crawler (Link Previews)"},{value:"twitterbot",label:"ðŸ¤– Twitterbot (Card Previews)"},{value:"linkedinbot",label:"ðŸ¤– LinkedInbot (Link Previews)"},{value:"pinterestbot",label:"ðŸ¤– Pinterestbot"},{value:"whatsapp",label:"ðŸ¤– WhatsApp Preview"},{value:"telegram",label:"ðŸ¤– Telegram Preview"},{value:"slack",label:"ðŸ¤– Slackbot (Link Previews)"},{value:"discord",label:"ðŸ¤– Discordbot (Link Previews)"}]},{category:"SEO & Analytics Crawlers",options:[{value:"seranking",label:"ðŸ¤– SE Ranking Crawler"},{value:"ahrefsbot",label:"ðŸ¤– Ahrefsbot"},{value:"semrushbot",label:"ðŸ¤– SEMrushbot"},{value:"mj12bot",label:"ðŸ¤– MJ12bot (Majestic)"},{value:"dotbot",label:"ðŸ¤– DotBot (Moz)"}]},{category:"Other Sources",options:[{value:"email",label:"Email Marketing"},{value:"sms",label:"SMS Marketing"},{value:"print",label:"Print Advertising"},{value:"radio",label:"Radio Advertising"},{value:"tv",label:"TV Advertising"},{value:"direct",label:"Direct Traffic"},{value:"referral",label:"Referral Traffic"},{value:"custom",label:"Custom Source"}]}];function w(){let a=(0,d.useRouter)(),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),{toast:C}=(0,u.useToast)(),{data:D}=(0,e.useQuery)({queryKey:["/api/admin/check"]});(0,c.useEffect)(()=>{D&&!D.isAdmin&&a.push("/admin/login")},[D,a]);let{data:E,isLoading:F}=(0,e.useQuery)({queryKey:["/api/admin/tracking-numbers"]}),G=(0,f.useMutation)({mutationFn:async({id:a,updates:b})=>await (0,p.apiRequest)("PUT",`/api/admin/tracking-numbers/${a}`,b),onSuccess:()=>{C({title:"Tracking Number Updated",description:"The tracking number has been updated successfully."}),p.queryClient.invalidateQueries({queryKey:["/api/admin/tracking-numbers"]}),p.queryClient.invalidateQueries({queryKey:["/api/tracking-numbers"]}),z(!1),x(null)},onError:a=>{C({title:"Update Failed",description:a.message||"An error occurred",variant:"destructive"})}}),H=(0,f.useMutation)({mutationFn:async a=>await (0,p.apiRequest)("DELETE",`/api/admin/tracking-numbers/${a}`),onSuccess:()=>{C({title:"Tracking Number Deleted",description:"The tracking number has been deleted successfully."}),p.queryClient.invalidateQueries({queryKey:["/api/admin/tracking-numbers"]}),p.queryClient.invalidateQueries({queryKey:["/api/tracking-numbers"]})},onError:a=>{C({title:"Delete Failed",description:a.message||"An error occurred",variant:"destructive"})}}),I=async()=>{await (0,p.apiRequest)("POST","/api/admin/logout"),a.push("/admin/login")};if(!D?.isAdmin)return null;let J=E?.trackingNumbers||[];return(0,b.jsx)("div",{className:"min-h-screen bg-background p-6",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Tracking Numbers Admin"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage marketing channel phone numbers and detection rules"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>a.push("/admin"),children:"Back to Admin"}),(0,b.jsxs)(g.Button,{variant:"outline",onClick:I,children:[(0,b.jsx)(q.LogOut,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]}),(0,b.jsx)("div",{className:"grid gap-4",children:F?(0,b.jsx)(h.Card,{children:(0,b.jsx)(h.CardContent,{className:"py-6",children:(0,b.jsx)("p",{className:"text-center text-muted-foreground",children:"Loading tracking numbers..."})})}):J.map(a=>(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Phone,{className:"w-5 h-5 text-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(h.CardTitle,{className:"text-lg flex items-center gap-2",children:[a.channelName,a.channelKey.startsWith("email-")&&(0,b.jsx)(m.Badge,{variant:"secondary",className:"text-xs",children:"âœ‰ï¸ Email Campaign"}),a.channelKey.startsWith("sms-")&&(0,b.jsx)(m.Badge,{variant:"secondary",className:"text-xs",children:"ðŸ“± SMS Campaign"})]}),(0,b.jsxs)(h.CardDescription,{className:"mt-1",children:["Channel Key: ",a.channelKey]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.isDefault&&(0,b.jsx)(m.Badge,{variant:"default",children:"Default"}),a.isActive?(0,b.jsx)(m.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Active"}):(0,b.jsx)(m.Badge,{variant:"outline",className:"bg-gray-100 text-gray-600",children:"Inactive"})]})]})}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm font-medium text-muted-foreground",children:"Display Number"}),(0,b.jsx)("p",{className:"mt-1 text-lg font-semibold",children:a.displayNumber})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{className:"text-sm font-medium text-muted-foreground",children:"Tel Link"}),(0,b.jsx)("p",{className:"mt-1 font-mono text-sm",children:a.telLink})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)(j.Label,{className:"text-sm font-medium text-muted-foreground",children:"Detection Rules"}),(0,b.jsx)("pre",{className:"mt-1 text-xs bg-muted p-2 rounded-md overflow-x-auto",children:JSON.stringify(JSON.parse(a.detectionRules),null,2)})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t",children:[(0,b.jsxs)(g.Button,{size:"sm",variant:"outline",onClick:()=>{x(a),B(!v.flatMap(a=>a.options.map(a=>a.value)).includes(a.channelKey)),z(!0)},"data-testid":`button-edit-${a.channelKey}`,children:[(0,b.jsx)(s.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,b.jsx)(g.Button,{size:"sm",variant:a.isActive?"outline":"default",onClick:()=>{G.mutate({id:a.id,updates:{isActive:!a.isActive}})},"data-testid":`button-toggle-${a.channelKey}`,children:a.isActive?"Deactivate":"Activate"}),!a.isDefault&&(0,b.jsxs)(g.Button,{size:"sm",variant:"destructive",onClick:()=>{var b;return b=a.id,void(confirm("Are you sure you want to delete this tracking number?")&&H.mutate(b))},"data-testid":`button-delete-${a.channelKey}`,children:[(0,b.jsx)(t.Trash2,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]},a.id))}),(0,b.jsx)(n.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(n.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(n.DialogHeader,{children:[(0,b.jsx)(n.DialogTitle,{children:"Edit Tracking Number"}),(0,b.jsx)(n.DialogDescription,{children:"Update tracking number details and detection rules"})]}),w&&(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(j.Label,{htmlFor:"channelType",children:"Channel Type"}),(0,b.jsxs)(o.Select,{value:A?"":w.channelKey,onValueChange:a=>{""===a?B(!0):(x({...w,channelKey:a}),B(!1))},children:[(0,b.jsx)(o.SelectTrigger,{"data-testid":"select-channelType",children:(0,b.jsx)(o.SelectValue,{placeholder:"Select channel type..."})}),(0,b.jsx)(o.SelectContent,{children:v.map(a=>(0,b.jsx)("optgroup",{label:a.category,children:a.options.map(a=>(0,b.jsx)(o.SelectItem,{value:a.value,children:a.label},a.value))},a.category))})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"ðŸ¤– = Bot/Crawler (will get this number when crawling your site for SEO)"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"channelKey",children:["Channel Key ",A?"(Custom - Enter Manually)":"(Auto-filled)"]}),(0,b.jsx)(i.Input,{id:"channelKey",value:w.channelKey,onChange:a=>x({...w,channelKey:a.target.value}),"data-testid":"input-channelKey",placeholder:"e.g., doorhanger, b2bcard, custom_source",disabled:!A,className:A?"":"bg-muted"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:A?"Enter any custom channel key (e.g., doorhanger, radio_ad, etc.)":"Select 'None (Custom Channel)' from dropdown to edit manually"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(j.Label,{htmlFor:"channelName",children:"Channel Display Name"}),(0,b.jsx)(i.Input,{id:"channelName",value:w.channelName,onChange:a=>x({...w,channelName:a.target.value}),"data-testid":"input-channelName",placeholder:"e.g., Google Ads, Bingbot Crawler"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(j.Label,{htmlFor:"displayNumber",children:"Display Number"}),(0,b.jsx)(i.Input,{id:"displayNumber",value:w.displayNumber,onChange:a=>x({...w,displayNumber:a.target.value}),"data-testid":"input-displayNumber"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(j.Label,{htmlFor:"telLink",children:"Tel Link"}),(0,b.jsx)(i.Input,{id:"telLink",value:w.telLink,onChange:a=>x({...w,telLink:a.target.value}),"data-testid":"input-telLink"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(j.Label,{htmlFor:"detectionRules",children:"Detection Rules (JSON)"}),(0,b.jsx)(k.Textarea,{id:"detectionRules",value:w.detectionRules,onChange:a=>x({...w,detectionRules:a.target.value}),rows:6,className:"font-mono text-sm","data-testid":"input-detectionRules"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Format: ","{",'"urlParams":["gclid"],"utmSources":["google"],"referrerIncludes":["google.com"]',"}"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Switch,{id:"isActive",checked:w.isActive,onCheckedChange:a=>x({...w,isActive:a}),"data-testid":"switch-isActive"}),(0,b.jsx)(j.Label,{htmlFor:"isActive",children:"Active"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Switch,{id:"isDefault",checked:w.isDefault,onCheckedChange:a=>x({...w,isDefault:a}),"data-testid":"switch-isDefault"}),(0,b.jsx)(j.Label,{htmlFor:"isDefault",children:"Default"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(j.Label,{htmlFor:"sortOrder",children:"Sort Order"}),(0,b.jsx)(i.Input,{id:"sortOrder",type:"number",value:w.sortOrder,onChange:a=>x({...w,sortOrder:parseInt(a.target.value)}),"data-testid":"input-sortOrder"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:()=>{w&&G.mutate({id:w.id,updates:{channelKey:w.channelKey,channelName:w.channelName,displayNumber:w.displayNumber,rawNumber:w.rawNumber,telLink:w.telLink,detectionRules:w.detectionRules,isActive:w.isActive,isDefault:w.isDefault,sortOrder:w.sortOrder}})},"data-testid":"button-save",children:"Save Changes"})]})]})]})})]})})}a.s(["default",()=>w])}];

//# sourceMappingURL=app_admin_tracking_page_tsx_560bcb95._.js.map