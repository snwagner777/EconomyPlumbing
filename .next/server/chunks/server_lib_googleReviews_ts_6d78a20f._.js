module.exports=[22300,e=>{"use strict";let r=[{category:"water_heater",keywords:["water heater","tankless","hot water","heater"]},{category:"drain",keywords:["drain","clog","unclog","backup","snake","clear"]},{category:"toilet",keywords:["toilet","commode","bowl","flush"]},{category:"leak",keywords:["leak","leaking","drip","dripping"]},{category:"faucet",keywords:["faucet","tap","sink"]},{category:"pipe",keywords:["pipe","piping","burst"]},{category:"sewer",keywords:["sewer","septic","main line"]},{category:"gas",keywords:["gas line","gas","natural gas"]},{category:"backflow",keywords:["backflow","back flow","cross connection"]},{category:"slab_leak",keywords:["slab leak","under slab","foundation"]},{category:"repiping",keywords:["repipe","repiping","replace pipe","new pipe"]},{category:"garbage_disposal",keywords:["garbage disposal","disposal","disposer"]}];async function t(){let e=process.env.GOOGLE_PLACES_API_KEY,t=process.env.GOOGLE_PLACE_ID;if(!e||!t)return console.error("Missing Google Places API credentials"),[];try{let o=`https://maps.googleapis.com/maps/api/place/details/json?place_id=${t}&fields=reviews,rating,user_ratings_total&reviews_sort=newest&key=${e}`,s=await fetch(o),a=await s.json();if("OK"!==a.status)return console.error("Google Places API error:",a.status,a.error_message),[];if(!a.result?.reviews)return console.log("No reviews found for place"),[];return a.result.reviews.map(e=>{let t=function(e){let t=e.toLowerCase(),o=[];for(let{category:e,keywords:s}of r)s.some(e=>t.includes(e.toLowerCase()))&&o.push(e);return 0===o.length?["general"]:o}(e.text);return{authorName:e.author_name,authorUrl:e.author_url||null,profilePhotoUrl:e.profile_photo_url||null,rating:e.rating,text:e.text,relativeTime:e.relative_time_description,timestamp:e.time,categories:t,source:"places_api",reviewId:null}})}catch(e){return console.error("Error fetching Google reviews:",e),[]}}function o(e,r){return 0===r.length?e:e.filter(e=>{let t=e.text.toLowerCase();return r.some(e=>t.includes(e.toLowerCase()))})}function s(e,r=4){return e.filter(e=>e.rating>=r)}e.s(["fetchGoogleReviews",()=>t,"filterReviewsByKeywords",()=>o,"getHighRatedReviews",()=>s],22300)}];

//# sourceMappingURL=server_lib_googleReviews_ts_6d78a20f._.js.map