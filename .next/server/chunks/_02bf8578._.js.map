{"version":3,"sources":["turbopack:///[project]/node_modules/resend/dist/index.mjs","turbopack:///[project]/server/lib/resendClient.ts"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// package.json\nvar version = \"6.1.2\";\n\n// src/common/utils/build-pagination-query.ts\nfunction buildPaginationQuery(options) {\n  const searchParams = new URLSearchParams();\n  if (options.limit !== void 0) {\n    searchParams.set(\"limit\", options.limit.toString());\n  }\n  if (\"after\" in options && options.after !== void 0) {\n    searchParams.set(\"after\", options.after);\n  }\n  if (\"before\" in options && options.before !== void 0) {\n    searchParams.set(\"before\", options.before);\n  }\n  return searchParams.toString();\n}\n\n// src/api-keys/api-keys.ts\nvar ApiKeys = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      const data = yield this.resend.post(\n        \"/api-keys\",\n        payload,\n        options\n      );\n      return data;\n    });\n  }\n  list() {\n    return __async(this, arguments, function* (options = {}) {\n      const queryString = buildPaginationQuery(options);\n      const url = queryString ? `/api-keys?${queryString}` : \"/api-keys\";\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  remove(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.delete(\n        `/api-keys/${id}`\n      );\n      return data;\n    });\n  }\n};\n\n// src/audiences/audiences.ts\nvar Audiences = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      const data = yield this.resend.post(\n        \"/audiences\",\n        payload,\n        options\n      );\n      return data;\n    });\n  }\n  list() {\n    return __async(this, arguments, function* (options = {}) {\n      const queryString = buildPaginationQuery(options);\n      const url = queryString ? `/audiences?${queryString}` : \"/audiences\";\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  get(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.get(\n        `/audiences/${id}`\n      );\n      return data;\n    });\n  }\n  remove(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.delete(\n        `/audiences/${id}`\n      );\n      return data;\n    });\n  }\n};\n\n// src/common/utils/parse-email-to-api-options.ts\nfunction parseAttachments(attachments) {\n  return attachments == null ? void 0 : attachments.map((attachment) => ({\n    content: attachment.content,\n    filename: attachment.filename,\n    path: attachment.path,\n    content_type: attachment.contentType,\n    content_id: attachment.contentId\n  }));\n}\nfunction parseEmailToApiOptions(email) {\n  return {\n    attachments: parseAttachments(email.attachments),\n    bcc: email.bcc,\n    cc: email.cc,\n    from: email.from,\n    headers: email.headers,\n    html: email.html,\n    reply_to: email.replyTo,\n    scheduled_at: email.scheduledAt,\n    subject: email.subject,\n    tags: email.tags,\n    text: email.text,\n    to: email.to\n  };\n}\n\n// src/render.ts\nfunction render(node) {\n  return new Promise((resolve, reject) => {\n    import(\"@react-email/render\").then(({ render: render2 }) => {\n      resolve(render2(node));\n    }).catch(() => {\n      reject(\n        Error(\n          \"Failed to render React component. Make sure to install `@react-email/render` or `@react-email/components`.\"\n        )\n      );\n    });\n  });\n}\n\n// src/batch/batch.ts\nvar Batch = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  send(payload, options) {\n    return __async(this, null, function* () {\n      return this.create(payload, options);\n    });\n  }\n  create(payload, options) {\n    return __async(this, null, function* () {\n      var _a;\n      const emails = [];\n      for (const email of payload) {\n        if (email.react) {\n          email.html = yield render(email.react);\n          email.react = void 0;\n        }\n        emails.push(parseEmailToApiOptions(email));\n      }\n      const data = yield this.resend.post(\n        \"/emails/batch\",\n        emails,\n        __spreadProps(__spreadValues({}, options), {\n          headers: __spreadValues({\n            \"x-batch-validation\": (_a = options == null ? void 0 : options.batchValidation) != null ? _a : \"strict\"\n          }, options == null ? void 0 : options.headers)\n        })\n      );\n      return data;\n    });\n  }\n};\n\n// src/broadcasts/broadcasts.ts\nvar Broadcasts = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      if (payload.react) {\n        payload.html = yield render(payload.react);\n      }\n      const data = yield this.resend.post(\n        \"/broadcasts\",\n        {\n          name: payload.name,\n          audience_id: payload.audienceId,\n          preview_text: payload.previewText,\n          from: payload.from,\n          html: payload.html,\n          reply_to: payload.replyTo,\n          subject: payload.subject,\n          text: payload.text\n        },\n        options\n      );\n      return data;\n    });\n  }\n  send(id, payload) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.post(\n        `/broadcasts/${id}/send`,\n        { scheduled_at: payload == null ? void 0 : payload.scheduledAt }\n      );\n      return data;\n    });\n  }\n  list() {\n    return __async(this, arguments, function* (options = {}) {\n      const queryString = buildPaginationQuery(options);\n      const url = queryString ? `/broadcasts?${queryString}` : \"/broadcasts\";\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  get(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.get(\n        `/broadcasts/${id}`\n      );\n      return data;\n    });\n  }\n  remove(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.delete(\n        `/broadcasts/${id}`\n      );\n      return data;\n    });\n  }\n  update(id, payload) {\n    return __async(this, null, function* () {\n      if (payload.react) {\n        payload.html = yield render(payload.react);\n      }\n      const data = yield this.resend.patch(\n        `/broadcasts/${id}`,\n        {\n          name: payload.name,\n          audience_id: payload.audienceId,\n          from: payload.from,\n          html: payload.html,\n          text: payload.text,\n          subject: payload.subject,\n          reply_to: payload.replyTo,\n          preview_text: payload.previewText\n        }\n      );\n      return data;\n    });\n  }\n};\n\n// src/contacts/contacts.ts\nvar Contacts = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      const data = yield this.resend.post(\n        `/audiences/${payload.audienceId}/contacts`,\n        {\n          unsubscribed: payload.unsubscribed,\n          email: payload.email,\n          first_name: payload.firstName,\n          last_name: payload.lastName\n        },\n        options\n      );\n      return data;\n    });\n  }\n  list(options) {\n    return __async(this, null, function* () {\n      const _a = options, { audienceId } = _a, paginationOptions = __objRest(_a, [\"audienceId\"]);\n      const queryString = buildPaginationQuery(paginationOptions);\n      const url = queryString ? `/audiences/${audienceId}/contacts?${queryString}` : `/audiences/${audienceId}/contacts`;\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  get(options) {\n    return __async(this, null, function* () {\n      if (!options.id && !options.email) {\n        return {\n          data: null,\n          error: {\n            message: \"Missing `id` or `email` field.\",\n            name: \"missing_required_field\"\n          }\n        };\n      }\n      const data = yield this.resend.get(\n        `/audiences/${options.audienceId}/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`\n      );\n      return data;\n    });\n  }\n  update(options) {\n    return __async(this, null, function* () {\n      if (!options.id && !options.email) {\n        return {\n          data: null,\n          error: {\n            message: \"Missing `id` or `email` field.\",\n            name: \"missing_required_field\"\n          }\n        };\n      }\n      const data = yield this.resend.patch(\n        `/audiences/${options.audienceId}/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`,\n        {\n          unsubscribed: options.unsubscribed,\n          first_name: options.firstName,\n          last_name: options.lastName\n        }\n      );\n      return data;\n    });\n  }\n  remove(payload) {\n    return __async(this, null, function* () {\n      if (!payload.id && !payload.email) {\n        return {\n          data: null,\n          error: {\n            message: \"Missing `id` or `email` field.\",\n            name: \"missing_required_field\"\n          }\n        };\n      }\n      const data = yield this.resend.delete(\n        `/audiences/${payload.audienceId}/contacts/${(payload == null ? void 0 : payload.email) ? payload == null ? void 0 : payload.email : payload == null ? void 0 : payload.id}`\n      );\n      return data;\n    });\n  }\n};\n\n// src/common/utils/parse-domain-to-api-options.ts\nfunction parseDomainToApiOptions(domain) {\n  return {\n    name: domain.name,\n    region: domain.region,\n    custom_return_path: domain.customReturnPath\n  };\n}\n\n// src/domains/domains.ts\nvar Domains = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      const data = yield this.resend.post(\n        \"/domains\",\n        parseDomainToApiOptions(payload),\n        options\n      );\n      return data;\n    });\n  }\n  list() {\n    return __async(this, arguments, function* (options = {}) {\n      const queryString = buildPaginationQuery(options);\n      const url = queryString ? `/domains?${queryString}` : \"/domains\";\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  get(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.get(\n        `/domains/${id}`\n      );\n      return data;\n    });\n  }\n  update(payload) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.patch(\n        `/domains/${payload.id}`,\n        {\n          click_tracking: payload.clickTracking,\n          open_tracking: payload.openTracking,\n          tls: payload.tls\n        }\n      );\n      return data;\n    });\n  }\n  remove(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.delete(\n        `/domains/${id}`\n      );\n      return data;\n    });\n  }\n  verify(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.post(\n        `/domains/${id}/verify`\n      );\n      return data;\n    });\n  }\n};\n\n// src/emails/emails.ts\nvar Emails = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  send(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      return this.create(payload, options);\n    });\n  }\n  create(_0) {\n    return __async(this, arguments, function* (payload, options = {}) {\n      if (payload.react) {\n        payload.html = yield render(payload.react);\n      }\n      const data = yield this.resend.post(\n        \"/emails\",\n        parseEmailToApiOptions(payload),\n        options\n      );\n      return data;\n    });\n  }\n  get(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.get(\n        `/emails/${id}`\n      );\n      return data;\n    });\n  }\n  list() {\n    return __async(this, arguments, function* (options = {}) {\n      const queryString = buildPaginationQuery(options);\n      const url = queryString ? `/emails?${queryString}` : \"/emails\";\n      const data = yield this.resend.get(url);\n      return data;\n    });\n  }\n  update(payload) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.patch(\n        `/emails/${payload.id}`,\n        {\n          scheduled_at: payload.scheduledAt\n        }\n      );\n      return data;\n    });\n  }\n  cancel(id) {\n    return __async(this, null, function* () {\n      const data = yield this.resend.post(\n        `/emails/${id}/cancel`\n      );\n      return data;\n    });\n  }\n};\n\n// src/resend.ts\nvar defaultBaseUrl = \"https://api.resend.com\";\nvar defaultUserAgent = `resend-node:${version}`;\nvar baseUrl = typeof process !== \"undefined\" && process.env ? process.env.RESEND_BASE_URL || defaultBaseUrl : defaultBaseUrl;\nvar userAgent = typeof process !== \"undefined\" && process.env ? process.env.RESEND_USER_AGENT || defaultUserAgent : defaultUserAgent;\nvar Resend = class {\n  constructor(key) {\n    this.key = key;\n    this.apiKeys = new ApiKeys(this);\n    this.audiences = new Audiences(this);\n    this.batch = new Batch(this);\n    this.broadcasts = new Broadcasts(this);\n    this.contacts = new Contacts(this);\n    this.domains = new Domains(this);\n    this.emails = new Emails(this);\n    if (!key) {\n      if (typeof process !== \"undefined\" && process.env) {\n        this.key = process.env.RESEND_API_KEY;\n      }\n      if (!this.key) {\n        throw new Error(\n          'Missing API key. Pass it to the constructor `new Resend(\"re_123\")`'\n        );\n      }\n    }\n    this.headers = new Headers({\n      Authorization: `Bearer ${this.key}`,\n      \"User-Agent\": userAgent,\n      \"Content-Type\": \"application/json\"\n    });\n  }\n  fetchRequest(_0) {\n    return __async(this, arguments, function* (path, options = {}) {\n      try {\n        const response = yield fetch(`${baseUrl}${path}`, options);\n        if (!response.ok) {\n          try {\n            const rawError = yield response.text();\n            return { data: null, error: JSON.parse(rawError) };\n          } catch (err) {\n            if (err instanceof SyntaxError) {\n              return {\n                data: null,\n                error: {\n                  name: \"application_error\",\n                  message: \"Internal server error. We are unable to process your request right now, please try again later.\"\n                }\n              };\n            }\n            const error = {\n              message: response.statusText,\n              name: \"application_error\"\n            };\n            if (err instanceof Error) {\n              return { data: null, error: __spreadProps(__spreadValues({}, error), { message: err.message }) };\n            }\n            return { data: null, error };\n          }\n        }\n        const data = yield response.json();\n        return { data, error: null };\n      } catch (e) {\n        return {\n          data: null,\n          error: {\n            name: \"application_error\",\n            message: \"Unable to fetch data. The request could not be resolved.\"\n          }\n        };\n      }\n    });\n  }\n  post(_0, _1) {\n    return __async(this, arguments, function* (path, entity, options = {}) {\n      const headers = new Headers(this.headers);\n      if (options.headers) {\n        for (const [key, value] of new Headers(options.headers).entries()) {\n          headers.set(key, value);\n        }\n      }\n      if (options.idempotencyKey) {\n        headers.set(\"Idempotency-Key\", options.idempotencyKey);\n      }\n      const requestOptions = __spreadProps(__spreadValues({\n        method: \"POST\",\n        body: JSON.stringify(entity)\n      }, options), {\n        headers\n      });\n      return this.fetchRequest(path, requestOptions);\n    });\n  }\n  get(_0) {\n    return __async(this, arguments, function* (path, options = {}) {\n      const headers = new Headers(this.headers);\n      if (options.headers) {\n        for (const [key, value] of new Headers(options.headers).entries()) {\n          headers.set(key, value);\n        }\n      }\n      const requestOptions = __spreadProps(__spreadValues({\n        method: \"GET\"\n      }, options), {\n        headers\n      });\n      return this.fetchRequest(path, requestOptions);\n    });\n  }\n  put(_0, _1) {\n    return __async(this, arguments, function* (path, entity, options = {}) {\n      const headers = new Headers(this.headers);\n      if (options.headers) {\n        for (const [key, value] of new Headers(options.headers).entries()) {\n          headers.set(key, value);\n        }\n      }\n      const requestOptions = __spreadProps(__spreadValues({\n        method: \"PUT\",\n        body: JSON.stringify(entity)\n      }, options), {\n        headers\n      });\n      return this.fetchRequest(path, requestOptions);\n    });\n  }\n  patch(_0, _1) {\n    return __async(this, arguments, function* (path, entity, options = {}) {\n      const headers = new Headers(this.headers);\n      if (options.headers) {\n        for (const [key, value] of new Headers(options.headers).entries()) {\n          headers.set(key, value);\n        }\n      }\n      const requestOptions = __spreadProps(__spreadValues({\n        method: \"PATCH\",\n        body: JSON.stringify(entity)\n      }, options), {\n        headers\n      });\n      return this.fetchRequest(path, requestOptions);\n    });\n  }\n  delete(path, query) {\n    return __async(this, null, function* () {\n      const requestOptions = {\n        method: \"DELETE\",\n        body: JSON.stringify(query),\n        headers: this.headers\n      };\n      return this.fetchRequest(path, requestOptions);\n    });\n  }\n};\nexport {\n  Resend\n};\n","import { Resend } from 'resend';\n\nlet connectionSettings: any;\n\nasync function getCredentials() {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  const xReplitToken = process.env.REPL_IDENTITY \n    ? 'repl ' + process.env.REPL_IDENTITY \n    : process.env.WEB_REPL_RENEWAL \n    ? 'depl ' + process.env.WEB_REPL_RENEWAL \n    : null;\n\n  if (!xReplitToken) {\n    throw new Error('X_REPLIT_TOKEN not found for repl/depl');\n  }\n\n  connectionSettings = await fetch(\n    'https://' + hostname + '/api/v2/connection?include_secrets=true&connector_names=resend',\n    {\n      headers: {\n        'Accept': 'application/json',\n        'X_REPLIT_TOKEN': xReplitToken\n      }\n    }\n  ).then(res => res.json()).then(data => data.items?.[0]);\n\n  if (!connectionSettings || (!connectionSettings.settings.api_key)) {\n    throw new Error('Resend not connected');\n  }\n  return {\n    apiKey: connectionSettings.settings.api_key, \n    fromEmail: connectionSettings.settings.from_email\n  };\n}\n\nexport async function getResendClient() {\n  const { apiKey, fromEmail } = await getCredentials();\n  return {\n    client: new Resend(apiKey),\n    fromEmail: fromEmail\n  };\n}\n\nexport async function send404AlertEmail(url: string, referrer: string | undefined, userAgent: string | undefined, ipAddress: string | undefined) {\n  try {\n    const { client, fromEmail } = await getResendClient();\n    \n    const emailHtml = `\n      <html>\n        <body style=\"font-family: Arial, sans-serif; padding: 20px;\">\n          <h2 style=\"color: #dc2626;\">404 Error Detected</h2>\n          <p>A visitor encountered a broken link on your website:</p>\n          \n          <div style=\"background-color: #f3f4f6; padding: 15px; border-radius: 5px; margin: 20px 0;\">\n            <p><strong>Requested URL:</strong> ${url}</p>\n            <p><strong>Referrer:</strong> ${referrer || 'Direct visit'}</p>\n            <p><strong>User Agent:</strong> ${userAgent || 'Unknown'}</p>\n            <p><strong>IP Address:</strong> ${ipAddress || 'Unknown'}</p>\n            <p><strong>Time:</strong> ${new Date().toLocaleString('en-US', { timeZone: 'America/Chicago' })}</p>\n          </div>\n          \n          <p style=\"color: #6b7280; font-size: 14px;\">\n            This alert was sent from your Economy Plumbing Services 404 monitoring system.\n          </p>\n        </body>\n      </html>\n    `;\n\n    const result = await client.emails.send({\n      from: fromEmail,\n      to: fromEmail, // Send to the same email configured in Resend\n      subject: `404 Error: ${url}`,\n      html: emailHtml,\n    });\n\n    return result;\n  } catch (error) {\n    console.error('[404 Monitor] Failed to send email alert:', error);\n    throw error;\n  }\n}\n\nexport async function sendReferralCreditNotification(data: {\n  referrerName: string;\n  refereeName: string;\n  creditAmount: number;\n  creditDate: Date;\n  jobNumber?: string;\n}) {\n  try {\n    const { client, fromEmail } = await getResendClient();\n    \n    const dateStr = data.creditDate.toLocaleString('en-US', { \n      timeZone: 'America/Chicago',\n      dateStyle: 'full',\n      timeStyle: 'short'\n    });\n    \n    const emailHtml = `\n      <html>\n        <body style=\"font-family: Arial, sans-serif; padding: 20px; background-color: #f9fafb;\">\n          <div style=\"max-width: 600px; margin: 0 auto; background-color: white; border-radius: 8px; padding: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n            <h2 style=\"color: #10b981; margin-top: 0;\">Referral Credit Issued</h2>\n            \n            <p style=\"font-size: 16px; line-height: 1.6;\">\n              A new referral credit has been issued in the Economy Plumbing Services system:\n            </p>\n            \n            <div style=\"background-color: #f0fdf4; padding: 20px; border-radius: 8px; border-left: 4px solid #10b981; margin: 20px 0;\">\n              <p style=\"margin: 8px 0;\"><strong>Referrer:</strong> ${data.referrerName}</p>\n              <p style=\"margin: 8px 0;\"><strong>New Customer (Referee):</strong> ${data.refereeName}</p>\n              <p style=\"margin: 8px 0;\"><strong>Credit Amount:</strong> <span style=\"color: #10b981; font-size: 18px; font-weight: bold;\">$${data.creditAmount.toFixed(2)}</span></p>\n              ${data.jobNumber ? `<p style=\"margin: 8px 0;\"><strong>Qualifying Job:</strong> #${data.jobNumber}</p>` : ''}\n              <p style=\"margin: 8px 0;\"><strong>Date Issued:</strong> ${dateStr}</p>\n            </div>\n            \n            <div style=\"background-color: #fef3c7; padding: 15px; border-radius: 8px; margin-top: 20px;\">\n              <p style=\"margin: 0; font-size: 14px; color: #92400e;\">\n                <strong>Next Steps:</strong> The credit has been added to the referrer's ServiceTitan account and will expire in 180 days. A pinned note has been added to both customer accounts.\n              </p>\n            </div>\n            \n            <p style=\"color: #6b7280; font-size: 12px; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;\">\n              This notification was sent by the Economy Plumbing Services referral tracking system.\n            </p>\n          </div>\n        </body>\n      </html>\n    `;\n\n    // Use NOTIFICATION_EMAIL if set, otherwise fall back to fromEmail\n    const notificationEmail = process.env.NOTIFICATION_EMAIL || fromEmail;\n    \n    const result = await client.emails.send({\n      from: fromEmail,\n      to: notificationEmail,\n      subject: `Referral Credit Issued: $${data.creditAmount.toFixed(2)} for ${data.referrerName}`,\n      html: emailHtml,\n    });\n\n    console.log('[Resend] Referral credit notification sent to:', notificationEmail);\n    return result;\n  } catch (error) {\n    console.error('[Resend] Failed to send referral credit notification:', error);\n    throw error;\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}