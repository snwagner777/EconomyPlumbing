{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/customer-portal/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { SEOHead } from \"@/components/SEO/SEOHead\";\nimport Header from \"@/components/Header\";\nimport Footer from \"@/components/Footer\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { AspectRatio } from \"@/components/ui/aspect-ratio\";\nimport { openScheduler } from \"@/lib/scheduler\";\nimport { usePhoneConfig } from \"@/hooks/usePhoneConfig\";\nimport { ReferralModal } from \"@/components/ReferralModal\";\nimport { \n  User,\n  Users,\n  Calendar,\n  FileText,\n  DollarSign,\n  Clock,\n  CheckCircle,\n  AlertCircle,\n  Phone as PhoneIcon,\n  Phone,\n  Mail,\n  Hash,\n  Gift,\n  Heart,\n  Crown,\n  Star,\n  Shield,\n  Wrench,\n  MapPin,\n  Home,\n  MessageSquare,\n  Share2,\n  Copy,\n  Check,\n  TrendingUp,\n  CalendarClock,\n  Edit2,\n  Building2,\n  Briefcase\n} from \"lucide-react\";\nimport { SiFacebook, SiX } from \"react-icons/si\";\n\ninterface ServiceTitanContact {\n  id: number;\n  type: string;\n  value: string;\n  memo?: string;\n  phoneSettings?: {\n    phoneNumber: string;\n    doNotText: boolean;\n  };\n}\n\ninterface ServiceTitanCustomer {\n  id: number;\n  name: string;\n  email: string;\n  phoneNumber: string;\n  contacts?: ServiceTitanContact[];\n  address?: {\n    street: string;\n    city: string;\n    state: string;\n    zip: string;\n  };\n}\n\ninterface ServiceTitanAppointment {\n  id: number;\n  start: string;\n  end: string;\n  status: string;\n  arrivalWindowStart?: string;\n  arrivalWindowEnd?: string;\n  jobType: string;\n  jobNumber?: string;\n  summary?: string;\n  businessUnitName?: string;\n}\n\ninterface ServiceTitanInvoice {\n  id: number;\n  invoiceNumber: string;\n  total: number;\n  balance: number;\n  status: string;\n  createdOn: string;\n  dueDate?: string;\n  jobNumber?: string;\n  summary?: string;\n}\n\ninterface ServiceTitanMembership {\n  id: number;\n  membershipType: string;\n  status: string;\n  isExpired?: boolean;\n  startDate: string;\n  expirationDate?: string;\n  renewalDate?: string;\n  balance: number;\n  totalValue: number;\n  description: string;\n}\n\ninterface ServiceTitanEstimate {\n  id: number;\n  estimateNumber: string;\n  total: number;\n  status: string;\n  createdOn: string;\n  expiresOn?: string;\n  jobId?: number;\n  jobNumber?: string;\n  summary: string;\n  items?: any[];\n}\n\ninterface CustomerData {\n  customer: ServiceTitanCustomer;\n  appointments: ServiceTitanAppointment[];\n  invoices: ServiceTitanInvoice[];\n  memberships: ServiceTitanMembership[];\n  estimates: ServiceTitanEstimate[];\n}\n\ninterface CustomerAccount {\n  id: number;\n  name: string;\n  type: string;\n  address?: string;\n}\n\nexport default function CustomerPortal() {\n  const [lookupValue, setLookupValue] = useState(\"\");\n  const [lookupType, setLookupType] = useState<\"phone\" | \"email\">(\"email\");\n  const [customerId, setCustomerId] = useState<string | null>(null);\n  const [lookupError, setLookupError] = useState<string | null>(null);\n  const [lookupSuccess, setLookupSuccess] = useState<string | null>(null);\n  const [isSearching, setIsSearching] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const [showReferralModal, setShowReferralModal] = useState(false);\n  \n  // Multi-account support\n  const [availableAccounts, setAvailableAccounts] = useState<CustomerAccount[]>([]);\n  const [availableCustomerIds, setAvailableCustomerIds] = useState<number[]>([]);\n  const [showAccountSelection, setShowAccountSelection] = useState(false);\n  \n  // Verification state\n  const [verificationStep, setVerificationStep] = useState<'lookup' | 'verify-code' | 'phone-lookup' | 'phone-email-found' | 'select-account' | 'authenticated'>('lookup');\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const [verificationMessage, setVerificationMessage] = useState(\"\");\n  const [isVerifying, setIsVerifying] = useState(false);\n  \n  // Phone-based login state\n  const [phoneLoginNumber, setPhoneLoginNumber] = useState(\"\");\n  const [maskedEmail, setMaskedEmail] = useState(\"\");\n  const [lookupToken, setLookupToken] = useState(\"\");\n  const [isLookingUp, setIsLookingUp] = useState(false);\n  const [isSendingLink, setIsSendingLink] = useState(false);\n  \n  // Reschedule state\n  const [rescheduleDialogOpen, setRescheduleDialogOpen] = useState(false);\n  const [appointmentToReschedule, setAppointmentToReschedule] = useState<ServiceTitanAppointment | null>(null);\n  const [newAppointmentDate, setNewAppointmentDate] = useState(\"\");\n  const [newAppointmentWindow, setNewAppointmentWindow] = useState(\"\");\n  const [isRescheduling, setIsRescheduling] = useState(false);\n  \n  // Edit contact info state\n  const [editContactsOpen, setEditContactsOpen] = useState(false);\n  const [editEmail, setEditEmail] = useState(\"\");\n  const [editPhone, setEditPhone] = useState(\"\");\n  const [isUpdatingContacts, setIsUpdatingContacts] = useState(false);\n  \n  // Delete contact state\n  const [deleteContactDialogOpen, setDeleteContactDialogOpen] = useState(false);\n  const [contactToDelete, setContactToDelete] = useState<{ id: number; type: string; value: string } | null>(null);\n  const [isDeletingContact, setIsDeletingContact] = useState(false);\n  \n  // Edit address state\n  const [editAddressOpen, setEditAddressOpen] = useState(false);\n  const [editStreet, setEditStreet] = useState(\"\");\n  const [editCity, setEditCity] = useState(\"\");\n  const [editState, setEditState] = useState(\"\");\n  const [editZip, setEditZip] = useState(\"\");\n  const [isUpdatingAddress, setIsUpdatingAddress] = useState(false);\n  const [locationId, setLocationId] = useState<number | null>(null);\n  \n  // Email Us modal state\n  const [emailUsOpen, setEmailUsOpen] = useState(false);\n  const [emailUsSubject, setEmailUsSubject] = useState(\"\");\n  const [emailUsMessage, setEmailUsMessage] = useState(\"\");\n  const [emailUsName, setEmailUsName] = useState(\"\");\n  const [emailUsEmail, setEmailUsEmail] = useState(\"\");\n  const [emailUsPhone, setEmailUsPhone] = useState(\"\");\n  const [isSendingEmail, setIsSendingEmail] = useState(false);\n  \n  // Review modal state\n  const [reviewModalOpen, setReviewModalOpen] = useState(false);\n  const [reviewRating, setReviewRating] = useState(0);\n  const [reviewFeedback, setReviewFeedback] = useState(\"\");\n  const [isSubmittingReview, setIsSubmittingReview] = useState(false);\n  \n  // Estimate detail modal state\n  const [estimateDetailOpen, setEstimateDetailOpen] = useState(false);\n  const [selectedEstimate, setSelectedEstimate] = useState<ServiceTitanEstimate | null>(null);\n  \n  const phoneConfig = usePhoneConfig();\n  const { toast } = useToast();\n\n  const { data: customerData, isLoading, error } = useQuery<CustomerData>({\n    queryKey: ['/api/servicetitan/customer', customerId],\n    enabled: !!customerId,\n  });\n\n  // Fetch referrals for this customer\n  const { data: referralsData } = useQuery<{ referrals: any[] }>({\n    queryKey: ['/api/referrals/customer', customerId],\n    enabled: !!customerId,\n  });\n\n  // Fetch referral code and link for this customer\n  const { data: referralLinkData } = useQuery<{\n    code: string;\n    url: string;\n    clicks: number;\n    conversions: number;\n  }>({\n    queryKey: ['/api/referrals/code', customerId],\n    enabled: !!customerId,\n  });\n\n  // Fetch arrival windows from ServiceTitan\n  const { data: arrivalWindowsData } = useQuery<{\n    windows: Array<{ start: string; end: string; label: string }>;\n  }>({\n    queryKey: ['/api/servicetitan/arrival-windows'],\n  });\n\n  // Fetch customer stats (service count and percentile ranking)\n  const { data: customerStats } = useQuery<{\n    serviceCount: number;\n    topPercentile: number;\n  }>({\n    queryKey: ['/api/portal/customer-stats', customerId],\n    enabled: !!customerId,\n  });\n\n  // Fetch ALL locations for this customer (multi-location support)\n  const { data: locationsData } = useQuery<{\n    locations: Array<{\n      id: number;\n      name?: string;\n      address: {\n        street: string;\n        city: string;\n        state: string;\n        zip: string;\n      };\n    }>;\n  }>({\n    queryKey: ['/api/portal/customer-locations', customerId],\n    enabled: !!customerId,\n  });\n\n  // Fetch email communication history\n  const { data: emailHistoryData } = useQuery<{\n    emails: Array<{\n      id: string;\n      subject: string | null;\n      campaignName: string | null;\n      sentAt: string;\n      openedAt: string | null;\n      clickedAt: string | null;\n      status: string | null;\n    }>;\n  }>({\n    queryKey: ['/api/portal/customer', customerId, 'emails'],\n    enabled: !!customerId,\n  });\n\n  const timeWindows = arrivalWindowsData?.windows || [];\n  const customerLocations = locationsData?.locations || [];\n\n  // Separate upcoming and completed appointments\n  const upcomingAppointments = customerData?.appointments.filter(apt => {\n    const isUpcoming = new Date(apt.start) > new Date();\n    const isNotCompleted = !['Done', 'Completed', 'Cancelled'].includes(apt.status);\n    return isUpcoming && isNotCompleted;\n  }) || [];\n\n  const completedAppointments = customerData?.appointments.filter(apt => {\n    const isPast = new Date(apt.start) <= new Date();\n    const isCompleted = ['Done', 'Completed', 'Cancelled'].includes(apt.status);\n    return isPast || isCompleted;\n  }) || [];\n\n  // Check for magic link token OR server session on page load\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const token = urlParams.get('token');\n    \n    if (token) {\n      // Auto-verify email magic link\n      handleMagicLinkVerification(token);\n    } else {\n      // Check if server has an active session\n      checkExistingSession();\n    }\n  }, []);\n  \n  const checkExistingSession = async () => {\n    try {\n      const response = await fetch('/api/portal/session');\n      if (response.ok) {\n        const data = await response.json();\n        if (data.customerId) {\n          console.log('[Portal] Found active session, auto-logging in...');\n          setCustomerId(data.customerId.toString());\n          setAvailableCustomerIds(data.availableCustomerIds || [data.customerId]);\n          setVerificationStep('authenticated');\n        }\n      }\n    } catch (error) {\n      console.log('[Portal] No active session found');\n    }\n  };\n\n  const handleMagicLinkVerification = async (token: string) => {\n    setIsVerifying(true);\n    try {\n      const response = await fetch('/api/portal/auth/verify-code', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          contactValue: '', // Token-based verification doesn't need contact value\n          code: token,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || 'Invalid or expired magic link');\n      }\n\n      const result = await response.json();\n      \n      // Check if multiple accounts exist\n      if (result.customers && result.customers.length > 1) {\n        setAvailableAccounts(result.customers);\n        setAvailableCustomerIds(result.customers.map((c: any) => c.id));\n        setVerificationStep('select-account');\n        setLookupSuccess(\"Please select which account you'd like to access\");\n      } else if (result.customers && result.customers.length === 1) {\n        // Single account - auto-select it\n        const customerIdStr = result.customers[0].id.toString();\n        setCustomerId(customerIdStr);\n        setAvailableCustomerIds([result.customers[0].id]);\n        setVerificationStep('authenticated');\n        setLookupSuccess(\"Welcome to your customer portal!\");\n      } else if (result.customerId) {\n        // Backward compatibility for old response format\n        const customerIdStr = result.customerId.toString();\n        setCustomerId(customerIdStr);\n        setAvailableCustomerIds([result.customerId]);\n        setVerificationStep('authenticated');\n        setLookupSuccess(\"Welcome to your customer portal!\");\n      } else {\n        throw new Error('No customer data returned');\n      }\n      \n      setLookupError(null);\n      \n      // Session is now stored server-side via httpOnly cookie\n      \n      // Clean up URL\n      window.history.replaceState({}, document.title, window.location.pathname);\n    } catch (error: any) {\n      console.error('Magic link verification failed:', error);\n      \n      // Parse the error response\n      const errorMessage = error.message || \"The magic link is invalid or has expired. Please try again.\";\n      setLookupError(errorMessage);\n      setLookupSuccess(null);\n    } finally {\n      setIsVerifying(false);\n    }\n  };\n\n  const handleLookup = async () => {\n    if (!lookupValue.trim()) return;\n    \n    setLookupError(null);\n    setLookupSuccess(null);\n    setIsSearching(true);\n\n    try {\n      // For phone/email, send verification code\n      const verificationType = lookupType === 'phone' ? 'sms' : 'email';\n      \n      const response = await fetch('/api/portal/auth/send-code', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          contactValue: lookupValue,\n          verificationType,\n        }),\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || 'Customer not found');\n      }\n\n      const result = await response.json();\n      \n      // Move to verification step\n      setVerificationStep('verify-code');\n      setVerificationMessage(result.message);\n      setLookupSuccess(result.message);\n    } catch (err: any) {\n      console.error('Customer lookup failed:', err);\n      setLookupError(err.message || 'We couldn\\'t find an account with that information. Please verify and try again.');\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  const handleVerifyCode = async () => {\n    if (!verificationCode.trim()) return;\n    \n    setLookupError(null);\n    setLookupSuccess(null);\n    setIsVerifying(true);\n\n    try {\n      const response = await fetch('/api/portal/auth/verify-code', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          contactValue: lookupValue,\n          code: verificationCode,\n        }),\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || 'Invalid verification code');\n      }\n\n      const result = await response.json();\n      \n      // Check if multiple accounts exist\n      if (result.customers && result.customers.length > 1) {\n        setAvailableAccounts(result.customers);\n        setAvailableCustomerIds(result.customers.map((c: any) => c.id));\n        setVerificationStep('select-account');\n        setLookupSuccess(\"Please select which account you'd like to access\");\n      } else if (result.customers && result.customers.length === 1) {\n        // Single account - auto-select it\n        const customerIdStr = result.customers[0].id.toString();\n        setCustomerId(customerIdStr);\n        setAvailableCustomerIds([result.customers[0].id]);\n        setVerificationStep('authenticated');\n        setLookupSuccess(\"Welcome to your customer portal!\");\n        \n        // Session is now stored server-side via httpOnly cookie\n      } else if (result.customerId) {\n        // Backward compatibility for old response format\n        const customerIdStr = result.customerId.toString();\n        setCustomerId(customerIdStr);\n        setAvailableCustomerIds([result.customerId]);\n        setVerificationStep('authenticated');\n        setLookupSuccess(\"Welcome to your customer portal!\");\n        \n        // Session is now stored server-side via httpOnly cookie\n      } else {\n        throw new Error('No customer data returned');\n      }\n    } catch (err: any) {\n      console.error('Verification failed:', err);\n      setLookupError(err.message || 'Invalid verification code. Please try again.');\n    } finally {\n      setIsVerifying(false);\n    }\n  };\n\n  const handleSelectAccount = async (accountId: number) => {\n    try {\n      // If we're in the select-account step (initial auth), just set the customer ID\n      if (verificationStep === 'select-account') {\n        setCustomerId(accountId.toString());\n        setVerificationStep('authenticated');\n        setShowAccountSelection(false);\n      } else {\n        // We're switching accounts - call the API\n        const response = await fetch('/api/portal/switch-account', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ customerId: accountId }),\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to switch account');\n        }\n\n        setCustomerId(accountId.toString());\n        setShowAccountSelection(false);\n        \n        // Invalidate and refetch customer data\n        queryClient.invalidateQueries({ queryKey: ['/api/servicetitan/customer'] });\n      }\n    } catch (error: any) {\n      console.error('Account switch error:', error);\n      setLookupError('Failed to switch account. Please try again.');\n    }\n  };\n\n  const handleSwitchAccount = async () => {\n    // If we have multiple accounts stored in availableCustomerIds, fetch their details\n    if (availableCustomerIds.length > 1) {\n      try {\n        // Fetch account details for all available customer IDs\n        const accountPromises = availableCustomerIds.map(async (id) => {\n          const response = await fetch(`/api/servicetitan/customer/${id}`);\n          const data = await response.json();\n          return {\n            id: data.customer.id,\n            name: data.customer.name,\n            type: 'Residential', // We don't have type in the customer data yet\n            address: data.customer.address ? \n              [data.customer.address.street, data.customer.address.city, data.customer.address.state].filter(Boolean).join(', ') : \n              undefined\n          };\n        });\n\n        const accounts = await Promise.all(accountPromises);\n        setAvailableAccounts(accounts);\n        setShowAccountSelection(true);\n      } catch (error) {\n        console.error('Failed to load account details:', error);\n        setLookupError('Failed to load account details');\n      }\n    }\n  };\n\n  const handleBackToLookup = () => {\n    setVerificationStep('lookup');\n    setVerificationCode(\"\");\n    setLookupError(null);\n    setVerificationMessage(\"\");\n    setPhoneLoginNumber(\"\");\n    setMaskedEmail(\"\");\n    setLookupToken(\"\");\n  };\n\n  // Phone-based login handlers\n  const handlePhoneLookup = async () => {\n    if (!phoneLoginNumber.trim()) return;\n    \n    setLookupError(null);\n    setLookupSuccess(null);\n    setIsLookingUp(true);\n\n    try {\n      const response = await fetch('/api/portal/auth/lookup-by-phone', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ phone: phoneLoginNumber }),\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || 'Account not found');\n      }\n\n      const result = await response.json();\n      \n      setMaskedEmail(result.maskedEmail);\n      setLookupToken(result.lookupToken);\n      setVerificationStep('phone-email-found');\n      setLookupSuccess(`We found your account! We'll send a login link to ${result.maskedEmail}`);\n    } catch (err: any) {\n      console.error('Phone lookup failed:', err);\n      setLookupError(err.message || 'We couldn\\'t find an account with that phone number.');\n    } finally {\n      setIsLookingUp(false);\n    }\n  };\n\n  const handleSendPhoneMagicLink = async () => {\n    setLookupError(null);\n    setLookupSuccess(null);\n    setIsSendingLink(true);\n\n    try {\n      const response = await fetch('/api/portal/auth/send-phone-magic-link', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          lookupToken,\n        }),\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error || 'Failed to send login link');\n      }\n\n      const result = await response.json();\n      \n      setLookupSuccess(result.message || `Magic link sent to ${maskedEmail}! Check your email.`);\n      toast({\n        title: \"Check your email!\",\n        description: `We've sent a login link to ${maskedEmail}`,\n      });\n    } catch (err: any) {\n      console.error('Send magic link failed:', err);\n      setLookupError(err.message || 'Failed to send login link. Please try again.');\n    } finally {\n      setIsSendingLink(false);\n    }\n  };\n\n  const handleOpenRescheduleDialog = (appointment: ServiceTitanAppointment) => {\n    setAppointmentToReschedule(appointment);\n    \n    // Pre-fill with current appointment date\n    const appointmentDate = new Date(appointment.start);\n    const dateStr = appointmentDate.toISOString().split('T')[0];\n    setNewAppointmentDate(dateStr);\n    \n    // Pre-select time window based on current appointment's arrival window\n    if (appointment.arrivalWindowStart && appointment.arrivalWindowEnd && timeWindows.length > 0) {\n      const startTime = new Date(appointment.arrivalWindowStart);\n      const endTime = new Date(appointment.arrivalWindowEnd);\n      \n      const startStr = `${startTime.getUTCHours().toString().padStart(2, '0')}:${startTime.getUTCMinutes().toString().padStart(2, '0')}`;\n      const endStr = `${endTime.getUTCHours().toString().padStart(2, '0')}:${endTime.getUTCMinutes().toString().padStart(2, '0')}`;\n      \n      // Find matching window\n      const matchingWindow = timeWindows.find(w => w.start === startStr && w.end === endStr);\n      if (matchingWindow) {\n        setNewAppointmentWindow(`${matchingWindow.start}-${matchingWindow.end}`);\n      } else if (timeWindows.length > 0) {\n        // Default to first window if no match\n        setNewAppointmentWindow(`${timeWindows[0].start}-${timeWindows[0].end}`);\n      }\n    } else if (timeWindows.length > 0) {\n      // Default to first window\n      setNewAppointmentWindow(`${timeWindows[0].start}-${timeWindows[0].end}`);\n    }\n    \n    setRescheduleDialogOpen(true);\n  };\n\n  const handleRescheduleAppointment = async () => {\n    if (!appointmentToReschedule || !newAppointmentDate || !newAppointmentWindow || !customerId) {\n      return;\n    }\n\n    setIsRescheduling(true);\n\n    try {\n      // Parse the selected window (format: \"HH:MM-HH:MM\")\n      const [startTime, endTime] = newAppointmentWindow.split('-');\n      \n      // Find the matching window to get the label\n      const selectedWindow = timeWindows.find(w => `${w.start}-${w.end}` === newAppointmentWindow);\n      \n      if (!selectedWindow) {\n        throw new Error(\"Invalid time window selected\");\n      }\n\n      // Combine date and window times into ISO strings\n      const newStartDateTime = new Date(`${newAppointmentDate}T${startTime}:00`);\n      const newEndDateTime = new Date(`${newAppointmentDate}T${endTime}:00`);\n\n      const response = await fetch('/api/portal/reschedule-appointment', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          appointmentId: appointmentToReschedule.id,\n          newStart: newStartDateTime.toISOString(),\n          newEnd: newEndDateTime.toISOString(),\n          customerId: customerId,\n        }),\n      });\n\n      const result = await response.json();\n\n      if (!response.ok) {\n        throw new Error(result.error || 'Failed to reschedule appointment');\n      }\n\n      // Refresh customer data\n      window.location.reload();\n      \n      setRescheduleDialogOpen(false);\n    } catch (error: any) {\n      console.error('Reschedule error:', error);\n    } finally {\n      setIsRescheduling(false);\n    }\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n    }).format(amount);\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  };\n\n  const copyReferralLink = async () => {\n    if (!referralLinkData?.url) return;\n    \n    try {\n      await navigator.clipboard.writeText(referralLinkData.url);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      console.error('Copy failed:', err);\n    }\n  };\n\n  const shareViaFacebook = () => {\n    if (!referralLinkData?.url) return;\n    const url = encodeURIComponent(referralLinkData.url);\n    const text = encodeURIComponent(\"Check out Economy Plumbing Services! They're the best plumbers in Austin. Use my referral link to get started:\");\n    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');\n  };\n\n  const shareViaX = () => {\n    if (!referralLinkData?.url) return;\n    const url = encodeURIComponent(referralLinkData.url);\n    const text = encodeURIComponent(\"Check out Economy Plumbing Services! Best plumbers in Austin ðŸ’§\");\n    window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank');\n  };\n\n  const shareViaEmail = () => {\n    if (!referralLinkData?.url) return;\n    const subject = encodeURIComponent(\"I recommend Economy Plumbing Services\");\n    const body = encodeURIComponent(`Hi!\\n\\nI wanted to share Economy Plumbing Services with you. They've been great for all my plumbing needs in the Austin area!\\n\\nCheck them out here: ${referralLinkData.url}\\n\\nBest regards`);\n    window.location.href = `mailto:?subject=${subject}&body=${body}`;\n  };\n\n  const shareViaSMS = () => {\n    if (!referralLinkData?.url) return;\n    const text = encodeURIComponent(`Check out Economy Plumbing Services - best plumbers in Austin! ${referralLinkData.url}`);\n    window.location.href = `sms:?&body=${text}`;\n  };\n\n  const handleRequestPDF = async (\n    type: 'invoice' | 'estimate', \n    number: string, \n    id: number, \n    customerInfo: { customerId: number; customerName: string; customerEmail: string }\n  ) => {\n    try {\n      const response = await fetch('/api/portal/request-pdf', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          type,\n          number,\n          id,\n          customerId: customerInfo.customerId,\n          customerName: customerInfo.customerName,\n          customerEmail: customerInfo.customerEmail,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to send request');\n      }\n\n      toast({\n        title: \"PDF Request Received\",\n        description: `We'll email the ${type} PDF to ${customerInfo.customerEmail} by the next business day.`,\n      });\n    } catch (error) {\n      console.error('PDF request failed:', error);\n      toast({\n        title: \"Request Failed\",\n        description: `Unable to send the PDF request. Please try again or contact support.`,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  // Fetch customer location when needed\n  const fetchCustomerLocation = async () => {\n    if (!customerId) return;\n    \n    try {\n      const response = await fetch(`/api/portal/customer-location/${customerId}`);\n      if (!response.ok) throw new Error('Failed to fetch location');\n      \n      const data = await response.json();\n      if (data.location) {\n        setLocationId(data.location.id);\n        setEditStreet(data.location.address?.street || '');\n        setEditCity(data.location.address?.city || '');\n        setEditState(data.location.address?.state || '');\n        setEditZip(data.location.address?.zip || '');\n      }\n    } catch (error) {\n      console.error('Error fetching location:', error);\n    }\n  };\n\n  const handleEditContacts = () => {\n    if (!customerData) return;\n    setEditEmail(customerData.customer.email || '');\n    setEditPhone(customerData.customer.phoneNumber || '');\n    setEditContactsOpen(true);\n  };\n\n  const handleUpdateContacts = async () => {\n    if (!customerId) return;\n    \n    setIsUpdatingContacts(true);\n    try {\n      const response = await fetch('/api/portal/update-contacts', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          customerId: parseInt(customerId),\n          email: editEmail,\n          phone: editPhone,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to update contacts');\n      }\n\n      setEditContactsOpen(false);\n      window.location.reload();\n    } catch (error: any) {\n      console.error('Update contacts error:', error);\n    } finally {\n      setIsUpdatingContacts(false);\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      const response = await fetch('/api/portal/logout', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to logout');\n      }\n\n      // Clear state and redirect to portal home\n      setCustomerId(null);\n      setAvailableCustomerIds([]);\n      setVerificationStep('lookup');\n      setLookupType('phone');\n      setLookupValue('');\n      setVerificationCode('');\n      \n      // Show success message\n      toast({\n        title: \"Signed out\",\n        description: \"You have been successfully signed out.\",\n      });\n    } catch (error) {\n      console.error('Logout error:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to sign out. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleDeleteContact = async () => {\n    if (!customerId || !contactToDelete) return;\n    \n    setIsDeletingContact(true);\n    try {\n      const response = await fetch('/api/portal/delete-contact', {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          customerId: parseInt(customerId),\n          contactId: contactToDelete.id,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: 'Failed to delete contact' }));\n        throw new Error(errorData.error || 'Failed to delete contact');\n      }\n\n      // Show success toast\n      toast({\n        title: \"Contact deleted\",\n        description: `${contactToDelete.type} successfully removed from your account.`,\n      });\n\n      // Close dialog and reset state\n      setDeleteContactDialogOpen(false);\n      setContactToDelete(null);\n\n      // Invalidate customer data query to refresh the UI\n      queryClient.invalidateQueries({ queryKey: ['/api/servicetitan/customer', customerId] });\n    } catch (error: any) {\n      console.error('Delete contact error:', error);\n      \n      // Show error toast\n      toast({\n        title: \"Error deleting contact\",\n        description: error.message || \"Failed to delete contact. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsDeletingContact(false);\n    }\n  };\n\n  const handleEditAddress = async () => {\n    if (!customerData) return;\n    \n    // Fetch location first\n    await fetchCustomerLocation();\n    \n    // Pre-fill with current address if available\n    if (customerData.customer.address) {\n      setEditStreet(customerData.customer.address.street || '');\n      setEditCity(customerData.customer.address.city || '');\n      setEditState(customerData.customer.address.state || '');\n      setEditZip(customerData.customer.address.zip || '');\n    }\n    \n    setEditAddressOpen(true);\n  };\n\n  const handleUpdateAddress = async () => {\n    if (!customerId || !locationId) {\n      return;\n    }\n    \n    if (!editStreet || !editCity || !editState || !editZip) {\n      return;\n    }\n    \n    setIsUpdatingAddress(true);\n    try {\n      const response = await fetch('/api/portal/update-address', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          customerId: parseInt(customerId),\n          locationId,\n          street: editStreet,\n          city: editCity,\n          state: editState,\n          zip: editZip,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to update address');\n      }\n\n      setEditAddressOpen(false);\n      window.location.reload();\n    } catch (error: any) {\n      console.error('Update address error:', error);\n    } finally {\n      setIsUpdatingAddress(false);\n    }\n  };\n\n  const formatTime = (dateString: string) => {\n    return new Date(dateString).toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n    });\n  };\n\n  const getStatusBadge = (status: string) => {\n    const statusLower = status.toLowerCase();\n    if (statusLower.includes('scheduled') || statusLower.includes('pending')) {\n      return <Badge variant=\"secondary\" data-testid={`badge-status-${status}`}><Clock className=\"w-3 h-3 mr-1\" />{status}</Badge>;\n    }\n    if (statusLower.includes('completed') || statusLower.includes('paid')) {\n      return <Badge data-testid={`badge-status-${status}`}><CheckCircle className=\"w-3 h-3 mr-1\" />{status}</Badge>;\n    }\n    if (statusLower.includes('cancelled') || statusLower.includes('overdue')) {\n      return <Badge variant=\"destructive\" data-testid={`badge-status-${status}`}><AlertCircle className=\"w-3 h-3 mr-1\" />{status}</Badge>;\n    }\n    return <Badge variant=\"outline\" data-testid={`badge-status-${status}`}>{status}</Badge>;\n  };\n\n  const getExpirationBadge = (estimate: any) => {\n    if (!estimate.expirationStatus) return null;\n    \n    if (estimate.expirationStatus === 'expired') {\n      return (\n        <Badge variant=\"destructive\" className=\"text-xs\">\n          <AlertCircle className=\"w-3 h-3 mr-1\" />\n          Expired\n        </Badge>\n      );\n    }\n    if (estimate.expirationStatus === 'expiring_soon') {\n      return (\n        <Badge variant=\"secondary\" className=\"text-xs bg-yellow-500/10 text-yellow-600 dark:text-yellow-400\">\n          <Clock className=\"w-3 h-3 mr-1\" />\n          Expires in {estimate.daysUntilExpiration} days\n        </Badge>\n      );\n    }\n    // Valid - show days remaining if less than 30\n    if (estimate.daysUntilExpiration < 30) {\n      return (\n        <Badge variant=\"outline\" className=\"text-xs\">\n          Valid for {estimate.daysUntilExpiration} days\n        </Badge>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <>\n      <SEOHead\n        title=\"Customer Portal - Economy Plumbing Services\"\n        description=\"Access your service history, appointments, and invoices. View your Economy Plumbing Services account information and upcoming appointments.\"\n      />\n      <Header \n        isPortalAuthenticated={verificationStep === 'authenticated'} \n        onPortalLogout={handleLogout} \n      />\n\n      <main className=\"min-h-screen py-12 px-4\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"text-center mb-12\">\n            <h1 className=\"text-4xl md:text-5xl font-bold mb-4\">\n              {verificationStep === 'authenticated' && customerData ? (() => {\n                const hour = new Date().getHours();\n                const day = new Date().getDay();\n                const month = new Date().getMonth();\n                const serviceCount = customerStats?.serviceCount || 0;\n                const firstName = customerData.customer.name?.split(' ')[0] || 'there';\n                \n                // Build a pool of possible greetings\n                const greetings: string[] = [];\n                \n                // Time-based greetings\n                if (hour < 12) {\n                  greetings.push(`Good morning, ${firstName}!`);\n                  greetings.push(`Rise and shine, ${firstName}!`);\n                  greetings.push(`Morning, ${firstName}! Ready to tackle the day?`);\n                } else if (hour < 17) {\n                  greetings.push(`Good afternoon, ${firstName}!`);\n                  greetings.push(`Hey ${firstName}, hope your day is going well!`);\n                  greetings.push(`Afternoon, ${firstName}!`);\n                } else {\n                  greetings.push(`Good evening, ${firstName}!`);\n                  greetings.push(`Evening, ${firstName}!`);\n                  greetings.push(`Hey ${firstName}, winding down for the day?`);\n                }\n                \n                // Day-specific greetings\n                if (day === 1) {\n                  greetings.push(`Happy Monday, ${firstName}!`);\n                  greetings.push(`Monday motivation, ${firstName}!`);\n                } else if (day === 5) {\n                  greetings.push(`TGIF, ${firstName}!`);\n                  greetings.push(`Happy Friday, ${firstName}!`);\n                } else if (day === 0 || day === 6) {\n                  greetings.push(`Happy weekend, ${firstName}!`);\n                  greetings.push(`Enjoying your weekend, ${firstName}?`);\n                }\n                \n                // Loyalty-based greetings\n                if (serviceCount > 20) {\n                  greetings.push(`Welcome back, ${firstName}! You're practically family!`);\n                  greetings.push(`Hey ${firstName}, our VIP customer!`);\n                  greetings.push(`${firstName}, always great to see you!`);\n                } else if (serviceCount > 10) {\n                  greetings.push(`Welcome back, ${firstName}! Thanks for your loyalty!`);\n                  greetings.push(`Great to see you again, ${firstName}!`);\n                } else if (serviceCount > 5) {\n                  greetings.push(`Welcome back, ${firstName}!`);\n                  greetings.push(`Good to see you, ${firstName}!`);\n                } else if (serviceCount === 0) {\n                  greetings.push(`Welcome, ${firstName}! Excited to serve you!`);\n                  greetings.push(`Hello ${firstName}! Let's get started!`);\n                } else {\n                  greetings.push(`Welcome back, ${firstName}!`);\n                  greetings.push(`Hello again, ${firstName}!`);\n                }\n                \n                // Seasonal greetings\n                if (month === 11) {\n                  greetings.push(`Happy holidays, ${firstName}!`);\n                  greetings.push(`Season's greetings, ${firstName}!`);\n                } else if (month === 0) {\n                  greetings.push(`Happy New Year, ${firstName}!`);\n                } else if (month === 6 || month === 7) {\n                  greetings.push(`Enjoying the summer, ${firstName}?`);\n                  greetings.push(`Stay cool, ${firstName}!`);\n                } else if (month === 2 || month === 3) {\n                  greetings.push(`Happy spring, ${firstName}!`);\n                } else if (month === 9 || month === 10) {\n                  greetings.push(`Happy fall, ${firstName}!`);\n                }\n                \n                // General encouraging greetings\n                greetings.push(`Hey ${firstName}! How can we help today?`);\n                greetings.push(`${firstName}, great to have you here!`);\n                greetings.push(`Welcome, ${firstName}!`);\n                greetings.push(`Hello ${firstName}! What brings you here today?`);\n                greetings.push(`${firstName}, we're here to help!`);\n                \n                // Pick a random greeting from the pool\n                const randomIndex = Math.floor(Math.random() * greetings.length);\n                return greetings[randomIndex];\n              })() : 'Customer Portal'}\n            </h1>\n            <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n              {verificationStep === 'authenticated' ? \n                'Your service history, appointments, and account details' :\n                'Access your service history, appointments, and invoices'\n              }\n            </p>\n          </div>\n\n          {!customerId ? (\n            verificationStep === 'lookup' ? (\n              <Card className=\"max-w-md mx-auto\">\n                <CardHeader>\n                  <CardTitle>Find Your Account</CardTitle>\n                  <CardDescription>\n                    Enter your email address to access your account\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"lookup-input\">\n                      Email Address\n                    </Label>\n                    <Input\n                      id=\"lookup-input\"\n                      type=\"email\"\n                      placeholder=\"your@email.com\"\n                      value={lookupValue}\n                      onChange={(e) => setLookupValue(e.target.value)}\n                      onKeyDown={(e) => e.key === 'Enter' && handleLookup()}\n                      data-testid=\"input-lookup\"\n                    />\n                  </div>\n\n                  <Button\n                    onClick={handleLookup}\n                    className=\"w-full\"\n                    disabled={!lookupValue.trim() || isSearching}\n                    data-testid=\"button-lookup-submit\"\n                  >\n                    {isSearching ? 'Searching...' : 'Access My Account'}\n                  </Button>\n\n                  <div className=\"relative\">\n                    <div className=\"absolute inset-0 flex items-center\">\n                      <span className=\"w-full border-t\" />\n                    </div>\n                    <div className=\"relative flex justify-center text-xs uppercase\">\n                      <span className=\"bg-background px-2 text-muted-foreground\">\n                        Or\n                      </span>\n                    </div>\n                  </div>\n\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => setVerificationStep('phone-lookup')}\n                    className=\"w-full\"\n                    data-testid=\"button-phone-login\"\n                  >\n                    <Phone className=\"w-4 h-4 mr-2\" />\n                    Login with Phone Number\n                  </Button>\n\n                  {lookupSuccess && (\n                    <div className=\"bg-green-500/10 border border-green-500/20 rounded-lg p-4 text-sm\">\n                      <div className=\"flex items-start gap-3\">\n                        <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-500 flex-shrink-0 mt-0.5\" />\n                        <div className=\"text-green-700 dark:text-green-400\">\n                          <p className=\"font-medium mb-1\">Success</p>\n                          <p>{lookupSuccess}</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {lookupError && (\n                    <div className=\"bg-destructive/10 border border-destructive/20 rounded-lg p-4 text-sm\">\n                      <div className=\"flex items-start gap-3\">\n                        <AlertCircle className=\"w-5 h-5 text-destructive flex-shrink-0 mt-0.5\" />\n                        <div className=\"text-destructive\">\n                          <p className=\"font-medium mb-1\">Error</p>\n                          <p>{lookupError}</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            ) : verificationStep === 'phone-lookup' ? (\n              <Card className=\"max-w-md mx-auto\">\n                <CardHeader>\n                  <CardTitle>Login with Phone Number</CardTitle>\n                  <CardDescription>\n                    Enter your phone number and we'll send a login link to your email\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"phone-lookup-input\">\n                      Phone Number\n                    </Label>\n                    <Input\n                      id=\"phone-lookup-input\"\n                      type=\"tel\"\n                      placeholder=\"(512) 555-1234\"\n                      value={phoneLoginNumber}\n                      onChange={(e) => setPhoneLoginNumber(e.target.value)}\n                      onKeyDown={(e) => e.key === 'Enter' && handlePhoneLookup()}\n                      data-testid=\"input-phone-lookup\"\n                    />\n                  </div>\n\n                  <Button\n                    onClick={handlePhoneLookup}\n                    className=\"w-full\"\n                    disabled={!phoneLoginNumber.trim() || isLookingUp}\n                    data-testid=\"button-phone-lookup-submit\"\n                  >\n                    {isLookingUp ? 'Looking up...' : 'Find My Account'}\n                  </Button>\n\n                  <Button\n                    variant=\"ghost\"\n                    onClick={handleBackToLookup}\n                    className=\"w-full\"\n                    data-testid=\"button-back-to-email\"\n                  >\n                    Back to Email Login\n                  </Button>\n\n                  {lookupSuccess && (\n                    <div className=\"bg-green-500/10 border border-green-500/20 rounded-lg p-4 text-sm\">\n                      <div className=\"flex items-start gap-3\">\n                        <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-500 flex-shrink-0 mt-0.5\" />\n                        <div className=\"text-green-700 dark:text-green-400\">\n                          <p className=\"font-medium mb-1\">Success</p>\n                          <p>{lookupSuccess}</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {lookupError && (\n                    <div className=\"bg-destructive/10 border border-destructive/20 rounded-lg p-4 text-sm\">\n                      <div className=\"flex items-start gap-3\">\n                        <AlertCircle className=\"w-5 h-5 text-destructive flex-shrink-0 mt-0.5\" />\n                        <div className=\"text-destructive\">\n                          <p className=\"font-medium mb-1\">Error</p>\n                          <p>{lookupError}</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            ) : verificationStep === 'phone-email-found' ? (\n              <Card className=\"max-w-md mx-auto\">\n                <CardHeader>\n                  <CardTitle>Account Found!</CardTitle>\n                  <CardDescription>\n                    We'll send a login link to your email address\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"bg-primary/10 border border-primary/20 rounded-lg p-4\">\n                    <div className=\"flex items-start gap-3\">\n                      <Mail className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                      <div>\n                        <p className=\"font-medium mb-1\">Email Address</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {maskedEmail}\n                        </p>\n                        <p className=\"text-xs text-muted-foreground mt-2\">\n                          For security, we've hidden part of your email address\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <Button\n                    onClick={handleSendPhoneMagicLink}\n                    className=\"w-full\"\n                    disabled={isSendingLink}\n                    data-testid=\"button-send-phone-magic-link\"\n                  >\n                    {isSendingLink ? 'Sending...' : 'Send Login Link'}\n                  </Button>\n\n                  <Button\n                    variant=\"ghost\"\n                    onClick={handleBackToLookup}\n                    className=\"w-full\"\n                    data-testid=\"button-back-from-phone\"\n                  >\n                    Use Different Method\n                  </Button>\n\n                  {lookupSuccess && (\n                    <div className=\"bg-green-500/10 border border-green-500/20 rounded-lg p-4 text-sm\">\n                      <div className=\"flex items-start gap-3\">\n                        <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-500 flex-shrink-0 mt-0.5\" />\n                        <div className=\"text-green-700 dark:text-green-400\">\n                          <p className=\"font-medium mb-1\">Success</p>\n                          <p>{lookupSuccess}</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {lookupError && (\n                    <div className=\"bg-destructive/10 border border-destructive/20 rounded-lg p-4 text-sm\">\n                      <div className=\"flex items-start gap-3\">\n                        <AlertCircle className=\"w-5 h-5 text-destructive flex-shrink-0 mt-0.5\" />\n                        <div className=\"text-destructive\">\n                          <p className=\"font-medium mb-1\">Error</p>\n                          <p>{lookupError}</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            ) : verificationStep === 'verify-code' ? (\n              <Card className=\"max-w-md mx-auto\">\n                <CardHeader>\n                  <CardTitle>Enter Verification Code</CardTitle>\n                  <CardDescription>\n                    {verificationMessage}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"verification-code\">\n                      {lookupType === 'phone' ? '6-Digit Code' : 'Check your email for the access link'}\n                    </Label>\n                    {lookupType === 'phone' && (\n                      <>\n                        <Input\n                          id=\"verification-code\"\n                          type=\"text\"\n                          placeholder=\"123456\"\n                          value={verificationCode}\n                          onChange={(e) => setVerificationCode(e.target.value.replace(/\\D/g, '').slice(0, 6))}\n                          onKeyDown={(e) => e.key === 'Enter' && handleVerifyCode()}\n                          maxLength={6}\n                          data-testid=\"input-verification-code\"\n                        />\n                        <p className=\"text-xs text-muted-foreground\">\n                          Enter the 6-digit code sent to {lookupValue}\n                        </p>\n                      </>\n                    )}\n                    {lookupType === 'email' && (\n                      <div className=\"bg-primary/10 border border-primary/20 rounded-lg p-4\">\n                        <div className=\"flex items-start gap-3\">\n                          <Mail className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                          <div>\n                            <p className=\"font-medium mb-1\">Check your email</p>\n                            <p className=\"text-sm text-muted-foreground\">\n                              We sent a secure access link to {lookupValue}. Click the link in the email to access your portal.\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n\n                  {lookupType === 'phone' && (\n                    <Button\n                      onClick={handleVerifyCode}\n                      className=\"w-full\"\n                      disabled={verificationCode.length !== 6 || isVerifying}\n                      data-testid=\"button-verify-code\"\n                    >\n                      {isVerifying ? 'Verifying...' : 'Verify Code'}\n                    </Button>\n                  )}\n\n                  <Button\n                    variant=\"outline\"\n                    onClick={handleBackToLookup}\n                    className=\"w-full\"\n                    data-testid=\"button-back-to-lookup\"\n                  >\n                    Try Another Method\n                  </Button>\n\n                  {lookupSuccess && (\n                    <div className=\"bg-green-500/10 border border-green-500/20 rounded-lg p-4 text-sm\">\n                      <div className=\"flex items-start gap-3\">\n                        <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-500 flex-shrink-0 mt-0.5\" />\n                        <div className=\"text-green-700 dark:text-green-400\">\n                          <p className=\"font-medium mb-1\">Success</p>\n                          <p>{lookupSuccess}</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {lookupError && (\n                    <div className=\"bg-destructive/10 border border-destructive/20 rounded-lg p-4 text-sm\">\n                      <div className=\"flex items-start gap-3\">\n                        <AlertCircle className=\"w-5 h-5 text-destructive flex-shrink-0 mt-0.5\" />\n                        <div className=\"text-destructive\">\n                          <p className=\"font-medium mb-1\">Error</p>\n                          <p>{lookupError}</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            ) : verificationStep === 'select-account' ? (\n              <Card className=\"max-w-2xl mx-auto\">\n                <CardHeader>\n                  <CardTitle>Select Your Account</CardTitle>\n                  <CardDescription>\n                    We found multiple accounts associated with your contact information. Please select which account you'd like to access.\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  {availableAccounts.map((account) => (\n                    <Card\n                      key={account.id}\n                      className=\"hover-elevate active-elevate-2 cursor-pointer\"\n                      onClick={() => handleSelectAccount(account.id)}\n                      data-testid={`account-option-${account.id}`}\n                    >\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-start gap-3\">\n                          {account.type === 'Commercial' ? (\n                            <Users className=\"w-6 h-6 text-primary flex-shrink-0 mt-0.5\" />\n                          ) : (\n                            <Home className=\"w-6 h-6 text-primary flex-shrink-0 mt-0.5\" />\n                          )}\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <p className=\"font-semibold\">{account.name}</p>\n                              <Badge variant=\"secondary\" className=\"text-xs\">\n                                {account.type}\n                              </Badge>\n                            </div>\n                            {account.address && (\n                              <p className=\"text-sm text-muted-foreground flex items-start gap-1\">\n                                <MapPin className=\"w-3 h-3 flex-shrink-0 mt-0.5\" />\n                                {account.address}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n\n                  <Button\n                    variant=\"outline\"\n                    onClick={handleBackToLookup}\n                    className=\"w-full mt-4\"\n                    data-testid=\"button-back-to-lookup-from-select\"\n                  >\n                    Back\n                  </Button>\n                </CardContent>\n              </Card>\n            ) : null\n          ) : (\n            <div className=\"space-y-6\">\n              {isLoading ? (\n                <div className=\"relative\">\n                  {/* Full-screen loading overlay */}\n                  <div className=\"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center\">\n                    <div className=\"text-center space-y-4 p-8 max-w-md\">\n                      <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto\"></div>\n                      <div className=\"space-y-2\">\n                        <h3 className=\"text-xl font-semibold\">Loading Your Account</h3>\n                        <p className=\"text-muted-foreground\">\n                          We're fetching your service history, appointments, and account details...\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Background skeleton structure for visual reference */}\n                  <div className=\"space-y-6 opacity-30 pointer-events-none\">\n                    <Card>\n                      <CardHeader className=\"flex flex-row items-center justify-between\">\n                        <div className=\"flex items-center gap-3\">\n                          <Skeleton className=\"h-8 w-8 rounded-full\" />\n                          <div>\n                            <Skeleton className=\"h-6 w-32 mb-2\" />\n                            <Skeleton className=\"h-4 w-24\" />\n                          </div>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <Skeleton className=\"h-10 w-32\" />\n                          <Skeleton className=\"h-10 w-28\" />\n                          <Skeleton className=\"h-10 w-24\" />\n                        </div>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"space-y-4\">\n                          <Skeleton className=\"h-4 w-32\" />\n                          <div className=\"grid md:grid-cols-2 gap-4\">\n                            <Skeleton className=\"h-20\" />\n                            <Skeleton className=\"h-20\" />\n                          </div>\n                          <Skeleton className=\"h-4 w-32 mt-6\" />\n                          <div className=\"space-y-2\">\n                            <Skeleton className=\"h-20\" />\n                            <Skeleton className=\"h-20\" />\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                    \n                    <div className=\"grid md:grid-cols-2 gap-6\">\n                      <Card>\n                        <CardHeader>\n                          <Skeleton className=\"h-6 w-48\" />\n                          <Skeleton className=\"h-4 w-32 mt-2\" />\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"space-y-4\">\n                            <Skeleton className=\"h-32\" />\n                            <Skeleton className=\"h-32\" />\n                          </div>\n                        </CardContent>\n                      </Card>\n                      \n                      <Card>\n                        <CardHeader>\n                          <Skeleton className=\"h-6 w-40\" />\n                          <Skeleton className=\"h-4 w-28 mt-2\" />\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"space-y-4\">\n                            <Skeleton className=\"h-32\" />\n                            <Skeleton className=\"h-32\" />\n                          </div>\n                        </CardContent>\n                      </Card>\n                    </div>\n                    \n                    <Card>\n                      <CardHeader>\n                        <Skeleton className=\"h-6 w-36\" />\n                        <Skeleton className=\"h-4 w-48 mt-2\" />\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"grid md:grid-cols-2 gap-4\">\n                          <Skeleton className=\"h-40\" />\n                          <Skeleton className=\"h-40\" />\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </div>\n                </div>\n              ) : error ? (\n                <Card>\n                  <CardContent className=\"pt-6\">\n                    <div className=\"text-center mb-6\">\n                      <AlertCircle className=\"w-12 h-12 mx-auto mb-4 text-destructive\" />\n                      <h3 className=\"text-xl font-semibold mb-2\">Error Loading Data</h3>\n                      <p className=\"text-muted-foreground mb-4\">\n                        We couldn't load your account information. Please try again.\n                      </p>\n                      <Button onClick={() => setCustomerId(null)} data-testid=\"button-try-again\">\n                        Try Again\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              ) : customerData ? (\n                <>\n                  <Card>\n                    <CardHeader className=\"flex flex-row items-center justify-between gap-4 flex-wrap\">\n                      <div className=\"flex items-center gap-3\">\n                        <User className=\"w-8 h-8 text-primary\" />\n                        <div>\n                          <CardTitle>{customerData.customer.name}</CardTitle>\n                          <CardDescription>Customer Account</CardDescription>\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2 flex-wrap\">\n                        <Button\n                          onClick={openScheduler}\n                          data-testid=\"button-schedule-appointment\"\n                        >\n                          <Calendar className=\"w-4 h-4 mr-2\" />\n                          Schedule Appointment\n                        </Button>\n                        <Button\n                          asChild\n                          variant=\"outline\"\n                          data-testid=\"button-call\"\n                        >\n                          <a href={`tel:${phoneConfig.tel}`}>\n                            <PhoneIcon className=\"w-4 h-4 mr-2\" />\n                            Call {phoneConfig.display}\n                          </a>\n                        </Button>\n                        <Button\n                          asChild\n                          variant=\"outline\"\n                          data-testid=\"button-text\"\n                        >\n                          <a href={`sms:${phoneConfig.tel}`}>\n                            <MessageSquare className=\"w-4 h-4 mr-2\" />\n                            Text Us\n                          </a>\n                        </Button>\n                        <Button\n                          variant=\"outline\"\n                          data-testid=\"button-email-us\"\n                          onClick={() => {\n                            // Pre-fill form with customer data\n                            setEmailUsName(customerData?.customer?.name || \"\");\n                            setEmailUsEmail(customerData?.customer?.email || \"\");\n                            setEmailUsPhone(customerData?.customer?.phoneNumber || \"\");\n                            setEmailUsSubject(\"\");\n                            setEmailUsMessage(\"\");\n                            setEmailUsOpen(true);\n                          }}\n                        >\n                          <Mail className=\"w-4 h-4 mr-2\" />\n                          Email Us\n                        </Button>\n                        {availableCustomerIds.length > 1 && (\n                          <Button\n                            variant=\"outline\"\n                            onClick={handleSwitchAccount}\n                            data-testid=\"button-switch-account\"\n                          >\n                            <Users className=\"w-4 h-4 mr-2\" />\n                            Switch Account\n                          </Button>\n                        )}\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <h3 className=\"text-sm font-semibold\">Contact Information</h3>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={handleEditContacts}\n                            data-testid=\"button-edit-contacts\"\n                          >\n                            Edit\n                          </Button>\n                        </div>\n                        \n                        {customerData.customer.contacts && customerData.customer.contacts.length > 0 ? (\n                          <div className=\"space-y-3\">\n                            {customerData.customer.contacts.map((contact, index) => {\n                              const isEmail = contact.type === 'Email';\n                              const isPhone = contact.type === 'Phone' || contact.type === 'MobilePhone';\n                              \n                              if (!isEmail && !isPhone) return null;\n                              \n                              return (\n                                <div key={contact.id} className=\"flex items-start gap-3 p-3 bg-muted/50 rounded-lg\">\n                                  {isEmail ? (\n                                    <Mail className=\"w-4 h-4 text-primary flex-shrink-0 mt-0.5\" />\n                                  ) : (\n                                    <PhoneIcon className=\"w-4 h-4 text-primary flex-shrink-0 mt-0.5\" />\n                                  )}\n                                  <div className=\"flex-1 min-w-0\">\n                                    <p className=\"text-xs text-muted-foreground mb-0.5\">\n                                      {contact.type === 'MobilePhone' ? 'Mobile' : contact.type}\n                                    </p>\n                                    <p className=\"font-medium break-all\" data-testid={`contact-${contact.type.toLowerCase()}-${index}`}>\n                                      {contact.value}\n                                    </p>\n                                    {contact.memo && contact.memo !== 'email' && contact.memo !== 'Phone' && contact.memo !== 'mobile' && (\n                                      <p className=\"text-xs text-muted-foreground mt-0.5\">\n                                        {contact.memo}\n                                      </p>\n                                    )}\n                                  </div>\n                                  <Button\n                                    variant=\"ghost\"\n                                    size=\"sm\"\n                                    onClick={() => {\n                                      setContactToDelete({\n                                        id: contact.id,\n                                        type: contact.type,\n                                        value: contact.value\n                                      });\n                                      setDeleteContactDialogOpen(true);\n                                    }}\n                                    data-testid={`button-delete-contact-${contact.id}`}\n                                    className=\"flex-shrink-0 text-destructive hover:text-destructive\"\n                                  >\n                                    Delete\n                                  </Button>\n                                </div>\n                              );\n                            })}\n                          </div>\n                        ) : (\n                          <div className=\"grid md:grid-cols-2 gap-4\">\n                            <div>\n                              <p className=\"text-sm text-muted-foreground mb-1\">Phone</p>\n                              <p className=\"font-medium\" data-testid=\"text-customer-phone\">{customerData.customer.phoneNumber || 'Not provided'}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-sm text-muted-foreground mb-1\">Email</p>\n                              <p className=\"font-medium\" data-testid=\"text-customer-email\">{customerData.customer.email || 'Not provided'}</p>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </CardContent>\n                  </Card>\n\n                  {/* 4 Dashboard Cards - Quick Stats */}\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n                    {/* VIP Status Card - FIRST POSITION with visual variants */}\n                    <AspectRatio ratio={1 / 1}>\n                      {(() => {\n                        const membership = customerData.memberships && customerData.memberships.length > 0 ? customerData.memberships[0] : null;\n                        const membershipTypeName = membership?.membershipType?.toLowerCase() || '';\n                        \n                        // Determine variant based on membership type\n                        let variant = {\n                          bgClass: 'bg-background',\n                          borderClass: 'border-primary/20',\n                          iconClass: 'text-primary',\n                          icon: Crown,\n                          name: 'VIP'\n                        };\n                        \n                        if (membershipTypeName.includes('platinum')) {\n                          variant = {\n                            bgClass: 'bg-gradient-to-br from-purple-50 to-slate-50 dark:from-purple-950/20 dark:to-slate-950/20',\n                            borderClass: 'border-purple-300/50 dark:border-purple-700/50',\n                            iconClass: 'text-purple-600 dark:text-purple-400',\n                            icon: Crown,\n                            name: 'Platinum'\n                          };\n                        } else if (membershipTypeName.includes('silver')) {\n                          variant = {\n                            bgClass: 'bg-gradient-to-br from-slate-50 to-gray-50 dark:from-slate-900/20 dark:to-gray-900/20',\n                            borderClass: 'border-slate-300/50 dark:border-slate-600/50',\n                            iconClass: 'text-slate-600 dark:text-slate-400',\n                            icon: Shield,\n                            name: 'Silver'\n                          };\n                        } else if (membershipTypeName.includes('rental')) {\n                          variant = {\n                            bgClass: 'bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20',\n                            borderClass: 'border-blue-300/50 dark:border-blue-700/50',\n                            iconClass: 'text-blue-600 dark:text-blue-400',\n                            icon: Building2,\n                            name: 'Rental'\n                          };\n                        } else if (membershipTypeName.includes('commercial')) {\n                          variant = {\n                            bgClass: 'bg-gradient-to-br from-slate-900 to-slate-800 dark:from-slate-950 dark:to-slate-900',\n                            borderClass: 'border-amber-400/50 dark:border-amber-500/50',\n                            iconClass: 'text-amber-500 dark:text-amber-400',\n                            icon: Briefcase,\n                            name: 'Commercial'\n                          };\n                        }\n                        \n                        const IconComponent = variant.icon;\n                        const isExpired = membership?.isExpired || false;\n                        const isActive = membership && !isExpired;\n                        \n                        return (\n                          <Card className={`hover-elevate w-full h-full overflow-hidden cursor-pointer border-2 ${variant.borderClass} ${variant.bgClass}`} data-testid=\"card-vip-status\" onClick={() => {\n                            const element = document.getElementById('vip-membership-section');\n                            element?.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                          }}>\n                            <CardContent className=\"p-4 flex flex-col items-center justify-center text-center w-full h-full relative\">\n                              <IconComponent className={`w-8 h-8 mb-2 ${variant.iconClass}`} />\n                              {isActive ? (\n                                <>\n                                  <div className=\"text-base font-bold mb-1\">\n                                    {variant.name} Member\n                                  </div>\n                                  <p className=\"text-xs text-muted-foreground mb-1 truncate w-full px-2\">\n                                    {membership.membershipType}\n                                  </p>\n                                  {membership.expirationDate && (\n                                    <p className=\"text-xs text-muted-foreground mb-1\">\n                                      Until {new Date(membership.expirationDate).toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}\n                                    </p>\n                                  )}\n                                  <Badge variant=\"default\" className=\"text-xs mt-1\">Active</Badge>\n                                </>\n                              ) : isExpired && membership ? (\n                                <>\n                                  <div className=\"text-base font-bold mb-1\">\n                                    Membership Expired\n                                  </div>\n                                  <p className=\"text-xs text-muted-foreground mb-1 truncate w-full px-2\">\n                                    {membership.membershipType}\n                                  </p>\n                                  {membership.expirationDate && (\n                                    <p className=\"text-xs text-muted-foreground mb-1\">\n                                      Expired {new Date(membership.expirationDate).toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}\n                                    </p>\n                                  )}\n                                  <Button size=\"sm\" variant=\"default\" className=\"text-xs mt-1\" onClick={(e) => {\n                                    e.stopPropagation();\n                                    window.open('/vip-membership', '_blank');\n                                  }}>\n                                    Renew Now\n                                  </Button>\n                                </>\n                              ) : (\n                                <>\n                                  <div className=\"text-base font-bold mb-1\">\n                                    Not a Member\n                                  </div>\n                                  <p className=\"text-xs text-muted-foreground mb-2\">\n                                    Join our VIP Program\n                                  </p>\n                                  <Button size=\"sm\" variant=\"default\" className=\"text-xs\" onClick={(e) => {\n                                    e.stopPropagation();\n                                    window.open('/vip-membership', '_blank');\n                                  }}>\n                                    Start Membership\n                                  </Button>\n                                </>\n                              )}\n                              <p className=\"text-xs text-primary mt-2 absolute bottom-2\">View Details â†’</p>\n                            </CardContent>\n                          </Card>\n                        );\n                      })()}\n                    </AspectRatio>\n\n                    {/* Loyal Customer Card - Service History with Enhanced Messaging */}\n                    {customerStats && (\n                      <AspectRatio ratio={1 / 1}>\n                        {(() => {\n                          // Handle 0 services case first\n                          if (customerStats.serviceCount === 0 || customerStats.topPercentile === null) {\n                            return (\n                              <Card className=\"hover-elevate w-full h-full overflow-hidden cursor-pointer\" data-testid=\"card-service-history\" onClick={() => {\n                                const element = document.getElementById('job-history-section');\n                                element?.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                              }}>\n                                <CardContent className=\"p-4 flex flex-col items-center justify-center text-center w-full h-full relative\">\n                                  <Home className=\"w-8 h-8 text-primary mb-2\" />\n                                  <div className=\"text-base font-bold mb-1\">\n                                    Welcome!\n                                  </div>\n                                  <p className=\"text-xs text-muted-foreground mb-2\">\n                                    New to Economy Plumbing\n                                  </p>\n                                  <Badge variant=\"secondary\" className=\"text-xs mb-1\">\n                                    ðŸŽ‰ First Time Customer\n                                  </Badge>\n                                  <p className=\"text-xs text-muted-foreground mt-1 px-2 line-clamp-3\">\n                                    We're excited to serve you! Schedule your first service or call us at (512) 259-7222 for any plumbing needs.\n                                  </p>\n                                  <p className=\"text-xs text-primary mt-2 absolute bottom-2\">Get Started â†’</p>\n                                </CardContent>\n                              </Card>\n                            );\n                          }\n                          \n                          // Flip the percentile: show how many they're BETTER than (not how many are better than them)\n                          const betterThanPercentile = Math.min(99, 100 - customerStats.topPercentile); // Cap at 99%\n                          \n                          // Determine message tier and styling based on performance\n                          let message = '';\n                          let icon = Heart;\n                          let badgeVariant: \"default\" | \"secondary\" | \"outline\" = \"default\";\n                          let emoji = 'â­';\n                          \n                          if (customerStats.topPercentile <= 5) {\n                            // Elite tier - Top 5%\n                            message = `You're in our elite ${customerStats.topPercentile}%! You've had more services than ${betterThanPercentile}% of our customers. Thank you for being such a loyal customer!`;\n                            icon = Star;\n                            emoji = 'ðŸŒŸ';\n                            badgeVariant = \"default\";\n                          } else if (customerStats.topPercentile <= 25) {\n                            // Great tier - Top 25%\n                            message = `You've had more services than ${betterThanPercentile}% of our customers. We really appreciate your business!`;\n                            icon = Heart;\n                            emoji = 'â­';\n                            badgeVariant = \"default\";\n                          } else if (customerStats.topPercentile <= 50) {\n                            // Good tier - Top 50%\n                            message = `Thank you for choosing us! You've had more services than ${betterThanPercentile}% of our customers.`;\n                            icon = Heart;\n                            emoji = 'âœ“';\n                            badgeVariant = \"secondary\";\n                          } else {\n                            // Encourage more engagement\n                            message = `We're here when you need us! Remember, we offer maintenance plans, emergency services, and more. Give us a call anytime at (512) 259-7222!`;\n                            icon = Phone;\n                            emoji = 'ðŸ“ž';\n                            badgeVariant = \"outline\";\n                          }\n                          \n                          const IconComponent = icon;\n                          \n                          return (\n                            <Card className=\"hover-elevate w-full h-full overflow-hidden cursor-pointer\" data-testid=\"card-service-history\" onClick={() => {\n                              const element = document.getElementById('job-history-section');\n                              element?.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                            }}>\n                              <CardContent className=\"p-4 flex flex-col items-center justify-center text-center w-full h-full relative\">\n                                <IconComponent className=\"w-8 h-8 text-primary mb-2\" />\n                                <div className=\"text-base font-bold mb-1\">\n                                  {customerStats.topPercentile <= 5 ? 'Elite Customer!' : \n                                   customerStats.topPercentile <= 25 ? 'Valued Customer!' :\n                                   customerStats.topPercentile <= 50 ? 'Thank You!' : 'We Miss You!'}\n                                </div>\n                                <p className=\"text-xs text-muted-foreground mb-2\">\n                                  {customerStats.serviceCount} service{customerStats.serviceCount === 1 ? '' : 's'} with us\n                                </p>\n                                {customerStats.topPercentile <= 50 && (\n                                  <Badge variant={badgeVariant} className=\"text-xs mb-1\">\n                                    {emoji} Better than {betterThanPercentile}%\n                                  </Badge>\n                                )}\n                                <p className=\"text-xs text-muted-foreground mt-1 px-2 line-clamp-3\">\n                                  {message}\n                                </p>\n                                <p className=\"text-xs text-primary mt-2 absolute bottom-2\">View History â†’</p>\n                              </CardContent>\n                            </Card>\n                          );\n                        })()}\n                      </AspectRatio>\n                    )}\n\n                    {/* Referrals Card - Show Account Credit */}\n                    <AspectRatio ratio={1 / 1}>\n                      <Card className=\"hover-elevate w-full h-full overflow-hidden cursor-pointer\" data-testid=\"card-referrals\" onClick={() => {\n                        const element = document.getElementById('referral-section');\n                        element?.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                      }}>\n                        <CardContent className=\"p-4 flex flex-col items-center justify-center text-center w-full h-full relative\">\n                          <Share2 className=\"w-8 h-8 text-primary mb-2\" />\n                          {(() => {\n                            const creditedReferrals = referralsData?.referrals.filter((r: any) => r.status === 'credited') || [];\n                            const totalCredit = creditedReferrals.reduce((sum: number, r: any) => sum + (r.creditAmount || 0), 0);\n                            return (\n                              <>\n                                <div className=\"text-2xl font-bold text-primary mb-1\" data-testid=\"text-account-credit\">\n                                  {formatCurrency(totalCredit / 100)}\n                                </div>\n                                <p className=\"text-xs text-muted-foreground mb-1\">\n                                  Account Credit\n                                </p>\n                                <p className=\"text-xs text-muted-foreground\">\n                                  {referralsData?.referrals.length || 0} referral{referralsData?.referrals.length === 1 ? '' : 's'}\n                                </p>\n                              </>\n                            );\n                          })()}\n                          <p className=\"text-xs text-primary mt-2 absolute bottom-2\">View Details â†’</p>\n                        </CardContent>\n                      </Card>\n                    </AspectRatio>\n\n                    {/* Upcoming Appointments Card - Show Next Appointment Details */}\n                    <AspectRatio ratio={1 / 1}>\n                      <Card className=\"hover-elevate w-full h-full overflow-hidden cursor-pointer\" data-testid=\"card-upcoming-appointments\" onClick={() => {\n                        const element = document.getElementById('appointments-section');\n                        element?.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                      }}>\n                        <CardContent className=\"p-4 flex flex-col items-center justify-center text-center w-full h-full relative\">\n                          <Calendar className=\"w-8 h-8 text-primary mb-2\" />\n                          {upcomingAppointments.length > 0 ? (\n                            <>\n                              <div className=\"text-base font-bold mb-1\" data-testid=\"text-next-appointment-date\">\n                                {new Date(upcomingAppointments[0].start).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\n                              </div>\n                              <p className=\"text-xs text-muted-foreground mb-1\">\n                                {formatTime(upcomingAppointments[0].start)}\n                              </p>\n                              {upcomingAppointments[0].businessUnitName && (\n                                <p className=\"text-xs text-muted-foreground truncate w-full px-1\">\n                                  {upcomingAppointments[0].businessUnitName}\n                                </p>\n                              )}\n                              {upcomingAppointments.length > 1 && (\n                                <Badge variant=\"secondary\" className=\"text-xs mt-1\">\n                                  +{upcomingAppointments.length - 1} more\n                                </Badge>\n                              )}\n                            </>\n                          ) : (\n                            <>\n                              <div className=\"text-base font-bold mb-1\">\n                                None Scheduled\n                              </div>\n                              <p className=\"text-xs text-muted-foreground\">\n                                No upcoming appointments\n                              </p>\n                            </>\n                          )}\n                          <p className=\"text-xs text-primary mt-2 absolute bottom-2\">View All â†’</p>\n                        </CardContent>\n                      </Card>\n                    </AspectRatio>\n                  </div>\n\n                  {/* Savings Calculator - Show value to members and missed savings to non-members */}\n                  {(() => {\n                    // Calculate total from paid invoices\n                    const paidInvoices = customerData.invoices.filter(inv => \n                      inv.status.toLowerCase().includes('paid') || inv.status.toLowerCase().includes('complete')\n                    );\n                    const totalPaid = paidInvoices.reduce((sum, inv) => sum + inv.total, 0);\n                    \n                    // VIP members typically get 15% off\n                    const memberSavingsRate = 0.15;\n                    const estimatedSavings = totalPaid * memberSavingsRate;\n                    \n                    const isVIPMember = customerData.memberships && customerData.memberships.length > 0;\n                    \n                    // Only show if there's meaningful data\n                    if (totalPaid < 100) return null;\n                    \n                    return (\n                      <Card className={`border-2 ${isVIPMember ? 'border-primary/30 bg-gradient-to-br from-primary/10 via-primary/5 to-background' : 'border-amber-500/30 bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-background'}`}>\n                        <CardHeader>\n                          <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n                            <div className=\"flex items-center gap-3\">\n                              <div className={`w-12 h-12 rounded-full flex items-center justify-center ${isVIPMember ? 'bg-primary/20' : 'bg-amber-500/20'}`}>\n                                <TrendingUp className={`w-6 h-6 ${isVIPMember ? 'text-primary' : 'text-amber-600 dark:text-amber-500'}`} />\n                              </div>\n                              <div>\n                                <CardTitle className=\"text-2xl\">\n                                  {isVIPMember ? (\n                                    <span className=\"text-primary\">You've Saved {formatCurrency(estimatedSavings)}</span>\n                                  ) : (\n                                    <span className=\"text-amber-600 dark:text-amber-500\">Save {formatCurrency(estimatedSavings)}</span>\n                                  )}\n                                </CardTitle>\n                                <CardDescription className=\"mt-1\">\n                                  {isVIPMember ? 'with your VIP membership' : 'by becoming a VIP member'}\n                                </CardDescription>\n                              </div>\n                            </div>\n                            {!isVIPMember && (\n                              <Badge variant=\"outline\" className=\"text-amber-600 border-amber-500/50 dark:text-amber-500\">\n                                Opportunity\n                              </Badge>\n                            )}\n                          </div>\n                        </CardHeader>\n                        <CardContent className=\"space-y-4\">\n                          <div className=\"flex items-center justify-between p-4 bg-background/50 rounded-lg border\">\n                            <div>\n                              <p className=\"text-sm text-muted-foreground\">Total Services</p>\n                              <p className=\"text-2xl font-bold\" data-testid=\"text-total-paid\">{formatCurrency(totalPaid)}</p>\n                            </div>\n                            <DollarSign className=\"w-8 h-8 text-muted-foreground/30\" />\n                          </div>\n                          \n                          {isVIPMember ? (\n                            <div className=\"space-y-3\">\n                              <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                                As a VIP member, you've enjoyed <strong className=\"text-primary\">member-only discounts</strong> on every service call, plus priority scheduling, no trip charges, and waived diagnostic fees.\n                              </p>\n                              <div className=\"flex items-center gap-2 p-3 bg-primary/10 rounded-lg border border-primary/20\">\n                                <CheckCircle className=\"w-5 h-5 text-primary flex-shrink-0\" />\n                                <p className=\"text-sm font-medium\">\n                                  Your membership is saving you money on every visit!\n                                </p>\n                              </div>\n                            </div>\n                          ) : (\n                            <div className=\"space-y-3\">\n                              <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                                Based on your service history, you could save approximately <strong className=\"text-amber-600 dark:text-amber-500\">{formatCurrency(estimatedSavings)}</strong> per year as a VIP member, plus enjoy priority scheduling, no trip charges, and waived diagnostic fees.\n                              </p>\n                              <p className=\"text-xs text-muted-foreground italic\">\n                                *Estimated savings based on typical 15% member discount applied to your historical spending\n                              </p>\n                              <Button\n                                asChild\n                                className=\"w-full bg-amber-600 hover:bg-amber-700 text-white dark:bg-amber-500 dark:hover:bg-amber-600\"\n                                size=\"lg\"\n                                data-testid=\"button-join-vip-savings\"\n                              >\n                                <a href=\"/membership-benefits\">\n                                  <Crown className=\"w-4 h-4 mr-2\" />\n                                  Start Saving with VIP Membership\n                                </a>\n                              </Button>\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    );\n                  })()}\n\n                  {/* VIP Membership Status - Shows real data from ServiceTitan */}\n                  <div id=\"vip-membership-section\">\n                  {customerData.memberships && customerData.memberships.length > 0 ? (\n                    <Card className=\"border-primary/20 bg-gradient-to-br from-primary/5 to-background\">\n                      <CardHeader>\n                        <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n                          <div className=\"flex items-center gap-2\">\n                            <Crown className=\"w-6 h-6 text-primary\" />\n                            <div>\n                              <CardTitle>VIP Member</CardTitle>\n                              <CardDescription className=\"mt-1\">\n                                {customerData.memberships[0].membershipType}\n                              </CardDescription>\n                            </div>\n                          </div>\n                          <Badge variant=\"default\" className=\"text-xs bg-primary\">\n                            {customerData.memberships[0].status}\n                          </Badge>\n                        </div>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <div className=\"grid gap-3\">\n                          {customerData.memberships[0].startDate && (\n                            <div className=\"flex items-center justify-between text-sm\">\n                              <span className=\"text-muted-foreground\">Member Since</span>\n                              <span className=\"font-medium\">\n                                {new Date(customerData.memberships[0].startDate).toLocaleDateString('en-US', { \n                                  month: 'short', \n                                  year: 'numeric' \n                                })}\n                              </span>\n                            </div>\n                          )}\n                          {customerData.memberships[0].expirationDate && (\n                            <div className=\"flex items-center justify-between text-sm\">\n                              <span className=\"text-muted-foreground\">Expires</span>\n                              <span className=\"font-medium\">\n                                {new Date(customerData.memberships[0].expirationDate).toLocaleDateString('en-US', { \n                                  month: 'short', \n                                  day: 'numeric',\n                                  year: 'numeric' \n                                })}\n                              </span>\n                            </div>\n                          )}\n                          {customerData.memberships[0].renewalDate && (\n                            <div className=\"flex items-center justify-between text-sm\">\n                              <span className=\"text-muted-foreground\">Next Renewal</span>\n                              <span className=\"font-medium\">\n                                {new Date(customerData.memberships[0].renewalDate).toLocaleDateString('en-US', { \n                                  month: 'short', \n                                  day: 'numeric',\n                                  year: 'numeric' \n                                })}\n                              </span>\n                            </div>\n                          )}\n                        </div>\n\n                        {/* Member Benefits */}\n                        <div className=\"pt-3 border-t\">\n                          <p className=\"text-xs font-medium text-muted-foreground mb-2\">Your Benefits</p>\n                          <div className=\"grid gap-2\">\n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <DollarSign className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                              <span>Savings on EVERY service call</span>\n                            </div>\n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <Star className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                              <span>Priority same-day service</span>\n                            </div>\n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <Shield className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                              <span>No trip charges</span>\n                            </div>\n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <Wrench className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                              <span>Annual plumbing inspection included</span>\n                            </div>\n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <Clock className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                              <span>After-hours service at regular rates</span>\n                            </div>\n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <CheckCircle className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                              <span>Waived diagnostic fees</span>\n                            </div>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ) : (\n                    <Card className=\"border-primary/20 bg-gradient-to-br from-primary/5 to-background\">\n                      <CardHeader>\n                        <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n                          <div className=\"flex items-center gap-2\">\n                            <Crown className=\"w-6 h-6 text-primary\" />\n                            <div>\n                              <CardTitle>VIP Membership</CardTitle>\n                              <CardDescription className=\"mt-1\">\n                                Not a VIP member yet\n                              </CardDescription>\n                            </div>\n                          </div>\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            Available\n                          </Badge>\n                        </div>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <p className=\"text-sm text-muted-foreground\">\n                          Join our VIP Membership program and save on every service call, plus enjoy priority same-day service, no trip charges, and more!\n                        </p>\n\n                        {/* Member Benefits Preview */}\n                        <div className=\"grid gap-2\">\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <DollarSign className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                            <span className=\"text-muted-foreground\">Savings on EVERY service call</span>\n                          </div>\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <Star className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                            <span className=\"text-muted-foreground\">Priority same-day service</span>\n                          </div>\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <Shield className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                            <span className=\"text-muted-foreground\">No trip charges</span>\n                          </div>\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <Wrench className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                            <span className=\"text-muted-foreground\">Annual plumbing inspection</span>\n                          </div>\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <Clock className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                            <span className=\"text-muted-foreground\">After-hours service at regular rates</span>\n                          </div>\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <CheckCircle className=\"w-4 h-4 text-primary flex-shrink-0\" />\n                            <span className=\"text-muted-foreground\">Waived diagnostic fees</span>\n                          </div>\n                        </div>\n\n                        <div className=\"pt-2 border-t\">\n                          <Button\n                            asChild\n                            className=\"w-full\"\n                            data-testid=\"button-vip-membership\"\n                          >\n                            <a href=\"/vip-membership\">\n                              <Crown className=\"w-4 h-4 mr-2\" />\n                              Learn About VIP Membership\n                            </a>\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  )}\n                  </div>\n\n                  {/* Service Locations */}\n                  {customerLocations.length > 0 && (\n                    <Card>\n                      <CardHeader>\n                        <div className=\"flex items-center gap-2\">\n                          <MapPin className=\"w-6 h-6 text-primary\" />\n                          <CardTitle>Service Locations ({customerLocations.length})</CardTitle>\n                        </div>\n                        <CardDescription>\n                          {customerLocations.length === 1 \n                            ? \"Your service address\" \n                            : \"All your service addresses\"}\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"space-y-3\">\n                        {customerLocations.map((location, index) => (\n                          <div\n                            key={location.id}\n                            className=\"flex items-start gap-3 p-4 bg-muted/30 rounded-lg border\"\n                            data-testid={`location-card-${location.id}`}\n                          >\n                            <Home className=\"w-5 h-5 text-primary flex-shrink-0 mt-1\" />\n                            <div className=\"flex-1\">\n                              {location.name && (\n                                <p className=\"text-xs text-muted-foreground mb-1\">\n                                  {location.name}\n                                </p>\n                              )}\n                              <p className=\"font-medium\" data-testid={`text-location-street-${location.id}`}>\n                                {location.address.street}\n                              </p>\n                              <p className=\"text-sm text-muted-foreground\">\n                                {location.address.city}, {location.address.state} {location.address.zip}\n                              </p>\n                              {index === 0 && customerLocations.length > 1 && (\n                                <Badge variant=\"secondary\" className=\"mt-2 text-xs\">\n                                  Primary\n                                </Badge>\n                              )}\n                            </div>\n                            {/* Address editing disabled - addresses cannot be changed for security */}\n                          </div>\n                        ))}\n                        <p className=\"text-xs text-muted-foreground text-center pt-2\">\n                          Service addresses are managed by our team for security\n                        </p>\n                      </CardContent>\n                    </Card>\n                  )}\n\n                  {/* Open Estimates - Backend already filters for unsold estimates */}\n                  {(() => {\n                    // Backend now filters for unsold estimates (where soldOn is null)\n                    const openEstimates = customerData.estimates || [];\n\n                    if (openEstimates.length === 0) return null;\n\n                    return (\n                      <Card>\n                        <CardHeader>\n                          <div className=\"flex items-center gap-2\">\n                            <FileText className=\"w-6 h-6 text-primary\" />\n                            <CardTitle>Open Estimates</CardTitle>\n                          </div>\n                          <CardDescription>\n                            Your pending estimates and quotes (valid for 30 days)\n                          </CardDescription>\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"overflow-x-auto pb-2\">\n                            <div className=\"flex gap-4 min-w-max\">\n                              {openEstimates.map((estimate) => (\n                                <Card\n                                  key={estimate.id}\n                                  className=\"w-80 flex-shrink-0 hover-elevate active-elevate-2 cursor-pointer\"\n                                  onClick={() => {\n                                    setSelectedEstimate(estimate);\n                                    setEstimateDetailOpen(true);\n                                  }}\n                                  data-testid={`estimate-card-${estimate.id}`}\n                                >\n                                  <CardContent className=\"p-4\">\n                                    <div className=\"flex items-start justify-between gap-2 mb-3\">\n                                      <div className=\"flex-1\">\n                                        <h4 className=\"font-semibold\">Estimate #{estimate.estimateNumber}</h4>\n                                        {estimate.summary && (\n                                          <p className=\"text-sm text-muted-foreground line-clamp-1\">{estimate.summary}</p>\n                                        )}\n                                      </div>\n                                      <div className=\"flex flex-col gap-1 items-end\">\n                                        {getStatusBadge(estimate.status)}\n                                        {getExpirationBadge(estimate)}\n                                      </div>\n                                    </div>\n                                    <div className=\"space-y-2 text-sm\">\n                                      <div className=\"flex justify-between\">\n                                        <span className=\"text-muted-foreground\">Total:</span>\n                                        <span className=\"font-semibold text-primary\">{formatCurrency(estimate.total)}</span>\n                                      </div>\n                                      <div className=\"flex justify-between\">\n                                        <span className=\"text-muted-foreground\">Created:</span>\n                                        <span>{formatDate(estimate.createdOn)}</span>\n                                      </div>\n                                      {estimate.expiresOn && (\n                                        <div className=\"flex justify-between\">\n                                          <span className=\"text-muted-foreground\">Expires:</span>\n                                          <span>{formatDate(estimate.expiresOn)}</span>\n                                        </div>\n                                      )}\n                                    </div>\n                                  </CardContent>\n                                </Card>\n                              ))}\n                            </div>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    );\n                  })()}\n\n                  {/* Upcoming Appointments */}\n                  <div id=\"appointments-section\">\n                  <Card>\n                    <CardHeader>\n                      <div className=\"flex items-center gap-2\">\n                        <Calendar className=\"w-6 h-6 text-primary\" />\n                        <CardTitle>Upcoming Appointments</CardTitle>\n                      </div>\n                      <CardDescription>\n                        Your scheduled service appointments\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      {upcomingAppointments.length === 0 ? (\n                        <p className=\"text-center py-8 text-muted-foreground\" data-testid=\"text-no-appointments\">\n                          No upcoming appointments\n                        </p>\n                      ) : (\n                        <div className=\"space-y-4\">\n                          {upcomingAppointments.map((appointment) => (\n                            <div\n                              key={appointment.id}\n                              className=\"flex items-start gap-4 p-4 border rounded-lg\"\n                              data-testid={`appointment-${appointment.id}`}\n                            >\n                              <Calendar className=\"w-5 h-5 text-primary mt-1\" />\n                              <div className=\"flex-1\">\n                                <div className=\"flex items-start justify-between gap-2 mb-2\">\n                                  <div>\n                                    <h4 className=\"font-semibold\">{appointment.jobType}</h4>\n                                    {appointment.summary && (\n                                      <p className=\"text-sm text-muted-foreground\">{appointment.summary}</p>\n                                    )}\n                                  </div>\n                                  <div className=\"flex items-center gap-2\">\n                                    {getStatusBadge(appointment.status)}\n                                    <Button\n                                      variant=\"outline\"\n                                      size=\"sm\"\n                                      onClick={() => handleOpenRescheduleDialog(appointment)}\n                                      data-testid={`button-reschedule-${appointment.id}`}\n                                    >\n                                      <CalendarClock className=\"w-4 h-4 mr-1\" />\n                                      Reschedule\n                                    </Button>\n                                  </div>\n                                </div>\n                                <div className=\"text-sm space-y-1\">\n                                  <p>\n                                    <strong>Date:</strong> {formatDate(appointment.start)}\n                                  </p>\n                                  {appointment.arrivalWindowStart && appointment.arrivalWindowEnd && (\n                                    <p>\n                                      <strong>Arrival Window:</strong> {formatTime(appointment.arrivalWindowStart)} - {formatTime(appointment.arrivalWindowEnd)}\n                                    </p>\n                                  )}\n                                  {appointment.jobNumber && (\n                                    <p className=\"text-muted-foreground\">\n                                      Job #{appointment.jobNumber}\n                                    </p>\n                                  )}\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                  </div>\n\n                  {/* Invoices */}\n                  <div id=\"job-history-section\">\n                  <Card>\n                    <CardHeader>\n                      <div className=\"flex items-center gap-2\">\n                        <FileText className=\"w-6 h-6 text-primary\" />\n                        <CardTitle>Invoices</CardTitle>\n                      </div>\n                      <CardDescription>\n                        Your service invoices and payment history\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      {customerData.invoices.length === 0 ? (\n                        <p className=\"text-center py-8 text-muted-foreground\" data-testid=\"text-no-invoices\">\n                          No invoices found\n                        </p>\n                      ) : (\n                        <div className=\"space-y-4\">\n                          {customerData.invoices.map((invoice) => (\n                            <div\n                              key={invoice.id}\n                              className=\"flex items-start gap-4 p-4 border rounded-lg\"\n                              data-testid={`invoice-${invoice.id}`}\n                            >\n                              <DollarSign className=\"w-5 h-5 text-primary mt-1\" />\n                              <div className=\"flex-1\">\n                                <div className=\"flex items-start justify-between gap-2 mb-2\">\n                                  <div>\n                                    <h4 className=\"font-semibold\">Invoice #{invoice.invoiceNumber}</h4>\n                                    {invoice.summary && (\n                                      <p className=\"text-sm text-muted-foreground\">{invoice.summary}</p>\n                                    )}\n                                  </div>\n                                  {getStatusBadge(invoice.status)}\n                                </div>\n                                <div className=\"text-sm space-y-1\">\n                                  <div className=\"flex justify-between\">\n                                    <span><strong>Total:</strong></span>\n                                    <span className=\"font-semibold\">{formatCurrency(invoice.total)}</span>\n                                  </div>\n                                  {invoice.balance > 0 && (\n                                    <div className=\"flex justify-between text-destructive\">\n                                      <span><strong>Balance Due:</strong></span>\n                                      <span className=\"font-semibold\">{formatCurrency(invoice.balance)}</span>\n                                    </div>\n                                  )}\n                                  <p className=\"text-muted-foreground\">\n                                    Created: {formatDate(invoice.createdOn)}\n                                  </p>\n                                  {invoice.dueDate && (\n                                    <p className=\"text-muted-foreground\">\n                                      Due: {formatDate(invoice.dueDate)}\n                                    </p>\n                                  )}\n                                  {invoice.jobNumber && (\n                                    <p className=\"text-muted-foreground\">\n                                      Job #{invoice.jobNumber}\n                                    </p>\n                                  )}\n                                </div>\n                                <div className=\"mt-3 pt-3 border-t\">\n                                  <Button\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                    onClick={() => handleRequestPDF('invoice', invoice.invoiceNumber, invoice.id, {\n                                      customerId: customerData.customer.id,\n                                      customerName: customerData.customer.name,\n                                      customerEmail: customerData.customer.email\n                                    })}\n                                    data-testid={`button-request-invoice-pdf-${invoice.id}`}\n                                  >\n                                    <FileText className=\"w-4 h-4 mr-2\" />\n                                    Request PDF Copy\n                                  </Button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                  </div>\n\n                  {/* Consolidated Referral Section */}\n                  <div id=\"referral-section\">\n                  {referralLinkData && (\n                    <Card className=\"border-primary/20 bg-gradient-to-br from-primary/10 via-primary/5 to-background\">\n                      <CardHeader>\n                        <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center\">\n                              <Gift className=\"w-6 h-6 text-primary\" />\n                            </div>\n                            <div>\n                              <CardTitle>Referral Rewards Program</CardTitle>\n                              <CardDescription className=\"mt-1\">\n                                {referralsData?.referrals.length === 0 \n                                  ? \"Start earning rewards today! Share your link below.\" \n                                  : `You've referred ${referralsData?.referrals.length} ${referralsData?.referrals.length === 1 ? 'friend' : 'friends'} - thank you for spreading the word!`\n                                }\n                              </CardDescription>\n                            </div>\n                          </div>\n                          <Badge variant=\"default\" className=\"bg-primary\">\n                            Active\n                          </Badge>\n                        </div>\n                      </CardHeader>\n                      <CardContent className=\"space-y-6\">\n                        {/* Referral Code */}\n                        <div className=\"p-4 bg-primary/10 rounded-lg border border-primary/20 text-center\">\n                          <p className=\"text-sm font-medium text-muted-foreground mb-2\">Your Referral Code</p>\n                          <p className=\"text-2xl font-bold text-primary tracking-wide\" data-testid=\"text-referral-code\">\n                            {referralLinkData.code}\n                          </p>\n                        </div>\n\n                        {/* Referral Link */}\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"referral-link\">Your Unique Referral Link</Label>\n                          <div className=\"flex gap-2\">\n                            <Input\n                              id=\"referral-link\"\n                              value={referralLinkData.url}\n                              readOnly\n                              className=\"font-mono text-sm\"\n                              data-testid=\"input-referral-link\"\n                            />\n                            <Button\n                              onClick={copyReferralLink}\n                              variant={copied ? \"default\" : \"outline\"}\n                              size=\"icon\"\n                              className={copied ? \"bg-green-600 hover:bg-green-700\" : \"\"}\n                              data-testid=\"button-copy-link\"\n                            >\n                              {copied ? <Check className=\"w-4 h-4\" /> : <Copy className=\"w-4 h-4\" />}\n                            </Button>\n                          </div>\n                        </div>\n\n                        {/* Stats */}\n                        <div className=\"grid grid-cols-3 gap-4\">\n                          <div className=\"p-4 bg-background rounded-lg border text-center\">\n                            <p className=\"text-sm text-muted-foreground mb-1\">Total Referrals</p>\n                            <p className=\"text-2xl font-bold text-primary\" data-testid=\"text-total-referrals-stat\">\n                              {referralsData?.referrals.length || 0}\n                            </p>\n                          </div>\n                          <div className=\"p-4 bg-background rounded-lg border text-center\">\n                            <p className=\"text-sm text-muted-foreground mb-1\">Conversions</p>\n                            <p className=\"text-2xl font-bold text-primary\" data-testid=\"text-conversions\">\n                              {referralLinkData.conversions}\n                            </p>\n                          </div>\n                          <div className=\"p-4 bg-background rounded-lg border text-center\">\n                            <p className=\"text-sm text-muted-foreground mb-1\">Clicks</p>\n                            <p className=\"text-2xl font-bold\" data-testid=\"text-clicks\">\n                              {referralLinkData.clicks}\n                            </p>\n                          </div>\n                        </div>\n\n                        {/* Your Referrals List */}\n                        {referralsData && referralsData.referrals.length > 0 ? (\n                          <div className=\"space-y-3\">\n                            <h4 className=\"font-semibold\">Your Referrals</h4>\n                            {referralsData.referrals.slice(0, 5).map((referral: any) => {\n                              const isReferrer = referral.referrerCustomerId === parseInt(customerId!);\n                              const statusColors: Record<string, string> = {\n                                pending: 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-100',\n                                contacted: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100',\n                                job_completed: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100',\n                                credited: 'bg-primary/10 text-primary'\n                              };\n                              \n                              return (\n                                <div key={referral.id} className=\"p-3 bg-background rounded-lg border\">\n                                  <div className=\"flex items-center justify-between gap-2 mb-1\">\n                                    <p className=\"font-medium text-sm\">\n                                      {isReferrer ? referral.refereeName : referral.referrerName}\n                                    </p>\n                                    <Badge className={statusColors[referral.status] || 'bg-gray-100 text-gray-800'} data-testid={`badge-referral-status-${referral.id}`}>\n                                      {referral.status.replace('_', ' ').replace(/\\b\\w/g, (l: string) => l.toUpperCase())}\n                                    </Badge>\n                                  </div>\n                                  <p className=\"text-xs text-muted-foreground\">\n                                    Submitted: {new Date(referral.submittedAt).toLocaleDateString()}\n                                  </p>\n                                  {referral.status === 'credited' && referral.creditAmount && (\n                                    <p className=\"text-xs text-primary font-medium mt-1\">\n                                      Credit: ${(referral.creditAmount / 100).toFixed(2)}\n                                    </p>\n                                  )}\n                                </div>\n                              );\n                            })}\n                            {referralsData.referrals.length > 5 && (\n                              <p className=\"text-xs text-center text-muted-foreground\">\n                                Showing 5 most recent ({referralsData.referrals.length} total)\n                              </p>\n                            )}\n                          </div>\n                        ) : (\n                          referralsData && (\n                            <div className=\"p-6 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 rounded-lg border border-primary/20 text-center space-y-4\">\n                              <div className=\"flex justify-center\">\n                                <Gift className=\"w-12 h-12 text-primary animate-pulse\" />\n                              </div>\n                              <div className=\"space-y-2\">\n                                <h4 className=\"font-semibold text-lg\">Be the First to Start Earning!</h4>\n                                <p className=\"text-muted-foreground max-w-md mx-auto\">\n                                  You haven't made any referrals yet, but there's great potential waiting! \n                                  Share your unique link with friends and family to start earning $25 rewards.\n                                </p>\n                                <p className=\"text-sm text-muted-foreground\">\n                                  It's simple: they save $25, you earn $25. Everyone wins!\n                                </p>\n                              </div>\n                              <div className=\"flex flex-wrap justify-center gap-3 pt-2\">\n                                <Button \n                                  onClick={() => {\n                                    const text = `Save $25 on your first plumbing service with Economy Plumbing! Use my referral link: ${referralLinkData.url}`;\n                                    const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;\n                                    window.open(url, '_blank', 'width=600,height=400');\n                                  }}\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  className=\"gap-2\"\n                                  data-testid=\"button-share-twitter\"\n                                >\n                                  <Share2 className=\"w-4 h-4\" />\n                                  Share on X\n                                </Button>\n                                <Button \n                                  onClick={() => {\n                                    const text = `Check out Economy Plumbing Services! Save $25 on your first service using my referral link: ${referralLinkData.url}`;\n                                    const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(referralLinkData.url)}&quote=${encodeURIComponent(text)}`;\n                                    window.open(url, '_blank', 'width=600,height=400');\n                                  }}\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  className=\"gap-2\"\n                                  data-testid=\"button-share-facebook\"\n                                >\n                                  <Share2 className=\"w-4 h-4\" />\n                                  Share on Facebook\n                                </Button>\n                                <Button \n                                  onClick={() => {\n                                    const text = `Hi! I wanted to share this with you - Economy Plumbing Services has been amazing for us. You can save $25 on your first service using my referral link: ${referralLinkData.url}`;\n                                    const url = `mailto:?subject=Save $25 on Plumbing Services&body=${encodeURIComponent(text)}`;\n                                    window.location.href = url;\n                                  }}\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  className=\"gap-2\"\n                                  data-testid=\"button-share-email\"\n                                >\n                                  <Mail className=\"w-4 h-4\" />\n                                  Share via Email\n                                </Button>\n                              </div>\n                            </div>\n                          )\n                        )}\n\n                        {/* How It Works */}\n                        <div className=\"grid md:grid-cols-2 gap-3\">\n                          <div className=\"flex items-start gap-3 p-4 bg-background rounded-lg border\">\n                            <Gift className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                            <div>\n                              <p className=\"font-medium mb-1\">You Get $25</p>\n                              <p className=\"text-sm text-muted-foreground\">\n                                When your referral completes a service of $200+\n                              </p>\n                            </div>\n                          </div>\n                          <div className=\"flex items-start gap-3 p-4 bg-background rounded-lg border\">\n                            <Heart className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                            <div>\n                              <p className=\"font-medium mb-1\">They Get $25</p>\n                              <p className=\"text-sm text-muted-foreground\">\n                                Your friend saves on their first service call\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n\n                        {/* Action Button */}\n                        <Button\n                          onClick={() => setShowReferralModal(true)}\n                          className=\"w-full\"\n                          size=\"lg\"\n                          data-testid=\"button-share-referral\"\n                        >\n                          <Share2 className=\"w-4 h-4 mr-2\" />\n                          Share Referral Link\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  )}\n                  </div>\n\n                  {/* Leave a Review (show if they have completed appointments) */}\n                  {completedAppointments.length > 0 && (\n                    <Card className=\"border-primary/20 bg-gradient-to-br from-primary/5 to-background\">\n                      <CardHeader>\n                        <div className=\"flex items-center gap-2\">\n                          <Star className=\"w-6 h-6 text-primary fill-primary\" />\n                          <CardTitle>Love Our Service?</CardTitle>\n                        </div>\n                        <CardDescription>\n                          Share your experience and help others find great plumbing service\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <div className=\"flex items-start gap-3 p-4 bg-background rounded-lg border\">\n                          <CheckCircle className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                          <div>\n                            <p className=\"font-medium mb-1\">Your Review Matters</p>\n                            <p className=\"text-sm text-muted-foreground\">\n                              Help your neighbors find reliable plumbing service. Your honest feedback helps us improve and helps others make informed decisions.\n                            </p>\n                          </div>\n                        </div>\n                        \n                        <Button\n                          className=\"w-full\"\n                          size=\"lg\"\n                          data-testid=\"button-leave-review\"\n                          onClick={() => {\n                            setReviewRating(0);\n                            setReviewFeedback(\"\");\n                            setReviewModalOpen(true);\n                          }}\n                        >\n                          <Star className=\"w-4 h-4 mr-2\" />\n                          Leave a Review\n                        </Button>\n\n                        <p className=\"text-xs text-center text-muted-foreground\">\n                          Choose from Google, Facebook, BBB, or Yelp - takes just 2 minutes!\n                        </p>\n                      </CardContent>\n                    </Card>\n                  )}\n                </>\n              ) : null}\n            </div>\n          )}\n        </div>\n      </main>\n\n      <Footer />\n      \n      {/* Referral Modal */}\n      {customerData && referralLinkData && (\n        <ReferralModal\n          open={showReferralModal}\n          onOpenChange={setShowReferralModal}\n          customerName={customerData.customer.name}\n          customerPhone={customerData.customer.phoneNumber}\n          customerId={customerId!}\n          referralCode={referralLinkData.code}\n        />\n      )}\n\n      {/* Estimate Detail Modal */}\n      <Dialog open={estimateDetailOpen} onOpenChange={setEstimateDetailOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[80vh]\" data-testid=\"dialog-estimate-detail\">\n          <DialogHeader>\n            <DialogTitle>Estimate Details</DialogTitle>\n            <DialogDescription>\n              Complete breakdown of your estimate\n            </DialogDescription>\n          </DialogHeader>\n          \n          {selectedEstimate && (\n            <div className=\"space-y-4\">\n              {/* Estimate Header */}\n              <div className=\"p-4 bg-muted/30 rounded-lg border\">\n                <div className=\"flex items-start justify-between gap-4 mb-3\">\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-semibold text-lg\">Estimate #{selectedEstimate.estimateNumber}</h3>\n                    {selectedEstimate.summary && (\n                      <p className=\"text-sm text-muted-foreground\">{selectedEstimate.summary}</p>\n                    )}\n                  </div>\n                  <div className=\"flex flex-col gap-1 items-end\">\n                    {getStatusBadge(selectedEstimate.status)}\n                    {getExpirationBadge(selectedEstimate)}\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                  <div>\n                    <p className=\"text-muted-foreground\">Total:</p>\n                    <p className=\"font-semibold text-lg text-primary\">{formatCurrency(selectedEstimate.total)}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-muted-foreground\">Created:</p>\n                    <p className=\"font-medium\">{formatDate(selectedEstimate.createdOn)}</p>\n                  </div>\n                  {selectedEstimate.expiresOn && (\n                    <>\n                      <div>\n                        <p className=\"text-muted-foreground\">Expires:</p>\n                        <p className=\"font-medium\">{formatDate(selectedEstimate.expiresOn)}</p>\n                      </div>\n                    </>\n                  )}\n                  {selectedEstimate.jobNumber && (\n                    <div>\n                      <p className=\"text-muted-foreground\">Job #:</p>\n                      <p className=\"font-medium\">{selectedEstimate.jobNumber}</p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Estimate Items */}\n              <div className=\"space-y-3\">\n                <h4 className=\"font-semibold\">Items</h4>\n                <div className=\"max-h-96 overflow-y-auto space-y-3 pr-2\">\n                  {selectedEstimate.items && selectedEstimate.items.length > 0 ? (\n                    selectedEstimate.items.map((item: any, index: number) => (\n                      <div key={index} className=\"p-3 bg-background rounded-lg border\" data-testid={`estimate-item-${index}`}>\n                        <div className=\"flex gap-3\">\n                          {item.pricebookDetails?.imageUrl && (\n                            <img \n                              src={item.pricebookDetails.imageUrl} \n                              alt={item.pricebookDetails.name || item.description}\n                              className=\"w-16 h-16 object-cover rounded\"\n                            />\n                          )}\n                          <div className=\"flex-1\">\n                            <p className=\"font-medium\">\n                              {item.pricebookDetails?.name || item.sku?.name || 'Service Item'}\n                            </p>\n                            {item.description && (\n                              <div \n                                className=\"text-sm text-muted-foreground mt-1\"\n                                dangerouslySetInnerHTML={{ __html: item.description }}\n                              />\n                            )}\n                            <div className=\"mt-3 space-y-1\">\n                              <div className=\"flex justify-between items-center text-sm\">\n                                <span className=\"text-muted-foreground\">\n                                  Quantity:\n                                </span>\n                                <span>{item.quantity || item.qty || 1}</span>\n                              </div>\n                              <div className=\"flex justify-between items-center text-sm\">\n                                <span className=\"text-muted-foreground\">\n                                  Unit Price:\n                                </span>\n                                <span>{formatCurrency(item.unitRate || 0)}</span>\n                              </div>\n                              <div className=\"flex justify-between items-center pt-1 border-t\">\n                                <span className=\"font-medium\">\n                                  Line Total:\n                                </span>\n                                <span className=\"font-semibold text-primary\">\n                                  {formatCurrency(item.total || 0)}\n                                </span>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <p className=\"text-center text-muted-foreground py-8\">No items found</p>\n                  )}\n                </div>\n              </div>\n\n              {/* Actions */}\n              <div className=\"flex gap-3 pt-4 border-t\">\n                <Button\n                  variant=\"outline\"\n                  className=\"flex-1\"\n                  onClick={() => setEstimateDetailOpen(false)}\n                  data-testid=\"button-close-estimate-detail\"\n                >\n                  Close\n                </Button>\n                <Button\n                  className=\"flex-1\"\n                  onClick={() => {\n                    handleRequestPDF('estimate', selectedEstimate.estimateNumber, selectedEstimate.id, {\n                      customerId: customerData!.customer.id,\n                      customerName: customerData!.customer.name,\n                      customerEmail: customerData!.customer.email\n                    });\n                    setEstimateDetailOpen(false);\n                  }}\n                  data-testid=\"button-request-estimate-pdf-modal\"\n                >\n                  <FileText className=\"w-4 h-4 mr-2\" />\n                  Request PDF Copy\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Reschedule Appointment Dialog */}\n      <Dialog open={rescheduleDialogOpen} onOpenChange={setRescheduleDialogOpen}>\n        <DialogContent data-testid=\"dialog-reschedule\">\n          <DialogHeader>\n            <DialogTitle>Reschedule Appointment</DialogTitle>\n            <DialogDescription>\n              Choose a new date and time window for your appointment. We'll update your schedule right away.\n            </DialogDescription>\n          </DialogHeader>\n\n          {appointmentToReschedule && (\n            <div className=\"space-y-4 py-4\">\n              {/* Current appointment info */}\n              <div className=\"p-4 bg-muted/30 rounded-lg border\">\n                <p className=\"text-sm font-medium mb-2\">Current Appointment:</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {appointmentToReschedule.jobType}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {formatDate(appointmentToReschedule.start)} at {formatTime(appointmentToReschedule.start)}\n                </p>\n              </div>\n\n              {/* New date and time window inputs */}\n              <div className=\"grid gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"new-date\">New Date</Label>\n                  <Input\n                    id=\"new-date\"\n                    type=\"date\"\n                    value={newAppointmentDate}\n                    onChange={(e) => setNewAppointmentDate(e.target.value)}\n                    min={new Date().toISOString().split('T')[0]}\n                    data-testid=\"input-new-date\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"new-window\">Time Window</Label>\n                  <Select\n                    value={newAppointmentWindow}\n                    onValueChange={setNewAppointmentWindow}\n                  >\n                    <SelectTrigger id=\"new-window\" data-testid=\"select-time-window\">\n                      <SelectValue placeholder=\"Select a time window\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {timeWindows.map((window) => (\n                        <SelectItem \n                          key={`${window.start}-${window.end}`} \n                          value={`${window.start}-${window.end}`}\n                          data-testid={`option-${window.start}-${window.end}`}\n                        >\n                          {window.label}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              <p className=\"text-xs text-muted-foreground\">\n                Note: This will update your appointment in our system. You can also call us at {phoneConfig.display} for assistance.\n              </p>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setRescheduleDialogOpen(false)}\n              disabled={isRescheduling}\n              data-testid=\"button-cancel-reschedule\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleRescheduleAppointment}\n              disabled={isRescheduling || !newAppointmentDate || !newAppointmentWindow}\n              data-testid=\"button-confirm-reschedule\"\n            >\n              {isRescheduling ? \"Rescheduling...\" : \"Confirm Reschedule\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit Contacts Dialog */}\n      <Dialog open={editContactsOpen} onOpenChange={setEditContactsOpen}>\n        <DialogContent data-testid=\"dialog-edit-contacts\">\n          <DialogHeader>\n            <DialogTitle>Update Contact Information</DialogTitle>\n            <DialogDescription>\n              Update your phone number and email address. This will be reflected in our system.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-phone\">Phone Number</Label>\n              <Input\n                id=\"edit-phone\"\n                type=\"tel\"\n                value={editPhone}\n                onChange={(e) => setEditPhone(e.target.value)}\n                placeholder=\"(512) 123-4567\"\n                data-testid=\"input-edit-phone\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-email\">Email Address</Label>\n              <Input\n                id=\"edit-email\"\n                type=\"email\"\n                value={editEmail}\n                onChange={(e) => setEditEmail(e.target.value)}\n                placeholder=\"you@example.com\"\n                data-testid=\"input-edit-email\"\n              />\n            </div>\n\n            <p className=\"text-xs text-muted-foreground\">\n              Note: Changes will update your contact information across all our systems.\n            </p>\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setEditContactsOpen(false)}\n              disabled={isUpdatingContacts}\n              data-testid=\"button-cancel-edit-contacts\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleUpdateContacts}\n              disabled={isUpdatingContacts || (!editPhone && !editEmail)}\n              data-testid=\"button-save-contacts\"\n            >\n              {isUpdatingContacts ? \"Updating...\" : \"Save Changes\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Contact Confirmation Dialog */}\n      <Dialog open={deleteContactDialogOpen} onOpenChange={setDeleteContactDialogOpen}>\n        <DialogContent data-testid=\"dialog-delete-contact\">\n          <DialogHeader>\n            <DialogTitle>Delete Contact?</DialogTitle>\n            <DialogDescription>\n              Are you sure you want to delete this contact information? This action cannot be undone.\n            </DialogDescription>\n          </DialogHeader>\n\n          {contactToDelete && (\n            <div className=\"py-4\">\n              <div className=\"bg-muted/50 p-4 rounded-lg\">\n                <p className=\"text-sm text-muted-foreground mb-1\">\n                  {contactToDelete.type === 'MobilePhone' ? 'Mobile' : contactToDelete.type}\n                </p>\n                <p className=\"font-medium\">\n                  {contactToDelete.value}\n                </p>\n              </div>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setDeleteContactDialogOpen(false);\n                setContactToDelete(null);\n              }}\n              disabled={isDeletingContact}\n              data-testid=\"button-cancel-delete-contact\"\n            >\n              Cancel\n            </Button>\n            <Button\n              variant=\"destructive\"\n              onClick={handleDeleteContact}\n              disabled={isDeletingContact}\n              data-testid=\"button-confirm-delete-contact\"\n            >\n              {isDeletingContact ? \"Deleting...\" : \"Delete Contact\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit Address Dialog */}\n      <Dialog open={editAddressOpen} onOpenChange={setEditAddressOpen}>\n        <DialogContent data-testid=\"dialog-edit-address\">\n          <DialogHeader>\n            <DialogTitle>Update Service Address</DialogTitle>\n            <DialogDescription>\n              Update your service address where we provide plumbing services.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-street\">Street Address</Label>\n              <Input\n                id=\"edit-street\"\n                type=\"text\"\n                value={editStreet}\n                onChange={(e) => setEditStreet(e.target.value)}\n                placeholder=\"123 Main Street\"\n                data-testid=\"input-edit-street\"\n              />\n            </div>\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-city\">City</Label>\n                <Input\n                  id=\"edit-city\"\n                  type=\"text\"\n                  value={editCity}\n                  onChange={(e) => setEditCity(e.target.value)}\n                  placeholder=\"Austin\"\n                  data-testid=\"input-edit-city\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-state\">State</Label>\n                <Input\n                  id=\"edit-state\"\n                  type=\"text\"\n                  value={editState}\n                  onChange={(e) => setEditState(e.target.value)}\n                  placeholder=\"TX\"\n                  maxLength={2}\n                  data-testid=\"input-edit-state\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-zip\">ZIP Code</Label>\n              <Input\n                id=\"edit-zip\"\n                type=\"text\"\n                value={editZip}\n                onChange={(e) => setEditZip(e.target.value)}\n                placeholder=\"78701\"\n                maxLength={5}\n                data-testid=\"input-edit-zip\"\n              />\n            </div>\n\n            <p className=\"text-xs text-muted-foreground\">\n              Note: This updates your primary service address in our system.\n            </p>\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setEditAddressOpen(false)}\n              disabled={isUpdatingAddress}\n              data-testid=\"button-cancel-edit-address\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleUpdateAddress}\n              disabled={isUpdatingAddress || !editStreet || !editCity || !editState || !editZip}\n              data-testid=\"button-save-address\"\n            >\n              {isUpdatingAddress ? \"Updating...\" : \"Save Changes\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Email Us Dialog */}\n      <Dialog open={emailUsOpen} onOpenChange={setEmailUsOpen}>\n        <DialogContent data-testid=\"dialog-email-us\">\n          <DialogHeader>\n            <DialogTitle>Email Us</DialogTitle>\n            <DialogDescription>\n              Send us a message and we'll get back to you as soon as possible.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email-name\">Name</Label>\n                <Input\n                  id=\"email-name\"\n                  type=\"text\"\n                  value={emailUsName}\n                  onChange={(e) => setEmailUsName(e.target.value)}\n                  placeholder=\"Your Name\"\n                  data-testid=\"input-email-name\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email-phone\">Phone</Label>\n                <Input\n                  id=\"email-phone\"\n                  type=\"tel\"\n                  value={emailUsPhone}\n                  onChange={(e) => setEmailUsPhone(e.target.value)}\n                  placeholder=\"(512) 123-4567\"\n                  data-testid=\"input-email-phone\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email-address\">Email Address</Label>\n              <Input\n                id=\"email-address\"\n                type=\"email\"\n                value={emailUsEmail}\n                onChange={(e) => setEmailUsEmail(e.target.value)}\n                placeholder=\"you@example.com\"\n                data-testid=\"input-email-address\"\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email-subject\">Subject</Label>\n              <Input\n                id=\"email-subject\"\n                type=\"text\"\n                value={emailUsSubject}\n                onChange={(e) => setEmailUsSubject(e.target.value)}\n                placeholder=\"How can we help?\"\n                data-testid=\"input-email-subject\"\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email-message\">Message</Label>\n              <textarea\n                id=\"email-message\"\n                className=\"flex min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\n                value={emailUsMessage}\n                onChange={(e) => setEmailUsMessage(e.target.value)}\n                placeholder=\"Tell us more about what you need...\"\n                data-testid=\"input-email-message\"\n              />\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setEmailUsOpen(false)}\n              disabled={isSendingEmail}\n              data-testid=\"button-cancel-email\"\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={async () => {\n                if (!emailUsName || !emailUsEmail || !emailUsMessage) {\n                  toast({\n                    title: \"Missing Information\",\n                    description: \"Please fill in all required fields\",\n                    variant: \"destructive\"\n                  });\n                  return;\n                }\n                \n                setIsSendingEmail(true);\n                try {\n                  const response = await fetch(\"/api/contact\", {\n                    method: \"POST\",\n                    headers: {\n                      \"Content-Type\": \"application/json\",\n                    },\n                    body: JSON.stringify({\n                      name: emailUsName,\n                      email: emailUsEmail,\n                      phone: emailUsPhone,\n                      subject: emailUsSubject || \"Customer Portal Inquiry\",\n                      message: emailUsMessage,\n                      source: \"customer_portal\"\n                    }),\n                  });\n\n                  if (response.ok) {\n                    toast({\n                      title: \"Message Sent!\",\n                      description: \"We've received your message and will respond soon.\",\n                    });\n                    setEmailUsOpen(false);\n                    // Clear form\n                    setEmailUsSubject(\"\");\n                    setEmailUsMessage(\"\");\n                  } else {\n                    throw new Error(\"Failed to send message\");\n                  }\n                } catch (error) {\n                  console.error(\"Error sending email:\", error);\n                  toast({\n                    title: \"Error\",\n                    description: \"Failed to send message. Please try again.\",\n                    variant: \"destructive\"\n                  });\n                } finally {\n                  setIsSendingEmail(false);\n                }\n              }}\n              disabled={isSendingEmail || !emailUsName || !emailUsEmail || !emailUsMessage}\n              data-testid=\"button-send-email\"\n            >\n              {isSendingEmail ? \"Sending...\" : \"Send Message\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Review Collection Modal */}\n      <Dialog open={reviewModalOpen} onOpenChange={setReviewModalOpen}>\n        <DialogContent className=\"sm:max-w-md\" data-testid=\"dialog-review\">\n          <DialogHeader>\n            <DialogTitle>\n              {reviewRating === 0 ? \"How was your experience?\" : \n               reviewRating >= 4 ? \"Thank you for your feedback!\" : \n               \"We appreciate your feedback\"}\n            </DialogTitle>\n            <DialogDescription>\n              {reviewRating === 0 ? \"Please rate your recent service\" : \n               reviewRating >= 4 ? \"Share your positive experience with others\" : \n               \"Help us improve our service\"}\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            {/* Star Rating */}\n            <div className=\"flex justify-center gap-2\">\n              {[1, 2, 3, 4, 5].map((star) => (\n                <button\n                  key={star}\n                  onClick={() => setReviewRating(star)}\n                  className=\"focus:outline-none transition-transform hover:scale-110\"\n                  data-testid={`button-star-${star}`}\n                >\n                  <Star\n                    className={`w-10 h-10 ${\n                      star <= reviewRating \n                        ? \"fill-yellow-400 text-yellow-400\" \n                        : \"text-gray-300 hover:text-yellow-400\"\n                    }`}\n                  />\n                </button>\n              ))}\n            </div>\n\n            {/* Rating-based content */}\n            {reviewRating > 0 && (\n              <>\n                {reviewRating >= 4 ? (\n                  // Positive review - show platform links\n                  <div className=\"space-y-3\">\n                    <p className=\"text-center text-sm text-muted-foreground\">\n                      Please share your experience on one of these platforms:\n                    </p>\n                    \n                    <div className=\"grid gap-2\">\n                      <Button\n                        variant=\"outline\"\n                        className=\"w-full justify-start gap-3\"\n                        onClick={() => {\n                          window.open('https://g.page/r/CeBZvF4LQ-KNEAE/review', '_blank');\n                          setReviewModalOpen(false);\n                          toast({\n                            title: \"Thank you!\",\n                            description: \"Opening Google Reviews...\",\n                          });\n                        }}\n                        data-testid=\"button-google-review\"\n                      >\n                        <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                          <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                          <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                          <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                          <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                        </svg>\n                        Google Reviews\n                      </Button>\n                      \n                      <Button\n                        variant=\"outline\"\n                        className=\"w-full justify-start gap-3\"\n                        onClick={() => {\n                          window.open('https://www.facebook.com/EconomyPlumbingServices/reviews', '_blank');\n                          setReviewModalOpen(false);\n                          toast({\n                            title: \"Thank you!\",\n                            description: \"Opening Facebook Reviews...\",\n                          });\n                        }}\n                        data-testid=\"button-facebook-review\"\n                      >\n                        <SiFacebook className=\"w-5 h-5 text-[#1877F2]\" />\n                        Facebook Reviews\n                      </Button>\n                      \n                      <Button\n                        variant=\"outline\"\n                        className=\"w-full justify-start gap-3\"\n                        onClick={() => {\n                          window.open('https://www.yelp.com/writeareview/biz/economy-plumbing-services-austin', '_blank');\n                          setReviewModalOpen(false);\n                          toast({\n                            title: \"Thank you!\",\n                            description: \"Opening Yelp Reviews...\",\n                          });\n                        }}\n                        data-testid=\"button-yelp-review\"\n                      >\n                        <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                          <path fill=\"#FF1A1A\" d=\"M12.062 17.662c.038-.934-.008-.889.002-2.393.007-.9.527-.991.756-.635.052.081 1.518 2.368 1.541 2.449.156.557-.194.683-.774.619-.651-.072-1.245-.166-1.249-.166-.265-.049-.368-.146-.276-.51zm2.167-4.142c.011-.908.012-.908.021-1.823.011-1.103-.746-1.098-1.069-.501-.073.135-1.164 2.443-1.212 2.553-.175.408.254.578.663.556l1.27-.069c.17-.009.333-.065.327-.716zm-3.192.955c.901-.111.91-.148 1.75-.291.508-.087.546-.567.087-.752-.105-.042-2.634-.912-2.728-.951-.599-.247-.772.292-.548.867.251.646.497 1.222.497 1.227.103.224.256.215.585-.065zm-3.834 5.558c.347-.778.347-.801.651-1.479.365-.815-.397-1.139-.856-.595-.099.125-1.912 2.317-1.939 2.383-.231.576.271.876.687.803.682-.125 1.162-.239 1.166-.244.178-.108.24-.243.291-.868zm.901-2.701c.793-.448.808-.457 1.522-.874.86-.502.429-1.155-.342-1.176-.177-.005-3.057-.029-3.163-.036-.671-.043-.819.503-.438.929.427.478.823.912.827.917.163.175.36.14.698-.09z\"/>\n                        </svg>\n                        Yelp Reviews\n                      </Button>\n                      \n                      <Button\n                        variant=\"outline\"\n                        className=\"w-full justify-start gap-3\"\n                        onClick={() => {\n                          window.open('https://www.bbb.org/us/tx/austin/profile/plumber/economy-plumbing-services-0825-1000049576/customer-reviews', '_blank');\n                          setReviewModalOpen(false);\n                          toast({\n                            title: \"Thank you!\",\n                            description: \"Opening BBB Reviews...\",\n                          });\n                        }}\n                        data-testid=\"button-bbb-review\"\n                      >\n                        <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                          <path fill=\"#003087\" d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/>\n                        </svg>\n                        BBB Reviews\n                      </Button>\n                    </div>\n                  </div>\n                ) : (\n                  // Negative review - collect private feedback\n                  <div className=\"space-y-3\">\n                    <p className=\"text-center text-sm text-muted-foreground\">\n                      We're sorry to hear about your experience. Please tell us how we can improve:\n                    </p>\n                    \n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"feedback\">Your Feedback</Label>\n                      <textarea\n                        id=\"feedback\"\n                        className=\"flex min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\n                        value={reviewFeedback}\n                        onChange={(e) => setReviewFeedback(e.target.value)}\n                        placeholder=\"Please share what went wrong and how we can do better...\"\n                        data-testid=\"input-review-feedback\"\n                      />\n                    </div>\n                    \n                    <Button\n                      className=\"w-full\"\n                      onClick={async () => {\n                        setIsSubmittingReview(true);\n                        try {\n                          // Submit private feedback\n                          const response = await fetch(\"/api/reviews/private-feedback\", {\n                            method: \"POST\",\n                            headers: { \"Content-Type\": \"application/json\" },\n                            body: JSON.stringify({\n                              customerId: customerId,\n                              rating: reviewRating,\n                              feedback: reviewFeedback,\n                              customerName: customerData?.customer?.name || \"Anonymous\",\n                              customerEmail: customerData?.customer?.email || \"\"\n                            }),\n                          });\n\n                          if (response.ok) {\n                            toast({\n                              title: \"Thank you for your feedback\",\n                              description: \"We'll review your comments and work to improve our service.\",\n                            });\n                            setReviewModalOpen(false);\n                          } else {\n                            throw new Error(\"Failed to submit feedback\");\n                          }\n                        } catch (error) {\n                          console.error(\"Error submitting feedback:\", error);\n                          toast({\n                            title: \"Error\",\n                            description: \"Failed to submit feedback. Please try again.\",\n                            variant: \"destructive\"\n                          });\n                        } finally {\n                          setIsSubmittingReview(false);\n                        }\n                      }}\n                      disabled={isSubmittingReview || !reviewFeedback.trim()}\n                      data-testid=\"button-submit-feedback\"\n                    >\n                      {isSubmittingReview ? \"Submitting...\" : \"Submit Feedback\"}\n                    </Button>\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n\n          {reviewRating === 0 && (\n            <DialogFooter>\n              <Button\n                variant=\"outline\"\n                onClick={() => setReviewModalOpen(false)}\n                data-testid=\"button-cancel-review\"\n              >\n                Cancel\n              </Button>\n            </DialogFooter>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Account Switcher Dialog */}\n      <Dialog open={showAccountSelection && verificationStep === 'authenticated'} onOpenChange={setShowAccountSelection}>\n        <DialogContent className=\"max-w-2xl\" data-testid=\"dialog-switch-account\">\n          <DialogHeader>\n            <DialogTitle>Switch Account</DialogTitle>\n            <DialogDescription>\n              Select which account you'd like to view. You have access to multiple accounts.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-3 py-4\">\n            {availableAccounts.map((account) => (\n              <Card\n                key={account.id}\n                className=\"hover-elevate active-elevate-2 cursor-pointer\"\n                onClick={() => handleSelectAccount(account.id)}\n                data-testid={`switch-account-option-${account.id}`}\n              >\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start gap-3\">\n                    {account.type === 'Commercial' ? (\n                      <Users className=\"w-6 h-6 text-primary flex-shrink-0 mt-0.5\" />\n                    ) : (\n                      <Home className=\"w-6 h-6 text-primary flex-shrink-0 mt-0.5\" />\n                    )}\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <p className=\"font-semibold\">{account.name}</p>\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          {account.type}\n                        </Badge>\n                      </div>\n                      {account.address && (\n                        <p className=\"text-sm text-muted-foreground flex items-start gap-1\">\n                          <MapPin className=\"w-3 h-3 flex-shrink-0 mt-0.5\" />\n                          {account.address}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setShowAccountSelection(false)}\n              data-testid=\"button-cancel-switch\"\n            >\n              Cancel\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}